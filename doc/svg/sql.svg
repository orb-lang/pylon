<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.40.1 (20161225.0304)
 -->
<!-- Title: lpegNode Pages: 1 -->
<svg width="19660pt" height="11125pt"
 viewBox="0.00 0.00 19660.30 11125.42" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 11121.4191)">
<title>lpegNode</title>
<polygon fill="#ffffff" stroke="transparent" points="-4,4 -4,-11121.4191 19656.2972,-11121.4191 19656.2972,4 -4,4"/>
<!-- doc_0 -->
<g id="node1" class="node">
<title>doc_0</title>
<ellipse fill="none" stroke="#000000" cx="1778" cy="-11099.4191" rx="46.9581" ry="18"/>
<text text-anchor="middle" x="1778" y="-11095.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">doc &#45; 898</text>
</g>
<!-- section_1 -->
<g id="node2" class="node">
<title>section_1</title>
<ellipse fill="none" stroke="#000000" cx="1778" cy="-11027.4191" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1778" y="-11023.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 1&#45;711</text>
</g>
<!-- doc_0&#45;&gt;section_1 -->
<g id="edge1" class="edge">
<title>doc_0&#45;&gt;section_1</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1778,-11081.2504C1778,-11073.55 1778,-11064.3934 1778,-11055.8357"/>
<polygon fill="#000000" stroke="#000000" points="1781.5001,-11055.8323 1778,-11045.8323 1774.5001,-11055.8324 1781.5001,-11055.8323"/>
</g>
<!-- header_2 -->
<g id="node3" class="node">
<title>header_2</title>
<ellipse fill="none" stroke="#000000" cx="329" cy="-10955.4191" rx="49.3636" ry="18"/>
<text text-anchor="middle" x="329" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">1 : SQLite</text>
</g>
<!-- section_1&#45;&gt;header_2 -->
<g id="edge2" class="edge">
<title>section_1&#45;&gt;header_2</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1712.9924,-11026.6591C1522.1756,-11024.0138 947.1841,-11013.0793 472,-10973.4191 443.2724,-10971.0214 411.4402,-10967.1363 385.1158,-10963.5882"/>
<polygon fill="#000000" stroke="#000000" points="385.3259,-10960.0844 374.9439,-10962.1973 384.3775,-10967.0199 385.3259,-10960.0844"/>
</g>
<!-- prose_3 -->
<g id="node4" class="node">
<title>prose_3</title>
<ellipse fill="none" stroke="#000000" cx="513" cy="-10955.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="513" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_3 -->
<g id="edge3" class="edge">
<title>section_1&#45;&gt;prose_3</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1713.9661,-11023.7745C1489.5474,-11011.0012 742.1556,-10968.4619 555.5163,-10957.839"/>
<polygon fill="#000000" stroke="#000000" points="555.4715,-10954.3308 545.2887,-10957.2568 555.0737,-10961.3195 555.4715,-10954.3308"/>
</g>
<!-- prose_4 -->
<g id="node5" class="node">
<title>prose_4</title>
<ellipse fill="none" stroke="#000000" cx="1074" cy="-10955.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1074" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_1&#45;&gt;prose_4 -->
<g id="edge4" class="edge">
<title>section_1&#45;&gt;prose_4</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1716.7562,-11021.1555C1576.6359,-11006.825 1235.6049,-10971.9468 1116.1633,-10959.7312"/>
<polygon fill="#000000" stroke="#000000" points="1116.27,-10956.224 1105.9658,-10958.6883 1115.5578,-10963.1876 1116.27,-10956.224"/>
</g>
<!-- section_5 -->
<g id="node6" class="node">
<title>section_5</title>
<ellipse fill="none" stroke="#000000" cx="1778" cy="-10955.4191" rx="65.0143" ry="18"/>
<text text-anchor="middle" x="1778" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 11&#45;22</text>
</g>
<!-- section_1&#45;&gt;section_5 -->
<g id="edge5" class="edge">
<title>section_1&#45;&gt;section_5</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1778,-11009.2504C1778,-11001.55 1778,-10992.3934 1778,-10983.8357"/>
<polygon fill="#000000" stroke="#000000" points="1781.5001,-10983.8323 1778,-10973.8323 1774.5001,-10983.8324 1781.5001,-10983.8323"/>
</g>
<!-- section_6 -->
<g id="node7" class="node">
<title>section_6</title>
<ellipse fill="none" stroke="#000000" cx="3179" cy="-10955.4191" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="3179" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 23&#45;39</text>
</g>
<!-- section_1&#45;&gt;section_6 -->
<g id="edge6" class="edge">
<title>section_1&#45;&gt;section_6</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1842.3002,-11024.1146C2072.8691,-11012.2652 2857.5152,-10971.9408 3104.1605,-10959.2652"/>
<polygon fill="#000000" stroke="#000000" points="3104.6452,-10962.745 3114.4524,-10958.7363 3104.2859,-10955.7542 3104.6452,-10962.745"/>
</g>
<!-- section_7 -->
<g id="node8" class="node">
<title>section_7</title>
<ellipse fill="none" stroke="#000000" cx="6103" cy="-10955.4191" rx="69.851" ry="18"/>
<text text-anchor="middle" x="6103" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 78&#45;711</text>
</g>
<!-- section_1&#45;&gt;section_7 -->
<g id="edge7" class="edge">
<title>section_1&#45;&gt;section_7</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1842.9206,-11026.3383C2335.4589,-11018.1388 5478.8064,-10965.8103 6022.8296,-10956.7537"/>
<polygon fill="#000000" stroke="#000000" points="6022.9956,-10960.2515 6032.936,-10956.5855 6022.8791,-10953.2525 6022.9956,-10960.2515"/>
</g>
<!-- section_8 -->
<g id="node9" class="node">
<title>section_8</title>
<ellipse fill="none" stroke="#000000" cx="7742" cy="-10955.4191" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="7742" y="-10951.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 712&#45;800</text>
</g>
<!-- section_1&#45;&gt;section_8 -->
<g id="edge8" class="edge">
<title>section_1&#45;&gt;section_8</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1842.9459,-11026.635C2440.4372,-11019.4218 6974.4613,-10964.6851 7656.2744,-10956.454"/>
<polygon fill="#000000" stroke="#000000" points="7656.5503,-10959.951 7666.5073,-10956.3304 7656.4657,-10952.9515 7656.5503,-10959.951"/>
</g>
<!-- leaf_9 -->
<g id="node10" class="node">
<title>leaf_9</title>
<polygon fill="none" stroke="#c0c0c0" points="281,-10901.4191 209,-10901.4191 209,-10865.4191 281,-10865.4191 281,-10901.4191"/>
<text text-anchor="middle" x="245" y="-10879.9191" font-family="Inconsolata" font-size="14.00" fill="#000000">* SQLite</text>
</g>
<!-- header_2&#45;&gt;leaf_9 -->
<g id="edge9" class="edge">
<title>header_2&#45;&gt;leaf_9</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M309.5176,-10938.7198C298.9642,-10929.6741 285.7178,-10918.32 273.9779,-10908.2572"/>
<polygon fill="#000000" stroke="#000000" points="276.0129,-10905.3918 266.1425,-10901.5412 271.4573,-10910.7066 276.0129,-10905.3918"/>
</g>
<!-- raw_10 -->
<g id="node11" class="node">
<title>raw_10</title>
<ellipse fill="none" stroke="#000000" cx="326" cy="-10883.4191" rx="27" ry="18"/>
<text text-anchor="middle" x="326" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_10 -->
<g id="edge10" class="edge">
<title>prose_3&#45;&gt;raw_10</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M484.7815,-10946.4562C454.1521,-10936.4676 403.9919,-10919.3487 362,-10901.4191 360.2167,-10900.6576 358.3969,-10899.8498 356.5697,-10899.0145"/>
<polygon fill="#000000" stroke="#000000" points="358.0375,-10895.8369 347.504,-10894.6976 355.028,-10902.1569 358.0375,-10895.8369"/>
</g>
<!-- prespace_11 -->
<g id="node12" class="node">
<title>prespace_11</title>
<ellipse fill="none" stroke="#000000" cx="417" cy="-10883.4191" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="417" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_3&#45;&gt;prespace_11 -->
<g id="edge11" class="edge">
<title>prose_3&#45;&gt;prespace_11</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M493.573,-10940.8488C480.0746,-10930.725 461.8362,-10917.0462 446.5453,-10905.5781"/>
<polygon fill="#000000" stroke="#000000" points="448.5024,-10902.6709 438.4024,-10899.4709 444.3024,-10908.2709 448.5024,-10902.6709"/>
</g>
<!-- literal_12 -->
<g id="node13" class="node">
<title>literal_12</title>
<ellipse fill="none" stroke="#000000" cx="513" cy="-10883.4191" rx="31.481" ry="18"/>
<text text-anchor="middle" x="513" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_3&#45;&gt;literal_12 -->
<g id="edge12" class="edge">
<title>prose_3&#45;&gt;literal_12</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M513,-10937.2504C513,-10929.55 513,-10920.3934 513,-10911.8357"/>
<polygon fill="#000000" stroke="#000000" points="516.5001,-10911.8323 513,-10901.8323 509.5001,-10911.8324 516.5001,-10911.8323"/>
</g>
<!-- raw_13 -->
<g id="node14" class="node">
<title>raw_13</title>
<ellipse fill="none" stroke="#000000" cx="614" cy="-10883.4191" rx="27" ry="18"/>
<text text-anchor="middle" x="614" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_3&#45;&gt;raw_13 -->
<g id="edge13" class="edge">
<title>prose_3&#45;&gt;raw_13</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M532.9543,-10941.1942C548.4243,-10930.1661 570.0202,-10914.771 587.0294,-10902.6456"/>
<polygon fill="#000000" stroke="#000000" points="589.3382,-10905.2981 595.4493,-10896.6433 585.2748,-10899.5981 589.3382,-10905.2981"/>
</g>
<!-- raw_18 -->
<g id="node19" class="node">
<title>raw_18</title>
<ellipse fill="none" stroke="#000000" cx="871" cy="-10883.4191" rx="27" ry="18"/>
<text text-anchor="middle" x="871" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_18 -->
<g id="edge18" class="edge">
<title>prose_4&#45;&gt;raw_18</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1046.6225,-10945.7088C1009.808,-10932.6515 944.3883,-10909.4484 904.6248,-10895.3451"/>
<polygon fill="#000000" stroke="#000000" points="905.6959,-10892.0114 895.1012,-10891.9673 903.3559,-10898.6088 905.6959,-10892.0114"/>
</g>
<!-- prespace_19 -->
<g id="node20" class="node">
<title>prespace_19</title>
<ellipse fill="none" stroke="#000000" cx="978" cy="-10883.4191" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="978" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_4&#45;&gt;prespace_19 -->
<g id="edge19" class="edge">
<title>prose_4&#45;&gt;prespace_19</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1054.573,-10940.8488C1041.0746,-10930.725 1022.8362,-10917.0462 1007.5453,-10905.5781"/>
<polygon fill="#000000" stroke="#000000" points="1009.5024,-10902.6709 999.4024,-10899.4709 1005.3024,-10908.2709 1009.5024,-10902.6709"/>
</g>
<!-- literal_20 -->
<g id="node21" class="node">
<title>literal_20</title>
<ellipse fill="none" stroke="#000000" cx="1074" cy="-10883.4191" rx="31.481" ry="18"/>
<text text-anchor="middle" x="1074" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_4&#45;&gt;literal_20 -->
<g id="edge20" class="edge">
<title>prose_4&#45;&gt;literal_20</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1074,-10937.2504C1074,-10929.55 1074,-10920.3934 1074,-10911.8357"/>
<polygon fill="#000000" stroke="#000000" points="1077.5001,-10911.8323 1074,-10901.8323 1070.5001,-10911.8324 1077.5001,-10911.8323"/>
</g>
<!-- raw_21 -->
<g id="node22" class="node">
<title>raw_21</title>
<ellipse fill="none" stroke="#000000" cx="1218" cy="-10883.4191" rx="27" ry="18"/>
<text text-anchor="middle" x="1218" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_4&#45;&gt;raw_21 -->
<g id="edge21" class="edge">
<title>prose_4&#45;&gt;raw_21</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1098.1024,-10943.3679C1122.4897,-10931.1742 1160.2944,-10912.2719 1186.9211,-10898.9585"/>
<polygon fill="#000000" stroke="#000000" points="1188.8006,-10901.9319 1196.1796,-10894.3293 1185.6701,-10895.6709 1188.8006,-10901.9319"/>
</g>
<!-- header_26 -->
<g id="node27" class="node">
<title>header_26</title>
<ellipse fill="none" stroke="#000000" cx="1556" cy="-10883.4191" rx="89.9744" ry="18"/>
<text text-anchor="middle" x="1556" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : Original licensing</text>
</g>
<!-- section_5&#45;&gt;header_26 -->
<g id="edge26" class="edge">
<title>section_5&#45;&gt;header_26</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1735.721,-10941.7069C1701.0759,-10930.4707 1651.7056,-10914.4587 1613.4737,-10902.0592"/>
<polygon fill="#000000" stroke="#000000" points="1614.1017,-10898.5834 1603.5096,-10898.8276 1611.9421,-10905.242 1614.1017,-10898.5834"/>
</g>
<!-- prose_27 -->
<g id="node28" class="node">
<title>prose_27</title>
<ellipse fill="none" stroke="#000000" cx="1696" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1696" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_27 -->
<g id="edge27" class="edge">
<title>section_5&#45;&gt;prose_27</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1758.1501,-10937.9899C1747.0588,-10928.2512 1733.1239,-10916.0156 1721.2613,-10905.5997"/>
<polygon fill="#000000" stroke="#000000" points="1723.264,-10902.7005 1713.4403,-10898.7325 1718.6454,-10907.9606 1723.264,-10902.7005"/>
</g>
<!-- prose_28 -->
<g id="node29" class="node">
<title>prose_28</title>
<ellipse fill="none" stroke="#000000" cx="1778" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1778" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_28 -->
<g id="edge28" class="edge">
<title>section_5&#45;&gt;prose_28</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1778,-10937.2504C1778,-10929.55 1778,-10920.3934 1778,-10911.8357"/>
<polygon fill="#000000" stroke="#000000" points="1781.5001,-10911.8323 1778,-10901.8323 1774.5001,-10911.8324 1781.5001,-10911.8323"/>
</g>
<!-- prose_29 -->
<g id="node30" class="node">
<title>prose_29</title>
<ellipse fill="none" stroke="#000000" cx="1860" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1860" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_29 -->
<g id="edge29" class="edge">
<title>section_5&#45;&gt;prose_29</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1797.8499,-10937.9899C1808.9412,-10928.2512 1822.8761,-10916.0156 1834.7387,-10905.5997"/>
<polygon fill="#000000" stroke="#000000" points="1837.3546,-10907.9606 1842.5597,-10898.7325 1832.736,-10902.7005 1837.3546,-10907.9606"/>
</g>
<!-- prose_30 -->
<g id="node31" class="node">
<title>prose_30</title>
<ellipse fill="none" stroke="#000000" cx="1942" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="1942" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_5&#45;&gt;prose_30 -->
<g id="edge30" class="edge">
<title>section_5&#45;&gt;prose_30</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1812.7802,-10940.1497C1840.62,-10927.9274 1879.4754,-10910.8689 1907.2953,-10898.6553"/>
<polygon fill="#000000" stroke="#000000" points="1908.8897,-10901.7778 1916.6391,-10894.5531 1906.0757,-10895.3683 1908.8897,-10901.7778"/>
</g>
<!-- header_40 -->
<g id="node41" class="node">
<title>header_40</title>
<ellipse fill="none" stroke="#000000" cx="2440" cy="-10883.4191" rx="51.2759" ry="18"/>
<text text-anchor="middle" x="2440" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : imports</text>
</g>
<!-- section_6&#45;&gt;header_40 -->
<g id="edge40" class="edge">
<title>section_6&#45;&gt;header_40</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3115.7488,-10950.2051C3007.8237,-10941.1775 2781.2116,-10921.653 2590,-10901.4191 2559.8009,-10898.2234 2526.2359,-10894.2365 2498.5267,-10890.8277"/>
<polygon fill="#000000" stroke="#000000" points="2498.9539,-10887.354 2488.6,-10889.6005 2498.095,-10894.3011 2498.9539,-10887.354"/>
</g>
<!-- prose_41 -->
<g id="node42" class="node">
<title>prose_41</title>
<ellipse fill="none" stroke="#000000" cx="2631" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="2631" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_41 -->
<g id="edge41" class="edge">
<title>section_6&#45;&gt;prose_41</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3119.5727,-10947.6111C3007.8246,-10932.9289 2768.9767,-10901.5474 2672.6004,-10888.8848"/>
<polygon fill="#000000" stroke="#000000" points="2673.0166,-10885.4095 2662.6459,-10887.5769 2672.1047,-10892.3499 2673.0166,-10885.4095"/>
</g>
<!-- prose_42 -->
<g id="node43" class="node">
<title>prose_42</title>
<ellipse fill="none" stroke="#000000" cx="3746" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="3746" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_6&#45;&gt;prose_42 -->
<g id="edge42" class="edge">
<title>section_6&#45;&gt;prose_42</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3238.6073,-10947.8499C3353.9427,-10933.2041 3605.0133,-10901.3221 3704.3442,-10888.7087"/>
<polygon fill="#000000" stroke="#000000" points="3704.8276,-10892.1755 3714.3071,-10887.4436 3703.9458,-10885.2313 3704.8276,-10892.1755"/>
</g>
<!-- codeblock_43 -->
<g id="node44" class="node">
<title>codeblock_43</title>
<ellipse fill="none" stroke="#000000" cx="4151" cy="-10883.4191" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="4151" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 31&#45;37</text>
</g>
<!-- section_6&#45;&gt;codeblock_43 -->
<g id="edge43" class="edge">
<title>section_6&#45;&gt;codeblock_43</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3242.4007,-10950.7227C3411.9785,-10938.1614 3876.032,-10903.7871 4067.0985,-10889.634"/>
<polygon fill="#000000" stroke="#000000" points="4067.3751,-10893.1232 4077.0892,-10888.8939 4066.8579,-10886.1423 4067.3751,-10893.1232"/>
</g>
<!-- section_44 -->
<g id="node45" class="node">
<title>section_44</title>
<ellipse fill="none" stroke="#000000" cx="4876" cy="-10883.4191" rx="65.8187" ry="18"/>
<text text-anchor="middle" x="4876" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 40&#45;77</text>
</g>
<!-- section_6&#45;&gt;section_44 -->
<g id="edge44" class="edge">
<title>section_6&#45;&gt;section_44</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3243.9675,-10952.6626C3510.1562,-10941.3688 4516.7489,-10898.6613 4800.8966,-10886.6055"/>
<polygon fill="#000000" stroke="#000000" points="4801.2547,-10890.0936 4811.0973,-10886.1727 4800.9579,-10883.0999 4801.2547,-10890.0936"/>
</g>
<!-- header_88 -->
<g id="node89" class="node">
<title>header_88</title>
<ellipse fill="none" stroke="#000000" cx="5844" cy="-10883.4191" rx="65.2996" ry="18"/>
<text text-anchor="middle" x="5844" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : SQLite FFI</text>
</g>
<!-- section_7&#45;&gt;header_88 -->
<g id="edge88" class="edge">
<title>section_7&#45;&gt;header_88</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6055.1936,-10942.1293C6011.3457,-10929.9399 5946.3782,-10911.8794 5900.0924,-10899.0123"/>
<polygon fill="#000000" stroke="#000000" points="5900.7933,-10895.5745 5890.2212,-10896.2682 5898.9184,-10902.3188 5900.7933,-10895.5745"/>
</g>
<!-- prose_89 -->
<g id="node90" class="node">
<title>prose_89</title>
<ellipse fill="none" stroke="#000000" cx="6046" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6046" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_89 -->
<g id="edge89" class="edge">
<title>section_7&#45;&gt;prose_89</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6088.9101,-10937.6213C6081.8726,-10928.7318 6073.2443,-10917.8329 6065.575,-10908.1454"/>
<polygon fill="#000000" stroke="#000000" points="6068.0975,-10905.6929 6059.1463,-10900.0249 6062.6092,-10910.0379 6068.0975,-10905.6929"/>
</g>
<!-- prose_90 -->
<g id="node91" class="node">
<title>prose_90</title>
<ellipse fill="none" stroke="#000000" cx="6161" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="6161" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_7&#45;&gt;prose_90 -->
<g id="edge90" class="edge">
<title>section_7&#45;&gt;prose_90</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6117.3371,-10937.6213C6124.5704,-10928.642 6133.4553,-10917.6125 6141.3178,-10907.8522"/>
<polygon fill="#000000" stroke="#000000" points="6144.0754,-10910.0081 6147.6231,-10900.0249 6138.6241,-10905.6168 6144.0754,-10910.0081"/>
</g>
<!-- codeblock_91 -->
<g id="node92" class="node">
<title>codeblock_91</title>
<ellipse fill="none" stroke="#000000" cx="6421" cy="-10883.4191" rx="82.2579" ry="18"/>
<text text-anchor="middle" x="6421" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 88&#45;704</text>
</g>
<!-- section_7&#45;&gt;codeblock_91 -->
<g id="edge91" class="edge">
<title>section_7&#45;&gt;codeblock_91</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6155.5112,-10943.5297C6209.7085,-10931.2587 6294.4559,-10912.0706 6353.5757,-10898.6849"/>
<polygon fill="#000000" stroke="#000000" points="6354.5878,-10902.0445 6363.568,-10896.4225 6353.0419,-10895.2173 6354.5878,-10902.0445"/>
</g>
<!-- codeblock_92 -->
<g id="node93" class="node">
<title>codeblock_92</title>
<ellipse fill="none" stroke="#000000" cx="6848" cy="-10883.4191" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="6848" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 706&#45;709</text>
</g>
<!-- section_7&#45;&gt;codeblock_92 -->
<g id="edge92" class="edge">
<title>section_7&#45;&gt;codeblock_92</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6168.787,-10949.0611C6302.7011,-10936.1191 6607.0847,-10906.7022 6758.7129,-10892.0482"/>
<polygon fill="#000000" stroke="#000000" points="6759.3021,-10895.5076 6768.919,-10891.0618 6758.6286,-10888.5401 6759.3021,-10895.5076"/>
</g>
<!-- header_106 -->
<g id="node107" class="node">
<title>header_106</title>
<ellipse fill="none" stroke="#000000" cx="7349" cy="-10883.4191" rx="102.4155" ry="18"/>
<text text-anchor="middle" x="7349" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">2 : Additional SQL layer</text>
</g>
<!-- section_8&#45;&gt;header_106 -->
<g id="edge106" class="edge">
<title>section_8&#45;&gt;header_106</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7681.884,-10944.4054C7614.4902,-10932.0585 7504.8621,-10911.974 7429.9638,-10898.2521"/>
<polygon fill="#000000" stroke="#000000" points="7430.5594,-10894.8031 7420.0924,-10896.4436 7429.2979,-10901.6885 7430.5594,-10894.8031"/>
</g>
<!-- prose_107 -->
<g id="node108" class="node">
<title>prose_107</title>
<ellipse fill="none" stroke="#000000" cx="7513" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7513" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_107 -->
<g id="edge107" class="edge">
<title>section_8&#45;&gt;prose_107</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7692.2366,-10941.7766C7655.4699,-10931.4257 7604.32,-10916.4557 7560,-10901.4191 7556.4834,-10900.226 7552.839,-10898.9329 7549.2062,-10897.606"/>
<polygon fill="#000000" stroke="#000000" points="7550.3054,-10894.2804 7539.7128,-10894.0597 7547.8558,-10900.8378 7550.3054,-10894.2804"/>
</g>
<!-- prose_108 -->
<g id="node109" class="node">
<title>prose_108</title>
<ellipse fill="none" stroke="#000000" cx="7601" cy="-10883.4191" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="7601" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_8&#45;&gt;prose_108 -->
<g id="edge108" class="edge">
<title>section_8&#45;&gt;prose_108</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7710.0049,-10939.0812C7687.2957,-10927.4849 7656.8974,-10911.9624 7633.9718,-10900.2558"/>
<polygon fill="#000000" stroke="#000000" points="7635.4589,-10897.0852 7624.9611,-10895.6545 7632.2755,-10903.3195 7635.4589,-10897.0852"/>
</g>
<!-- codeblock_109 -->
<g id="node110" class="node">
<title>codeblock_109</title>
<ellipse fill="none" stroke="#000000" cx="7742" cy="-10883.4191" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="7742" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 718&#45;722</text>
</g>
<!-- section_8&#45;&gt;codeblock_109 -->
<g id="edge109" class="edge">
<title>section_8&#45;&gt;codeblock_109</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7742,-10937.2504C7742,-10929.55 7742,-10920.3934 7742,-10911.8357"/>
<polygon fill="#000000" stroke="#000000" points="7745.5001,-10911.8323 7742,-10901.8323 7738.5001,-10911.8324 7745.5001,-10911.8323"/>
</g>
<!-- section_110 -->
<g id="node111" class="node">
<title>section_110</title>
<ellipse fill="none" stroke="#000000" cx="8029" cy="-10883.4191" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="8029" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 724&#45;736</text>
</g>
<!-- section_8&#45;&gt;section_110 -->
<g id="edge110" class="edge">
<title>section_8&#45;&gt;section_110</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7794.3065,-10942.2969C7842.8108,-10930.1286 7915.0497,-10912.0059 7966.5567,-10899.0843"/>
<polygon fill="#000000" stroke="#000000" points="7967.7207,-10902.4008 7976.5684,-10896.5726 7966.0173,-10895.6112 7967.7207,-10902.4008"/>
</g>
<!-- section_111 -->
<g id="node112" class="node">
<title>section_111</title>
<ellipse fill="none" stroke="#000000" cx="9396" cy="-10883.4191" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="9396" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 737&#45;780</text>
</g>
<!-- section_8&#45;&gt;section_111 -->
<g id="edge111" class="edge">
<title>section_8&#45;&gt;section_111</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7816.2822,-10952.1855C8087.4691,-10940.3805 9023.2421,-10899.6455 9311.0792,-10887.1157"/>
<polygon fill="#000000" stroke="#000000" points="9311.6127,-10890.5959 9321.451,-10886.6642 9311.3082,-10883.6025 9311.6127,-10890.5959"/>
</g>
<!-- section_112 -->
<g id="node113" class="node">
<title>section_112</title>
<ellipse fill="none" stroke="#000000" cx="13236" cy="-10883.4191" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="13236" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 781&#45;800</text>
</g>
<!-- section_8&#45;&gt;section_112 -->
<g id="edge112" class="edge">
<title>section_8&#45;&gt;section_112</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7817.5741,-10954.4287C8425.0343,-10946.4678 12505.8802,-10892.9874 13150.3633,-10884.5414"/>
<polygon fill="#000000" stroke="#000000" points="13150.5492,-10888.0393 13160.5024,-10884.4085 13150.4574,-10881.0399 13150.5492,-10888.0393"/>
</g>
<!-- section_113 -->
<g id="node114" class="node">
<title>section_113</title>
<ellipse fill="none" stroke="#000000" cx="14686" cy="-10883.4191" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="14686" y="-10879.2191" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 801&#45;891</text>
</g>
<!-- section_8&#45;&gt;section_113 -->
<g id="edge113" class="edge">
<title>section_8&#45;&gt;section_113</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7817.4644,-10954.788C8305.7216,-10950.6843 11068.5051,-10927.1514 13320,-10901.4191 13804.1732,-10895.8855 14384.8581,-10887.7301 14600.1946,-10884.6539"/>
<polygon fill="#000000" stroke="#000000" points="14600.5295,-10888.1495 14610.4784,-10884.5069 14600.4294,-10881.1503 14600.5295,-10888.1495"/>
</g>
<!-- leaf_14 -->
<g id="node15" class="node">
<title>leaf_14</title>
<polygon fill="none" stroke="#c0c0c0" points="338,-6104.2118 0,-6104.2118 0,-6032.4094 338,-6032.4094 338,-6104.2118"/>
<text text-anchor="middle" x="169" y="-6040.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">This needs to load first, so that we can add a</text>
</g>
<!-- raw_10&#45;&gt;leaf_14 -->
<g id="edge14" class="edge">
<title>raw_10&#45;&gt;leaf_14</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M325.3999,-10865.0138C315.4881,-10561.0258 185.9227,-6587.3196 170.4978,-6114.2484"/>
<polygon fill="#000000" stroke="#000000" points="173.9891,-6113.9199 170.165,-6104.0393 166.9928,-6114.1481 173.9891,-6113.9199"/>
</g>
<!-- leaf_15 -->
<g id="node16" class="node">
<title>leaf_15</title>
<polygon fill="none" stroke="#c0c0c0" points="410,-6086.3106 356,-6086.3106 356,-6050.3106 410,-6050.3106 410,-6086.3106"/>
<text text-anchor="middle" x="383" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_11&#45;&gt;leaf_15 -->
<g id="edge15" class="edge">
<title>prespace_11&#45;&gt;leaf_15</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M416.87,-10865.0138C414.6935,-10556.7751 385.875,-6475.4736 383.1989,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="386.698,-6096.3261 383.1274,-6086.3511 379.6982,-6096.3755 386.698,-6096.3261"/>
</g>
<!-- leaf_16 -->
<g id="node17" class="node">
<title>leaf_16</title>
<polygon fill="none" stroke="#c0c0c0" points="549.5,-6086.3106 428.5,-6086.3106 428.5,-6050.3106 549.5,-6050.3106 549.5,-6086.3106"/>
<text text-anchor="middle" x="489" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">package.loaders</text>
</g>
<!-- literal_12&#45;&gt;leaf_16 -->
<g id="edge16" class="edge">
<title>literal_12&#45;&gt;leaf_16</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M512.9083,-10865.0138C511.3719,-10556.7751 491.0294,-6475.4736 489.1404,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="492.6398,-6096.3334 489.0899,-6086.3511 485.6399,-6096.3684 492.6398,-6096.3334"/>
</g>
<!-- leaf_17 -->
<g id="node18" class="node">
<title>leaf_17</title>
<polygon fill="none" stroke="#c0c0c0" points="758.5,-6087.6112 567.5,-6087.6112 567.5,-6049.01 758.5,-6049.01 758.5,-6087.6112"/>
<text text-anchor="middle" x="663" y="-6072.5106" font-family="Inconsolata" font-size="14.00" fill="#000000"> which draws</text>
<text text-anchor="middle" x="663" y="-6057.1106" font-family="Inconsolata" font-size="14.00" fill="#000000">from the module database.</text>
</g>
<!-- raw_13&#45;&gt;leaf_17 -->
<g id="edge17" class="edge">
<title>raw_13&#45;&gt;leaf_17</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M614.1873,-10865.0138C617.32,-10557.1682 658.7507,-6485.8758 662.6984,-6097.9444"/>
<polygon fill="#000000" stroke="#000000" points="666.1998,-6097.8197 662.8018,-6087.7846 659.2002,-6097.7484 666.1998,-6097.8197"/>
</g>
<!-- leaf_22 -->
<g id="node23" class="node">
<title>leaf_22</title>
<polygon fill="none" stroke="#c0c0c0" points="933,-6088.2127 777,-6088.2127 777,-6048.4085 933,-6048.4085 933,-6088.2127"/>
<text text-anchor="middle" x="855" y="-6056.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">I wanted to keep the</text>
</g>
<!-- raw_18&#45;&gt;leaf_22 -->
<g id="edge22" class="edge">
<title>raw_18&#45;&gt;leaf_22</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M870.9388,-10865.0138C869.9164,-10557.3245 856.4013,-6490.0103 855.1004,-6098.5383"/>
<polygon fill="#000000" stroke="#000000" points="858.5996,-6098.2626 855.0663,-6088.2743 851.5997,-6098.2859 858.5996,-6098.2626"/>
</g>
<!-- leaf_23 -->
<g id="node24" class="node">
<title>leaf_23</title>
<polygon fill="none" stroke="#c0c0c0" points="1005,-6086.3106 951,-6086.3106 951,-6050.3106 1005,-6050.3106 1005,-6086.3106"/>
<text text-anchor="middle" x="978" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_19&#45;&gt;leaf_23 -->
<g id="edge23" class="edge">
<title>prespace_19&#45;&gt;leaf_23</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M978,-10865.0138C978,-10556.7751 978,-6475.4736 978,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="981.5001,-6096.351 978,-6086.3511 974.5001,-6096.3511 981.5001,-6096.351"/>
</g>
<!-- leaf_24 -->
<g id="node25" class="node">
<title>leaf_24</title>
<polygon fill="none" stroke="#c0c0c0" points="1095,-6086.3106 1023,-6086.3106 1023,-6050.3106 1095,-6050.3106 1095,-6086.3106"/>
<text text-anchor="middle" x="1059" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">ljsqlite</text>
</g>
<!-- literal_20&#45;&gt;leaf_24 -->
<g id="edge24" class="edge">
<title>literal_20&#45;&gt;leaf_24</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1073.9427,-10865.0138C1072.9824,-10556.7751 1060.2684,-6475.4736 1059.0877,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="1062.5874,-6096.3401 1059.0562,-6086.3511 1055.5875,-6096.3619 1062.5874,-6096.3401"/>
</g>
<!-- leaf_25 -->
<g id="node26" class="node">
<title>leaf_25</title>
<polygon fill="none" stroke="#c0c0c0" points="1458.5,-6095.611 1113.5,-6095.611 1113.5,-6041.0102 1458.5,-6041.0102 1458.5,-6095.611"/>
<text text-anchor="middle" x="1286" y="-6080.5106" font-family="Inconsolata" font-size="14.00" fill="#000000"> code in its own file for as long as practical,</text>
<text text-anchor="middle" x="1286" y="-6065.1106" font-family="Inconsolata" font-size="14.00" fill="#000000">this step entails changing that.</text>
</g>
<!-- raw_21&#45;&gt;leaf_25 -->
<g id="edge25" class="edge">
<title>raw_21&#45;&gt;leaf_25</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1218.2599,-10865.0138C1222.5796,-10559.1368 1279.3699,-6537.794 1285.47,-6105.8369"/>
<polygon fill="#000000" stroke="#000000" points="1288.9709,-6105.7973 1285.6125,-6095.7488 1281.9716,-6105.6984 1288.9709,-6105.7973"/>
</g>
<!-- leaf_31 -->
<g id="node32" class="node">
<title>leaf_31</title>
<polygon fill="none" stroke="#c0c0c0" points="1653.5,-6086.3106 1476.5,-6086.3106 1476.5,-6050.3106 1653.5,-6050.3106 1653.5,-6086.3106"/>
<text text-anchor="middle" x="1565" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">**** Original licensing</text>
</g>
<!-- header_26&#45;&gt;leaf_31 -->
<g id="edge31" class="edge">
<title>header_26&#45;&gt;leaf_31</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1556.0344,-10865.0138C1556.6105,-10556.7751 1564.239,-6475.4736 1564.9474,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="1568.4475,-6096.3576 1564.9663,-6086.3511 1561.4475,-6096.3445 1568.4475,-6096.3576"/>
</g>
<!-- raw_32 -->
<g id="node33" class="node">
<title>raw_32</title>
<ellipse fill="none" stroke="#000000" cx="1699" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="1699" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_27&#45;&gt;raw_32 -->
<g id="edge32" class="edge">
<title>prose_27&#45;&gt;raw_32</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1696.0115,-10865.0138C1696.2035,-10556.7751 1698.7463,-6475.4736 1698.9825,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="1702.4824,-6096.3533 1698.9888,-6086.3511 1695.4824,-6096.3488 1702.4824,-6096.3533"/>
</g>
<!-- raw_34 -->
<g id="node35" class="node">
<title>raw_34</title>
<ellipse fill="none" stroke="#000000" cx="1776" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="1776" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_28&#45;&gt;raw_34 -->
<g id="edge34" class="edge">
<title>prose_28&#45;&gt;raw_34</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1777.9924,-10865.0138C1777.8643,-10556.7751 1776.1691,-6475.4736 1776.0117,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="1779.5117,-6096.3496 1776.0075,-6086.3511 1772.5117,-6096.3525 1779.5117,-6096.3496"/>
</g>
<!-- raw_36 -->
<g id="node37" class="node">
<title>raw_36</title>
<ellipse fill="none" stroke="#000000" cx="1854" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="1854" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_29&#45;&gt;raw_36 -->
<g id="edge36" class="edge">
<title>prose_29&#45;&gt;raw_36</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1859.9771,-10865.0138C1859.593,-10556.7751 1854.5074,-6475.4736 1854.0351,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="1857.535,-6096.3466 1854.0225,-6086.3511 1850.535,-6096.3554 1857.535,-6096.3466"/>
</g>
<!-- raw_38 -->
<g id="node39" class="node">
<title>raw_38</title>
<ellipse fill="none" stroke="#000000" cx="1942" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="1942" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_30&#45;&gt;raw_38 -->
<g id="edge38" class="edge">
<title>prose_30&#45;&gt;raw_38</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1942,-10865.0138C1942,-10556.7751 1942,-6475.4736 1942,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="1945.5001,-6096.351 1942,-6086.3511 1938.5001,-6096.3511 1945.5001,-6096.351"/>
</g>
<!-- leaf_33 -->
<g id="node34" class="node">
<title>leaf_33</title>
<polygon fill="none" stroke="#c0c0c0" points="737.5,-1047.5032 378.5,-1047.5032 378.5,-991.7002 737.5,-991.7002 737.5,-1047.5032"/>
<text text-anchor="middle" x="558" y="-1000.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">A library for interfacing with SQLite3 databases.</text>
</g>
<!-- raw_32&#45;&gt;leaf_33 -->
<g id="edge33" class="edge">
<title>raw_32&#45;&gt;leaf_33</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1699.2115,-6049.991C1702.8335,-5732.6838 1750.6625,-1398.7073 1662,-1307.2021 1591.1991,-1234.1313 837.1096,-1318.4501 747,-1271.2021 657.8554,-1224.4601 599.1296,-1114.6776 573.2118,-1056.8059"/>
<polygon fill="#000000" stroke="#000000" points="576.4137,-1055.3924 569.1887,-1047.6432 570.0043,-1058.2066 576.4137,-1055.3924"/>
</g>
<!-- leaf_35 -->
<g id="node36" class="node">
<title>leaf_35</title>
<polygon fill="none" stroke="#c0c0c0" points="1220,-1039.5038 756,-1039.5038 756,-999.6996 1220,-999.6996 1220,-1039.5038"/>
<text text-anchor="middle" x="988" y="-1008.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">Copyright (C) 2011&#45;2016 Stefano Peluchetti. All rights reserved.</text>
</g>
<!-- raw_34&#45;&gt;leaf_35 -->
<g id="edge35" class="edge">
<title>raw_34&#45;&gt;leaf_35</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1776.1901,-6049.9964C1779.4417,-5732.7832 1822.2406,-1400.0651 1735,-1307.2021 1657.8148,-1225.0425 1331.0408,-1319.1127 1229,-1271.2021 1122.8972,-1221.3844 1039.331,-1102.8146 1004.9817,-1048.1289"/>
<polygon fill="#000000" stroke="#000000" points="1007.759,-1045.9656 999.5196,-1039.305 1001.8071,-1049.65 1007.759,-1045.9656"/>
</g>
<!-- leaf_37 -->
<g id="node38" class="node">
<title>leaf_37</title>
<polygon fill="none" stroke="#c0c0c0" points="1653.5,-1039.5038 1238.5,-1039.5038 1238.5,-999.6996 1653.5,-999.6996 1653.5,-1039.5038"/>
<text text-anchor="middle" x="1446" y="-1008.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">Features, documentation and more: http://www.scilua.org .</text>
</g>
<!-- raw_36&#45;&gt;leaf_37 -->
<g id="edge37" class="edge">
<title>raw_36&#45;&gt;leaf_37</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1854.4859,-6049.951C1862.7096,-5736.2967 1970.5715,-1506.5192 1812,-1307.2021 1769.316,-1253.5503 1720.5038,-1306.9477 1662,-1271.2021 1567.9236,-1213.7219 1493.7253,-1101.4464 1462.3091,-1048.5204"/>
<polygon fill="#000000" stroke="#000000" points="1465.1908,-1046.5151 1457.1179,-1039.6537 1459.15,-1050.0519 1465.1908,-1046.5151"/>
</g>
<!-- leaf_39 -->
<g id="node40" class="node">
<title>leaf_39</title>
<polygon fill="none" stroke="#c0c0c0" points="2212.5,-1054.902 1671.5,-1054.902 1671.5,-984.3013 2212.5,-984.3013 2212.5,-1054.902"/>
<text text-anchor="middle" x="1942" y="-1023.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">This file is part of the LJSQLite3 library, which is released under the MIT</text>
<text text-anchor="middle" x="1942" y="-1008.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">license: full text in file LICENSE.TXT in the library&#39;s root folder.</text>
</g>
<!-- raw_38&#45;&gt;leaf_39 -->
<g id="edge39" class="edge">
<title>raw_38&#45;&gt;leaf_39</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M1942,-6050.0293C1942,-5738.7223 1942,-1549.8838 1942,-1065.2269"/>
<polygon fill="#000000" stroke="#000000" points="1945.5001,-1065.1071 1942,-1055.1071 1938.5001,-1065.1072 1945.5001,-1065.1071"/>
</g>
<!-- leaf_45 -->
<g id="node46" class="node">
<title>leaf_45</title>
<polygon fill="none" stroke="#c0c0c0" points="2398.5,-6086.3106 2305.5,-6086.3106 2305.5,-6050.3106 2398.5,-6050.3106 2398.5,-6086.3106"/>
<text text-anchor="middle" x="2352" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">*** imports</text>
</g>
<!-- header_40&#45;&gt;leaf_45 -->
<g id="edge45" class="edge">
<title>header_40&#45;&gt;leaf_45</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2426.4927,-10866.0143C2419.5167,-10855.928 2411.7069,-10842.6401 2408,-10829.4191 1870.6762,-8912.9858 2294.549,-6389.8406 2346.8688,-6096.494"/>
<polygon fill="#000000" stroke="#000000" points="2350.3147,-6097.1065 2348.6357,-6086.6455 2343.4247,-6095.8703 2350.3147,-6097.1065"/>
</g>
<!-- raw_46 -->
<g id="node47" class="node">
<title>raw_46</title>
<ellipse fill="none" stroke="#000000" cx="2444" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="2444" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_41&#45;&gt;raw_46 -->
<g id="edge46" class="edge">
<title>prose_41&#45;&gt;raw_46</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2600.8112,-10876.9051C2560.9888,-10867.6326 2494.2653,-10849.5089 2480,-10829.4191 2406.9347,-10726.5213 2440.5298,-6484.9614 2443.7599,-6096.7021"/>
<polygon fill="#000000" stroke="#000000" points="2447.2607,-6096.6093 2443.8445,-6086.5804 2440.2609,-6096.5508 2447.2607,-6096.6093"/>
</g>
<!-- prespace_47 -->
<g id="node48" class="node">
<title>prespace_47</title>
<ellipse fill="none" stroke="#000000" cx="2535" cy="-6068.3106" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="2535" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_41&#45;&gt;prespace_47 -->
<g id="edge47" class="edge">
<title>prose_41&#45;&gt;prespace_47</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2614.9847,-10867.4985C2606.0773,-10857.4943 2595.838,-10843.7937 2591,-10829.4191 2430.2952,-10351.9321 2524.8806,-6466.2526 2534.2727,-6096.5334"/>
<polygon fill="#000000" stroke="#000000" points="2537.7748,-6096.4902 2534.5311,-6086.4042 2530.7771,-6096.3117 2537.7748,-6096.4902"/>
</g>
<!-- literal_48 -->
<g id="node49" class="node">
<title>literal_48</title>
<ellipse fill="none" stroke="#000000" cx="2631" cy="-6068.3106" rx="31.481" ry="18"/>
<text text-anchor="middle" x="2631" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_41&#45;&gt;literal_48 -->
<g id="edge48" class="edge">
<title>prose_41&#45;&gt;literal_48</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2631,-10865.0138C2631,-10556.7751 2631,-6475.4736 2631,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="2634.5001,-6096.351 2631,-6086.3511 2627.5001,-6096.3511 2634.5001,-6096.351"/>
</g>
<!-- raw_49 -->
<g id="node50" class="node">
<title>raw_49</title>
<ellipse fill="none" stroke="#000000" cx="2745" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="2745" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_41&#45;&gt;raw_49 -->
<g id="edge49" class="edge">
<title>prose_41&#45;&gt;raw_49</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2646.9956,-10867.4919C2655.8959,-10857.4852 2666.1349,-10843.7845 2671,-10829.4191 2993.1717,-9878.1317 2770.4224,-6443.3456 2746.9434,-6096.5948"/>
<polygon fill="#000000" stroke="#000000" points="2750.4205,-6096.1378 2746.2499,-6086.3984 2743.4366,-6096.6128 2750.4205,-6096.1378"/>
</g>
<!-- raw_54 -->
<g id="node55" class="node">
<title>raw_54</title>
<ellipse fill="none" stroke="#000000" cx="2975" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="2975" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_54 -->
<g id="edge54" class="edge">
<title>prose_42&#45;&gt;raw_54</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3713.7413,-10882.8643C3596.8294,-10880.5311 3200.1868,-10869.6832 3162,-10829.4191 2469.3621,-10099.1016 2924.5875,-6454.9274 2971.2532,-6096.6714"/>
<polygon fill="#000000" stroke="#000000" points="2974.7438,-6096.9711 2972.5703,-6086.6016 2967.8029,-6096.0632 2974.7438,-6096.9711"/>
</g>
<!-- prespace_55 -->
<g id="node56" class="node">
<title>prespace_55</title>
<ellipse fill="none" stroke="#000000" cx="3217" cy="-6068.3106" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="3217" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_42&#45;&gt;prespace_55 -->
<g id="edge55" class="edge">
<title>prose_42&#45;&gt;prespace_55</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3713.7916,-10881.4109C3623.4101,-10875.4548 3372.4018,-10856.5917 3348,-10829.4191 3011.0225,-10454.1774 3197.3504,-6470.0325 3215.608,-6096.3826"/>
<polygon fill="#000000" stroke="#000000" points="3219.104,-6096.5478 3216.0985,-6086.3882 3212.1124,-6096.2046 3219.104,-6096.5478"/>
</g>
<!-- literal_56 -->
<g id="node57" class="node">
<title>literal_56</title>
<ellipse fill="none" stroke="#000000" cx="3388" cy="-6068.3106" rx="31.481" ry="18"/>
<text text-anchor="middle" x="3388" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_42&#45;&gt;literal_56 -->
<g id="edge56" class="edge">
<title>prose_42&#45;&gt;literal_56</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3713.7422,-10882.1142C3647.0181,-10878.6724 3497.432,-10866.8633 3466,-10829.4191 3141.8982,-10443.3249 3364.5787,-6470.9629 3386.3366,-6096.5863"/>
<polygon fill="#000000" stroke="#000000" points="3389.8458,-6096.5282 3386.9342,-6086.3413 3382.8577,-6096.1205 3389.8458,-6096.5282"/>
</g>
<!-- raw_57 -->
<g id="node58" class="node">
<title>raw_57</title>
<ellipse fill="none" stroke="#000000" cx="3502" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="3502" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_57 -->
<g id="edge57" class="edge">
<title>prose_42&#45;&gt;raw_57</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3714.476,-10878.9908C3665.8396,-10871.4449 3576.1024,-10854.4418 3557,-10829.4191 3403.9161,-10628.8908 3492.804,-6480.2189 3501.3589,-6096.6678"/>
<polygon fill="#000000" stroke="#000000" points="3504.8582,-6096.7331 3501.5831,-6086.6572 3497.86,-6096.5763 3504.8582,-6096.7331"/>
</g>
<!-- prespace_58 -->
<g id="node59" class="node">
<title>prespace_58</title>
<ellipse fill="none" stroke="#000000" cx="3612" cy="-6068.3106" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="3612" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_42&#45;&gt;prespace_58 -->
<g id="edge58" class="edge">
<title>prose_42&#45;&gt;prespace_58</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3719.519,-10872.9328C3701.4539,-10864.2245 3678.8987,-10849.9258 3668,-10829.4191 3431.5603,-10384.5414 3594.6533,-6469.3645 3610.7554,-6096.7561"/>
<polygon fill="#000000" stroke="#000000" points="3614.2615,-6096.6898 3611.1982,-6086.5475 3607.2681,-6096.3865 3614.2615,-6096.6898"/>
</g>
<!-- literal_59 -->
<g id="node60" class="node">
<title>literal_59</title>
<ellipse fill="none" stroke="#000000" cx="3708" cy="-6068.3106" rx="31.481" ry="18"/>
<text text-anchor="middle" x="3708" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_42&#45;&gt;literal_59 -->
<g id="edge59" class="edge">
<title>prose_42&#45;&gt;literal_59</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3745.8547,-10865.0138C3743.4222,-10556.7751 3711.2133,-6475.4736 3708.2223,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="3711.7213,-6096.3231 3708.1424,-6086.3511 3704.7215,-6096.3784 3711.7213,-6096.3231"/>
</g>
<!-- raw_60 -->
<g id="node61" class="node">
<title>raw_60</title>
<ellipse fill="none" stroke="#000000" cx="3784" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="3784" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_60 -->
<g id="edge60" class="edge">
<title>prose_42&#45;&gt;raw_60</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3746.7993,-10865.423C3747.2324,-10854.9243 3747.7324,-10841.4243 3748,-10829.4191 3792.3157,-8841.6627 3785.1363,-6386.069 3784.107,-6096.5846"/>
<polygon fill="#000000" stroke="#000000" points="3787.6067,-6096.4848 3784.0704,-6086.4976 3780.6068,-6096.5103 3787.6067,-6096.4848"/>
</g>
<!-- prespace_61 -->
<g id="node62" class="node">
<title>prespace_61</title>
<ellipse fill="none" stroke="#000000" cx="3875" cy="-6068.3106" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="3875" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_42&#45;&gt;prespace_61 -->
<g id="edge61" class="edge">
<title>prose_42&#45;&gt;prespace_61</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3771.5279,-10872.3954C3788.6228,-10863.5045 3809.7977,-10849.21 3820,-10829.4191 3935.5681,-10605.234 3880.7534,-6480.0586 3875.4042,-6096.7983"/>
<polygon fill="#000000" stroke="#000000" points="3878.9005,-6096.5082 3875.2606,-6086.5583 3871.9012,-6096.6064 3878.9005,-6096.5082"/>
</g>
<!-- literal_62 -->
<g id="node63" class="node">
<title>literal_62</title>
<ellipse fill="none" stroke="#000000" cx="3971" cy="-6068.3106" rx="31.481" ry="18"/>
<text text-anchor="middle" x="3971" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_42&#45;&gt;literal_62 -->
<g id="edge62" class="edge">
<title>prose_42&#45;&gt;literal_62</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3777.4838,-10878.7434C3825.0327,-10870.9688 3911.5882,-10853.7914 3930,-10829.4191 4006.0708,-10728.7215 3974.298,-6485.1629 3971.2285,-6096.7159"/>
<polygon fill="#000000" stroke="#000000" points="3974.7275,-6096.5612 3971.1481,-6086.5893 3967.7277,-6096.6169 3974.7275,-6096.5612"/>
</g>
<!-- raw_63 -->
<g id="node64" class="node">
<title>raw_63</title>
<ellipse fill="none" stroke="#000000" cx="4047" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="4047" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_63 -->
<g id="edge63" class="edge">
<title>prose_42&#45;&gt;raw_63</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3778.5189,-10881.7341C3842.6673,-10877.6606 3981.8327,-10864.855 4011,-10829.4191 4091.2014,-10731.9807 4051.1238,-6485.4614 4047.285,-6096.7364"/>
<polygon fill="#000000" stroke="#000000" points="4050.7836,-6096.5673 4047.1845,-6086.6026 4043.7839,-6096.6368 4050.7836,-6096.5673"/>
</g>
<!-- prespace_64 -->
<g id="node65" class="node">
<title>prespace_64</title>
<ellipse fill="none" stroke="#000000" cx="4138" cy="-6068.3106" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="4138" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_42&#45;&gt;prespace_64 -->
<g id="edge64" class="edge">
<title>prose_42&#45;&gt;prespace_64</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3777.8468,-10880.6351C3857.9988,-10873.3101 4063.1174,-10852.4703 4083,-10829.4191 4247.7769,-10638.3827 4148.2782,-6481.0974 4138.7162,-6096.7288"/>
<polygon fill="#000000" stroke="#000000" points="4142.2143,-6096.6063 4138.4657,-6086.6968 4135.2165,-6096.7811 4142.2143,-6096.6063"/>
</g>
<!-- literal_65 -->
<g id="node66" class="node">
<title>literal_65</title>
<ellipse fill="none" stroke="#000000" cx="4234" cy="-6068.3106" rx="31.481" ry="18"/>
<text text-anchor="middle" x="4234" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_42&#45;&gt;literal_65 -->
<g id="edge65" class="edge">
<title>prose_42&#45;&gt;literal_65</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3778.2809,-10881.9359C3876.278,-10877.1074 4165.3521,-10860.3388 4193,-10829.4191 4277.1215,-10735.3428 4238.0354,-6485.7693 4234.2792,-6096.7576"/>
<polygon fill="#000000" stroke="#000000" points="4237.7777,-6096.5818 4234.1808,-6086.6162 4230.778,-6096.6497 4237.7777,-6096.5818"/>
</g>
<!-- raw_66 -->
<g id="node67" class="node">
<title>raw_66</title>
<ellipse fill="none" stroke="#000000" cx="4310" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="4310" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_42&#45;&gt;raw_66 -->
<g id="edge66" class="edge">
<title>prose_42&#45;&gt;raw_66</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3778.2445,-10881.3024C3890.3426,-10873.7923 4257.1989,-10847.8852 4274,-10829.4191 4358.9292,-10736.0728 4314.5568,-6485.8362 4310.3147,-6096.7622"/>
<polygon fill="#000000" stroke="#000000" points="4313.8131,-6096.5802 4310.2037,-6086.6192 4306.8135,-6096.657 4313.8131,-6096.5802"/>
</g>
<!-- leaf_80 -->
<g id="node81" class="node">
<title>leaf_80</title>
<polygon fill="none" stroke="#c0c0c0" points="4574.5,-6102.9119 4355.5,-6102.9119 4355.5,-6033.7093 4574.5,-6033.7093 4574.5,-6102.9119"/>
<text text-anchor="middle" x="4465" y="-6087.9107" font-family="Inconsolata" font-size="14.00" fill="#000000">local sqlayer = {}</text>
<text text-anchor="middle" x="4465" y="-6072.5106" font-family="Inconsolata" font-size="14.00" fill="#000000">do</text>
<text text-anchor="middle" x="4465" y="-6057.1106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local ffi &#160;= require &quot;ffi&quot;</text>
<text text-anchor="middle" x="4465" y="-6041.7106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local bit &#160;= require &quot;bit&quot;</text>
</g>
<!-- codeblock_43&#45;&gt;leaf_80 -->
<g id="edge80" class="edge">
<title>codeblock_43&#45;&gt;leaf_80</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4216.534,-10873.771C4266.6927,-10864.9069 4329.9233,-10850.0137 4346,-10829.4191 4956.3565,-10047.5393 4527.1716,-6549.2355 4470.8702,-6113.0157"/>
<polygon fill="#000000" stroke="#000000" points="4474.328,-6112.4636 4469.5729,-6102.9958 4467.3859,-6113.3625 4474.328,-6112.4636"/>
</g>
<!-- header_81 -->
<g id="node82" class="node">
<title>header_81</title>
<ellipse fill="none" stroke="#000000" cx="4809" cy="-6068.3106" rx="84.6634" ry="18"/>
<text text-anchor="middle" x="4809" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : helper functions</text>
</g>
<!-- section_44&#45;&gt;header_81 -->
<g id="edge81" class="edge">
<title>section_44&#45;&gt;header_81</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4875.7439,-10865.0138C4871.4549,-10556.7751 4814.6655,-6475.4736 4809.3919,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="4812.8899,-6096.3014 4809.251,-6086.3511 4805.8906,-6096.3988 4812.8899,-6096.3014"/>
</g>
<!-- prose_82 -->
<g id="node83" class="node">
<title>prose_82</title>
<ellipse fill="none" stroke="#000000" cx="4944" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="4944" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_44&#45;&gt;prose_82 -->
<g id="edge82" class="edge">
<title>section_44&#45;&gt;prose_82</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4887.7074,-10865.2328C4893.5297,-10855.1199 4899.9594,-10842.0556 4903,-10829.4191 5137.8223,-9853.5064 4964.0008,-6444.2638 4945.5423,-6096.9282"/>
<polygon fill="#000000" stroke="#000000" points="4949.0247,-6096.5026 4944.9967,-6086.7034 4942.0347,-6096.8757 4949.0247,-6096.5026"/>
</g>
<!-- codeblock_83 -->
<g id="node84" class="node">
<title>codeblock_83</title>
<ellipse fill="none" stroke="#000000" cx="5117" cy="-6068.3106" rx="77.4211" ry="18"/>
<text text-anchor="middle" x="5117" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 42&#45;75</text>
</g>
<!-- section_44&#45;&gt;codeblock_83 -->
<g id="edge83" class="edge">
<title>section_44&#45;&gt;codeblock_83</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4925.4462,-10871.4572C4947.5648,-10863.4105 4971.6246,-10850.32 4985,-10829.4191 6061.4489,-9147.3127 5224.3283,-6401.5829 5126.1236,-6096.1722"/>
<polygon fill="#000000" stroke="#000000" points="5129.3525,-6094.7817 5122.9463,-6086.343 5122.6919,-6096.9348 5129.3525,-6094.7817"/>
</g>
<!-- leaf_50 -->
<g id="node51" class="node">
<title>leaf_50</title>
<polygon fill="none" stroke="#c0c0c0" points="2471,-1047.5032 2231,-1047.5032 2231,-991.7002 2471,-991.7002 2471,-1047.5032"/>
<text text-anchor="middle" x="2351" y="-1000.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">We&#39;ll wrap this whole thing in a</text>
</g>
<!-- raw_46&#45;&gt;leaf_50 -->
<g id="edge50" class="edge">
<title>raw_46&#45;&gt;leaf_50</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2444.3298,-6050.0343C2449.3399,-5768.5781 2508.337,-2316.7883 2407,-1307.2021 2397.9079,-1216.6203 2374.1598,-1112.1312 2360.6907,-1057.4487"/>
<polygon fill="#000000" stroke="#000000" points="2364.0302,-1056.3741 2358.2213,-1047.5137 2357.2369,-1058.0627 2364.0302,-1056.3741"/>
</g>
<!-- leaf_51 -->
<g id="node52" class="node">
<title>leaf_51</title>
<polygon fill="none" stroke="#c0c0c0" points="2543,-1037.6017 2489,-1037.6017 2489,-1001.6017 2543,-1001.6017 2543,-1037.6017"/>
<text text-anchor="middle" x="2516" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_47&#45;&gt;leaf_51 -->
<g id="edge51" class="edge">
<title>prespace_47&#45;&gt;leaf_51</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2534.9312,-6050.0293C2533.7445,-5734.6966 2517.5855,-1440.8976 2516.108,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="2519.6072,-1048.0524 2516.0695,-1038.0657 2512.6072,-1048.0788 2519.6072,-1048.0524"/>
</g>
<!-- leaf_52 -->
<g id="node53" class="node">
<title>leaf_52</title>
<polygon fill="none" stroke="#c0c0c0" points="2615,-1037.6017 2561,-1037.6017 2561,-1001.6017 2615,-1001.6017 2615,-1037.6017"/>
<text text-anchor="middle" x="2588" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">do</text>
</g>
<!-- literal_48&#45;&gt;leaf_52 -->
<g id="edge52" class="edge">
<title>literal_48&#45;&gt;leaf_52</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2630.8443,-6050.0293C2628.1586,-5734.6966 2591.5882,-1440.8976 2588.2444,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="2591.7424,-1048.0355 2588.1573,-1038.0657 2584.7426,-1048.0952 2591.7424,-1048.0355"/>
</g>
<!-- leaf_53 -->
<g id="node54" class="node">
<title>leaf_53</title>
<polygon fill="none" stroke="#c0c0c0" points="2894.5,-1037.6017 2633.5,-1037.6017 2633.5,-1001.6017 2894.5,-1001.6017 2894.5,-1037.6017"/>
<text text-anchor="middle" x="2764" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> block so local upvalues disappear.</text>
</g>
<!-- raw_49&#45;&gt;leaf_53 -->
<g id="edge53" class="edge">
<title>raw_49&#45;&gt;leaf_53</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2745.0688,-6050.0293C2746.2555,-5734.6966 2762.4145,-1440.8976 2763.892,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="2767.3928,-1048.0788 2763.9305,-1038.0657 2760.3928,-1048.0524 2767.3928,-1048.0788"/>
</g>
<!-- leaf_67 -->
<g id="node68" class="node">
<title>leaf_67</title>
<polygon fill="none" stroke="#c0c0c0" points="2999,-1039.5038 2913,-1039.5038 2913,-999.6996 2999,-999.6996 2999,-1039.5038"/>
<text text-anchor="middle" x="2956" y="-1008.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">Instead of</text>
</g>
<!-- raw_54&#45;&gt;leaf_67 -->
<g id="edge67" class="edge">
<title>raw_54&#45;&gt;leaf_67</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M2974.9312,-6050.0293C2973.746,-5735.0985 2957.6266,-1451.8353 2956.1137,-1049.8193"/>
<polygon fill="#000000" stroke="#000000" points="2959.6128,-1049.5398 2956.0751,-1039.5531 2952.6128,-1049.5662 2959.6128,-1049.5398"/>
</g>
<!-- leaf_68 -->
<g id="node69" class="node">
<title>leaf_68</title>
<polygon fill="none" stroke="#c0c0c0" points="3071,-1037.6017 3017,-1037.6017 3017,-1001.6017 3071,-1001.6017 3071,-1037.6017"/>
<text text-anchor="middle" x="3044" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_55&#45;&gt;leaf_68 -->
<g id="edge68" class="edge">
<title>prespace_55&#45;&gt;leaf_68</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3216.3736,-6050.0293C3205.5683,-5734.6966 3058.4362,-1440.8976 3044.9834,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="3048.4732,-1047.9399 3044.6327,-1038.0657 3041.4773,-1048.1797 3048.4732,-1047.9399"/>
</g>
<!-- leaf_69 -->
<g id="node70" class="node">
<title>leaf_69</title>
<polygon fill="none" stroke="#c0c0c0" points="3147,-1037.6017 3089,-1037.6017 3089,-1001.6017 3147,-1001.6017 3147,-1037.6017"/>
<text text-anchor="middle" x="3118" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">return</text>
</g>
<!-- literal_56&#45;&gt;leaf_69 -->
<g id="edge69" class="edge">
<title>literal_56&#45;&gt;leaf_69</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3388.8435,-6049.8853C3402.7079,-5743.488 3578.8798,-1713.307 3272,-1307.2021 3239.4553,-1264.1345 3191.1822,-1312.1434 3156,-1271.2021 3101.031,-1207.2351 3106.9165,-1098.7414 3113.4614,-1047.7131"/>
<polygon fill="#000000" stroke="#000000" points="3116.9384,-1048.1193 3114.8463,-1037.7331 3110.0049,-1047.1571 3116.9384,-1048.1193"/>
</g>
<!-- leaf_70 -->
<g id="node71" class="node">
<title>leaf_70</title>
<polygon fill="none" stroke="#c0c0c0" points="3566.5,-1037.6017 3165.5,-1037.6017 3165.5,-1001.6017 3566.5,-1001.6017 3566.5,-1037.6017"/>
<text text-anchor="middle" x="3366" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">ing a module, we&#39;ll bind everything to a local variable</text>
</g>
<!-- raw_57&#45;&gt;leaf_70 -->
<g id="edge70" class="edge">
<title>raw_57&#45;&gt;leaf_70</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3502.219,-6050.0271C3505.5177,-5768.462 3543.3651,-2315.3741 3428,-1307.2021 3416.9446,-1210.589 3388.0424,-1098.6125 3373.9526,-1047.5575"/>
<polygon fill="#000000" stroke="#000000" points="3377.317,-1046.5921 3371.2621,-1037.8979 3370.5737,-1048.4703 3377.317,-1046.5921"/>
</g>
<!-- leaf_71 -->
<g id="node72" class="node">
<title>leaf_71</title>
<polygon fill="none" stroke="#c0c0c0" points="3639,-1037.6017 3585,-1037.6017 3585,-1001.6017 3639,-1001.6017 3639,-1037.6017"/>
</g>
<!-- prespace_58&#45;&gt;leaf_71 -->
<g id="edge71" class="edge">
<title>prespace_58&#45;&gt;leaf_71</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3612,-6050.0293C3612,-5734.6966 3612,-1440.8976 3612,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="3615.5001,-1048.0656 3612,-1038.0657 3608.5001,-1048.0657 3615.5001,-1048.0656"/>
</g>
<!-- leaf_72 -->
<g id="node73" class="node">
<title>leaf_72</title>
<polygon fill="none" stroke="#c0c0c0" points="3722.5,-1037.6017 3657.5,-1037.6017 3657.5,-1001.6017 3722.5,-1001.6017 3722.5,-1037.6017"/>
<text text-anchor="middle" x="3690" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlayer</text>
</g>
<!-- literal_59&#45;&gt;leaf_72 -->
<g id="edge72" class="edge">
<title>literal_59&#45;&gt;leaf_72</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3707.9348,-6050.0293C3706.8106,-5734.6966 3691.502,-1440.8976 3690.1023,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="3693.6016,-1048.0531 3690.0658,-1038.0657 3686.6016,-1048.0781 3693.6016,-1048.0531"/>
</g>
<!-- leaf_73 -->
<g id="node74" class="node">
<title>leaf_73</title>
<polygon fill="none" stroke="#c0c0c0" points="4233,-1037.6017 3741,-1037.6017 3741,-1001.6017 4233,-1001.6017 4233,-1037.6017"/>
<text text-anchor="middle" x="3987" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;Once everything is constructed, we will assign it the global name</text>
</g>
<!-- raw_60&#45;&gt;leaf_73 -->
<g id="edge73" class="edge">
<title>raw_60&#45;&gt;leaf_73</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3783.8676,-6050.1426C3781.6381,-5739.738 3752.8446,-1552.887 3820,-1307.2021 3848.938,-1201.3336 3926.9764,-1094.1181 3965.2435,-1045.9262"/>
<polygon fill="#000000" stroke="#000000" points="3968.1578,-1047.8868 3971.687,-1037.8971 3962.6984,-1043.5056 3968.1578,-1047.8868"/>
</g>
<!-- leaf_74 -->
<g id="node75" class="node">
<title>leaf_74</title>
<polygon fill="none" stroke="#c0c0c0" points="4305,-1037.6017 4251,-1037.6017 4251,-1001.6017 4305,-1001.6017 4305,-1037.6017"/>
</g>
<!-- prespace_61&#45;&gt;leaf_74 -->
<g id="edge74" class="edge">
<title>prespace_61&#45;&gt;leaf_74</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3874.521,-6049.9091C3866.4211,-5735.5443 3760.4499,-1496.3815 3931,-1307.2021 4024.1703,-1203.8548 4142.2962,-1368.2616 4242,-1271.2021 4302.787,-1212.0273 4292.5762,-1099.8313 4283.7222,-1047.6257"/>
<polygon fill="#000000" stroke="#000000" points="4287.1562,-1046.9461 4281.9352,-1037.727 4280.2675,-1048.1898 4287.1562,-1046.9461"/>
</g>
<!-- leaf_75 -->
<g id="node76" class="node">
<title>leaf_75</title>
<polygon fill="none" stroke="#c0c0c0" points="4377,-1037.6017 4323,-1037.6017 4323,-1001.6017 4377,-1001.6017 4377,-1037.6017"/>
<text text-anchor="middle" x="4350" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">sql</text>
</g>
<!-- literal_62&#45;&gt;leaf_75 -->
<g id="edge75" class="edge">
<title>literal_62&#45;&gt;leaf_75</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M3970.815,-6050.0047C3967.6495,-5732.9329 3925.9867,-1402.108 4011,-1307.2021 4101.4842,-1206.1887 4216.9693,-1365.9447 4314,-1271.2021 4374.6977,-1211.9358 4364.5318,-1099.7857 4355.7056,-1047.6087"/>
<polygon fill="#000000" stroke="#000000" points="4359.141,-1046.937 4353.9241,-1037.7156 4352.2518,-1048.1776 4359.141,-1046.937"/>
</g>
<!-- leaf_76 -->
<g id="node77" class="node">
<title>leaf_76</title>
<polygon fill="none" stroke="#c0c0c0" points="4467,-1037.6017 4395,-1037.6017 4395,-1001.6017 4467,-1001.6017 4467,-1037.6017"/>
<text text-anchor="middle" x="4431" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> and set</text>
</g>
<!-- raw_63&#45;&gt;leaf_76 -->
<g id="edge76" class="edge">
<title>raw_63&#45;&gt;leaf_76</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4046.7994,-6050.0048C4043.3648,-5732.9354 3998.0271,-1402.1431 4083,-1307.2021 4173.4418,-1206.1507 4287.3326,-1364.2389 4386,-1271.2021 4448.0689,-1212.6753 4442.2906,-1100.154 4435.5645,-1047.7463"/>
<polygon fill="#000000" stroke="#000000" points="4439.0265,-1047.2306 4434.1827,-1037.8079 4432.0932,-1048.1946 4439.0265,-1047.2306"/>
</g>
<!-- leaf_77 -->
<g id="node78" class="node">
<title>leaf_77</title>
<polygon fill="none" stroke="#c0c0c0" points="4539,-1037.6017 4485,-1037.6017 4485,-1001.6017 4539,-1001.6017 4539,-1037.6017"/>
<text text-anchor="middle" x="4512" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_64&#45;&gt;leaf_77 -->
<g id="edge77" class="edge">
<title>prespace_64&#45;&gt;leaf_77</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4137.5256,-6049.9132C4129.5037,-5735.6183 4024.5624,-1497.3785 4194,-1307.2021 4278.0513,-1212.8632 4385.9827,-1359.8662 4476,-1271.2021 4536.4389,-1211.6718 4526.4029,-1099.6543 4517.6575,-1047.5596"/>
<polygon fill="#000000" stroke="#000000" points="4521.097,-1046.9107 4515.8918,-1037.6827 4514.2063,-1048.1425 4521.097,-1046.9107"/>
</g>
<!-- leaf_78 -->
<g id="node79" class="node">
<title>leaf_78</title>
<polygon fill="none" stroke="#c0c0c0" points="4622.5,-1037.6017 4557.5,-1037.6017 4557.5,-1001.6017 4622.5,-1001.6017 4622.5,-1037.6017"/>
<text text-anchor="middle" x="4590" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlayer</text>
</g>
<!-- literal_65&#45;&gt;leaf_78 -->
<g id="edge78" class="edge">
<title>literal_65&#45;&gt;leaf_78</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4233.8173,-6050.0068C4230.6926,-5732.9713 4189.5758,-1402.6325 4274,-1307.2021 4355.3829,-1215.2095 4459.6535,-1356.5292 4548,-1271.2021 4609.2406,-1212.0545 4602.1861,-1099.8449 4594.8758,-1047.6308"/>
<polygon fill="#000000" stroke="#000000" points="4598.335,-1047.097 4593.3835,-1037.7304 4591.4132,-1048.1404 4598.335,-1047.097"/>
</g>
<!-- leaf_79 -->
<g id="node80" class="node">
<title>leaf_79</title>
<polygon fill="none" stroke="#c0c0c0" points="4713,-1037.6017 4641,-1037.6017 4641,-1001.6017 4713,-1001.6017 4713,-1037.6017"/>
<text text-anchor="middle" x="4677" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> to nil.</text>
</g>
<!-- raw_66&#45;&gt;leaf_79 -->
<g id="edge79" class="edge">
<title>raw_66&#45;&gt;leaf_79</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4309.8008,-6050.0061C4306.3906,-5732.9584 4261.3786,-1402.4565 4346,-1307.2021 4430.7939,-1211.7535 4538.2652,-1358.9558 4631,-1271.2021 4693.0082,-1212.5246 4687.8244,-1100.079 4681.3981,-1047.7182"/>
<polygon fill="#000000" stroke="#000000" points="4684.8652,-1047.2385 4680.0738,-1037.7891 4677.9266,-1048.164 4684.8652,-1047.2385"/>
</g>
<!-- leaf_84 -->
<g id="node85" class="node">
<title>leaf_84</title>
<polygon fill="none" stroke="#c0c0c0" points="4894.5,-1037.6017 4731.5,-1037.6017 4731.5,-1001.6017 4894.5,-1001.6017 4894.5,-1037.6017"/>
<text text-anchor="middle" x="4813" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">**** helper functions</text>
</g>
<!-- header_81&#45;&gt;leaf_84 -->
<g id="edge84" class="edge">
<title>header_81&#45;&gt;leaf_84</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4809.0145,-6050.0293C4809.2643,-5734.6966 4812.6662,-1440.8976 4812.9773,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="4816.4773,-1048.0685 4812.9854,-1038.0657 4809.4774,-1048.0629 4816.4773,-1048.0685"/>
</g>
<!-- raw_85 -->
<g id="node86" class="node">
<title>raw_85</title>
<ellipse fill="none" stroke="#000000" cx="4940" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="4940" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_82&#45;&gt;raw_85 -->
<g id="edge85" class="edge">
<title>prose_82&#45;&gt;raw_85</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4943.9855,-6050.0293C4943.7357,-5734.6966 4940.3338,-1440.8976 4940.0227,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="4943.5226,-1048.0629 4940.0146,-1038.0657 4936.5227,-1048.0685 4943.5226,-1048.0629"/>
</g>
<!-- leaf_87 -->
<g id="node88" class="node">
<title>leaf_87</title>
<polygon fill="none" stroke="#c0c0c0" points="5337,-1271.3026 4985,-1271.3026 4985,-767.9008 5337,-767.9008 5337,-1271.3026"/>
<text text-anchor="middle" x="5161" y="-1256.0021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local insert = table.insert</text>
<text text-anchor="middle" x="5161" y="-1224.6021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; CREDIT: Steve Dovan snippet.</text>
<text text-anchor="middle" x="5161" y="-1209.2021" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function split(s, re)</text>
<text text-anchor="middle" x="5161" y="-1193.802" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local i1, ls = 1, { }</text>
<text text-anchor="middle" x="5161" y="-1178.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if not re then re = &#39;%s+&#39; end</text>
<text text-anchor="middle" x="5161" y="-1163.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if re == &#39;&#39; then return { s } end</text>
<text text-anchor="middle" x="5161" y="-1147.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;while true do</text>
<text text-anchor="middle" x="5161" y="-1132.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local i2, i3 = s:find(re, i1)</text>
<text text-anchor="middle" x="5161" y="-1116.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if not i2 then</text>
<text text-anchor="middle" x="5161" y="-1101.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local last = s:sub(i1)</text>
<text text-anchor="middle" x="5161" y="-1086.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if last ~= &#39;&#39; then insert(ls, last) end</text>
<text text-anchor="middle" x="5161" y="-1070.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if #ls == 1 and ls[1] == &#39;&#39; then</text>
<text text-anchor="middle" x="5161" y="-1055.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return &#160;{ }</text>
<text text-anchor="middle" x="5161" y="-1039.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="5161" y="-1024.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return ls</text>
<text text-anchor="middle" x="5161" y="-1009.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5161" y="-993.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5161" y="-978.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;insert(ls, s:sub(i1, i2 &#45; 1))</text>
<text text-anchor="middle" x="5161" y="-962.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;i1 = i3 + 1</text>
<text text-anchor="middle" x="5161" y="-947.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="5161" y="-932.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5161" y="-900.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function trim(s)</text>
<text text-anchor="middle" x="5161" y="-885.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return (s:gsub(&quot;^%s*(.&#45;)%s*$&quot;, &quot;%1&quot;))</text>
<text text-anchor="middle" x="5161" y="-869.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="5161" y="-838.4014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function err(code, msg)</text>
<text text-anchor="middle" x="5161" y="-823.0013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;io.write(debug.traceback())</text>
<text text-anchor="middle" x="5161" y="-807.6013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;error(&quot;ljsqlite3[&quot;..code..&quot;] &quot;..msg)</text>
<text text-anchor="middle" x="5161" y="-776.2013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
</g>
<!-- codeblock_83&#45;&gt;leaf_87 -->
<g id="edge87" class="edge">
<title>codeblock_83&#45;&gt;leaf_87</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5117.1593,-6050.0293C5119.6273,-5766.8449 5150.0586,-2275.0559 5158.716,-1281.6725"/>
<polygon fill="#000000" stroke="#000000" points="5162.217,-1281.57 5158.8043,-1271.5399 5155.2172,-1281.509 5162.217,-1281.57"/>
</g>
<!-- leaf_86 -->
<g id="node87" class="node">
<title>leaf_86</title>
<polygon fill="none" stroke="#c0c0c0" points="4967,-429.7006 4913,-429.7006 4913,-393.7006 4967,-393.7006 4967,-429.7006"/>
</g>
<!-- raw_85&#45;&gt;leaf_86 -->
<g id="edge86" class="edge">
<title>raw_85&#45;&gt;leaf_86</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M4940,-1001.4084C4940,-914.9756 4940,-545.6488 4940,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="4943.5001,-439.8229 4940,-429.823 4936.5001,-439.823 4943.5001,-439.8229"/>
</g>
<!-- leaf_93 -->
<g id="node94" class="node">
<title>leaf_93</title>
<polygon fill="none" stroke="#c0c0c0" points="5814,-6086.3106 5700,-6086.3106 5700,-6050.3106 5814,-6050.3106 5814,-6086.3106"/>
<text text-anchor="middle" x="5757" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">*** SQLite FFI</text>
</g>
<!-- header_88&#45;&gt;leaf_93 -->
<g id="edge93" class="edge">
<title>header_88&#45;&gt;leaf_93</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5835.1286,-10865.4105C5830.5483,-10855.1354 5825.4232,-10841.8596 5823,-10829.4191 5442.6418,-8876.7136 5719.078,-6387.8731 5753.5834,-6096.5295"/>
<polygon fill="#000000" stroke="#000000" points="5757.0841,-6096.7306 5754.7925,-6086.3866 5750.1333,-6095.9019 5757.0841,-6096.7306"/>
</g>
<!-- raw_94 -->
<g id="node95" class="node">
<title>raw_94</title>
<ellipse fill="none" stroke="#000000" cx="5859" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="5859" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_89&#45;&gt;raw_94 -->
<g id="edge94" class="edge">
<title>prose_89&#45;&gt;raw_94</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6015.8112,-10876.9051C5975.9888,-10867.6326 5909.2653,-10849.5089 5895,-10829.4191 5821.9347,-10726.5213 5855.5298,-6484.9614 5858.7599,-6096.7021"/>
<polygon fill="#000000" stroke="#000000" points="5862.2607,-6096.6093 5858.8445,-6086.5804 5855.2609,-6096.5508 5862.2607,-6096.6093"/>
</g>
<!-- prespace_95 -->
<g id="node96" class="node">
<title>prespace_95</title>
<ellipse fill="none" stroke="#000000" cx="5950" cy="-6068.3106" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="5950" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_89&#45;&gt;prespace_95 -->
<g id="edge95" class="edge">
<title>prose_89&#45;&gt;prespace_95</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6029.9847,-10867.4985C6021.0773,-10857.4943 6010.838,-10843.7937 6006,-10829.4191 5845.2952,-10351.9321 5939.8806,-6466.2526 5949.2727,-6096.5334"/>
<polygon fill="#000000" stroke="#000000" points="5952.7748,-6096.4902 5949.5311,-6086.4042 5945.7771,-6096.3117 5952.7748,-6096.4902"/>
</g>
<!-- literal_96 -->
<g id="node97" class="node">
<title>literal_96</title>
<ellipse fill="none" stroke="#000000" cx="6046" cy="-6068.3106" rx="31.481" ry="18"/>
<text text-anchor="middle" x="6046" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_89&#45;&gt;literal_96 -->
<g id="edge96" class="edge">
<title>prose_89&#45;&gt;literal_96</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6046,-10865.0138C6046,-10556.7751 6046,-6475.4736 6046,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="6049.5001,-6096.351 6046,-6086.3511 6042.5001,-6096.3511 6049.5001,-6096.351"/>
</g>
<!-- raw_97 -->
<g id="node98" class="node">
<title>raw_97</title>
<ellipse fill="none" stroke="#000000" cx="6122" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="6122" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_89&#45;&gt;raw_97 -->
<g id="edge97" class="edge">
<title>prose_89&#45;&gt;raw_97</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6062.0373,-10867.5059C6070.9524,-10857.5042 6081.1922,-10843.8038 6086,-10829.4191 6165.9484,-10590.2155 6126.1662,-6478.6615 6122.2925,-6096.7008"/>
<polygon fill="#000000" stroke="#000000" points="6125.7903,-6096.4594 6122.1885,-6086.4957 6118.7907,-6096.5308 6125.7903,-6096.4594"/>
</g>
<!-- raw_102 -->
<g id="node103" class="node">
<title>raw_102</title>
<ellipse fill="none" stroke="#000000" cx="6194" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="6194" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_90&#45;&gt;raw_102 -->
<g id="edge102" class="edge">
<title>prose_90&#45;&gt;raw_102</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6161.1261,-10865.0138C6163.2386,-10556.7751 6191.2095,-6475.4736 6193.807,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="6197.3076,-6096.3748 6193.8764,-6086.3511 6190.3078,-6096.3268 6197.3076,-6096.3748"/>
</g>
<!-- leaf_104 -->
<g id="node105" class="node">
<title>leaf_104</title>
<polygon fill="none" stroke="#c0c0c0" points="6857,-10829.5275 6239,-10829.5275 6239,-1307.0936 6857,-1307.0936 6857,-10829.5275"/>
<text text-anchor="middle" x="6548" y="-10814.2191" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Codes &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-10798.819" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local sqlconstants = {} &#45;&#45; SQLITE_* and OPEN_* declarations.</text>
<text text-anchor="middle" x="6548" y="-10783.419" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local codes = {</text>
<text text-anchor="middle" x="6548" y="-10768.019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;[0] = &quot;OK&quot;, &quot;ERROR&quot;, &quot;INTERNAL&quot;, &quot;PERM&quot;, &quot;ABORT&quot;, &quot;BUSY&quot;, &quot;LOCKED&quot;, &quot;NOMEM&quot;,</text>
<text text-anchor="middle" x="6548" y="-10752.6189" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&quot;READONLY&quot;, &quot;INTERRUPT&quot;, &quot;IOERR&quot;, &quot;CORRUPT&quot;, &quot;NOTFOUND&quot;, &quot;FULL&quot;, &quot;CANTOPEN&quot;,</text>
<text text-anchor="middle" x="6548" y="-10737.2189" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&quot;PROTOCOL&quot;, &quot;EMPTY&quot;, &quot;SCHEMA&quot;, &quot;TOOBIG&quot;, &quot;CONSTRAINT&quot;, &quot;MISMATCH&quot;, &quot;MISUSE&quot;,</text>
<text text-anchor="middle" x="6548" y="-10721.8189" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&quot;NOLFS&quot;, &quot;AUTH&quot;, &quot;FORMAT&quot;, &quot;RANGE&quot;, &quot;NOTADB&quot;, [100] = &quot;ROW&quot;, [101] = &quot;DONE&quot;</text>
<text text-anchor="middle" x="6548" y="-10706.4189" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;} &#45;&#45; From 0 to 26.</text>
<text text-anchor="middle" x="6548" y="-10675.0188" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;do</text>
<text text-anchor="middle" x="6548" y="-10659.6188" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local types = { &quot;INTEGER&quot;, &quot;FLOAT&quot;, &quot;TEXT&quot;, &quot;BLOB&quot;, &quot;NULL&quot; } &#45;&#45; From 1 to 5.</text>
<text text-anchor="middle" x="6548" y="-10628.2188" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local opens = {</text>
<text text-anchor="middle" x="6548" y="-10612.8187" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;READONLY = &#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00000001;</text>
<text text-anchor="middle" x="6548" y="-10597.4187" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;READWRITE = &#160;&#160;&#160;&#160;&#160;&#160;0x00000002;</text>
<text text-anchor="middle" x="6548" y="-10582.0187" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;CREATE = &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00000004;</text>
<text text-anchor="middle" x="6548" y="-10566.6186" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;DELETEONCLOSE = &#160;&#160;0x00000008;</text>
<text text-anchor="middle" x="6548" y="-10551.2186" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;EXCLUSIVE = &#160;&#160;&#160;&#160;&#160;&#160;0x00000010;</text>
<text text-anchor="middle" x="6548" y="-10535.8186" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;AUTOPROXY = &#160;&#160;&#160;&#160;&#160;&#160;0x00000020;</text>
<text text-anchor="middle" x="6548" y="-10520.4185" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;URI = &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00000040;</text>
<text text-anchor="middle" x="6548" y="-10505.0185" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;MAIN_DB = &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00000100;</text>
<text text-anchor="middle" x="6548" y="-10489.6185" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;TEMP_DB = &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00000200;</text>
<text text-anchor="middle" x="6548" y="-10474.2184" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;TRANSIENT_DB = &#160;&#160;&#160;0x00000400;</text>
<text text-anchor="middle" x="6548" y="-10458.8184" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;MAIN_JOURNAL = &#160;&#160;&#160;0x00000800;</text>
<text text-anchor="middle" x="6548" y="-10443.4184" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;TEMP_JOURNAL = &#160;&#160;&#160;0x00001000;</text>
<text text-anchor="middle" x="6548" y="-10428.0184" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;SUBJOURNAL = &#160;&#160;&#160;&#160;&#160;0x00002000;</text>
<text text-anchor="middle" x="6548" y="-10412.6183" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;MASTER_JOURNAL = &#160;0x00004000;</text>
<text text-anchor="middle" x="6548" y="-10397.2183" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;NOMUTEX = &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00008000;</text>
<text text-anchor="middle" x="6548" y="-10381.8183" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;FULLMUTEX = &#160;&#160;&#160;&#160;&#160;&#160;0x00010000;</text>
<text text-anchor="middle" x="6548" y="-10366.4182" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;SHAREDCACHE = &#160;&#160;&#160;&#160;0x00020000;</text>
<text text-anchor="middle" x="6548" y="-10351.0182" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;PRIVATECACHE = &#160;&#160;&#160;0x00040000;</text>
<text text-anchor="middle" x="6548" y="-10335.6182" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;WAL = &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;0x00080000;</text>
<text text-anchor="middle" x="6548" y="-10320.2181" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;}</text>
<text text-anchor="middle" x="6548" y="-10288.8181" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local t = sqlconstants</text>
<text text-anchor="middle" x="6548" y="-10273.4181" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local pre = &quot;static const int32_t SQLITE_&quot;</text>
<text text-anchor="middle" x="6548" y="-10258.018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=0,26 &#160;&#160;&#160;do t[#t+1] = pre..codes[i]..&quot;=&quot;..i..&quot;;\n&quot; end</text>
<text text-anchor="middle" x="6548" y="-10242.618" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=100,101 do t[#t+1] = pre..codes[i]..&quot;=&quot;..i..&quot;;\n&quot; end</text>
<text text-anchor="middle" x="6548" y="-10227.218" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=1,5 &#160;&#160;&#160;&#160;do t[#t+1] = pre..types[i]..&quot;=&quot;..i..&quot;;\n&quot; end</text>
<text text-anchor="middle" x="6548" y="-10211.8179" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;pre = pre..&quot;OPEN_&quot;</text>
<text text-anchor="middle" x="6548" y="-10196.4179" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for k,v in pairs(opens) do</text>
<text text-anchor="middle" x="6548" y="-10181.0179" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;t[#t+1] = pre..k..&quot;=&quot;..bit.tobit(v)..&quot;;\n&quot;</text>
<text text-anchor="middle" x="6548" y="-10165.6179" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-10150.2178" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-10118.8178" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Cdef &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-10103.4178" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; SQLITE_*, OPEN_*</text>
<text text-anchor="middle" x="6548" y="-10072.0177" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ffi.cdef(table.concat(sqlconstants))</text>
<text text-anchor="middle" x="6548" y="-10040.6177" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; sqlite3*, ljsqlite3_*</text>
<text text-anchor="middle" x="6548" y="-10025.2177" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;ffi.cdef[[</text>
<text text-anchor="middle" x="6548" y="-10009.8176" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Typedefs.</text>
<text text-anchor="middle" x="6548" y="-9994.4176" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef struct sqlite3 sqlite3;</text>
<text text-anchor="middle" x="6548" y="-9979.0176" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef struct sqlite3_stmt sqlite3_stmt;</text>
<text text-anchor="middle" x="6548" y="-9963.6175" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef void (*sqlite3_destructor_type)(void*);</text>
<text text-anchor="middle" x="6548" y="-9948.2175" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef struct sqlite3_context sqlite3_context;</text>
<text text-anchor="middle" x="6548" y="-9932.8175" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef struct Mem sqlite3_value;</text>
<text text-anchor="middle" x="6548" y="-9901.4174" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Get informative error message.</text>
<text text-anchor="middle" x="6548" y="-9886.0174" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;const char *sqlite3_errmsg(sqlite3*);</text>
<text text-anchor="middle" x="6548" y="-9854.6174" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Connection.</text>
<text text-anchor="middle" x="6548" y="-9839.2174" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_open_v2(const char *filename, sqlite3 **ppDb, int flags,</text>
<text text-anchor="middle" x="6548" y="-9823.8173" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;const char *zVfs);</text>
<text text-anchor="middle" x="6548" y="-9808.4173" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_close(sqlite3*);</text>
<text text-anchor="middle" x="6548" y="-9793.0173" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_busy_timeout(sqlite3*, int ms);</text>
<text text-anchor="middle" x="6548" y="-9761.6172" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Statement.</text>
<text text-anchor="middle" x="6548" y="-9746.2172" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_prepare_v2(sqlite3 *conn, const char *zSql, int nByte,</text>
<text text-anchor="middle" x="6548" y="-9730.8172" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sqlite3_stmt **ppStmt, const char **pzTail);</text>
<text text-anchor="middle" x="6548" y="-9715.4171" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_step(sqlite3_stmt*);</text>
<text text-anchor="middle" x="6548" y="-9700.0171" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_reset(sqlite3_stmt *pStmt);</text>
<text text-anchor="middle" x="6548" y="-9684.6171" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_finalize(sqlite3_stmt *pStmt);</text>
<text text-anchor="middle" x="6548" y="-9653.217" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Extra functions for SELECT.</text>
<text text-anchor="middle" x="6548" y="-9637.817" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_column_count(sqlite3_stmt *pStmt);</text>
<text text-anchor="middle" x="6548" y="-9622.417" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;const char *sqlite3_column_name(sqlite3_stmt*, int N);</text>
<text text-anchor="middle" x="6548" y="-9607.0169" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_column_type(sqlite3_stmt*, int iCol);</text>
<text text-anchor="middle" x="6548" y="-9575.6169" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Get value from SELECT.</text>
<text text-anchor="middle" x="6548" y="-9560.2169" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int64_t sqlite3_column_int64(sqlite3_stmt*, int iCol);</text>
<text text-anchor="middle" x="6548" y="-9544.8169" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;double sqlite3_column_double(sqlite3_stmt*, int iCol);</text>
<text text-anchor="middle" x="6548" y="-9529.4168" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_column_bytes(sqlite3_stmt*, int iCol);</text>
<text text-anchor="middle" x="6548" y="-9514.0168" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;const unsigned char *sqlite3_column_text(sqlite3_stmt*, int iCol);</text>
<text text-anchor="middle" x="6548" y="-9498.6168" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;const void *sqlite3_column_blob(sqlite3_stmt*, int iCol);</text>
<text text-anchor="middle" x="6548" y="-9467.2167" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Set value in bind.</text>
<text text-anchor="middle" x="6548" y="-9451.8167" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_bind_int64(sqlite3_stmt*, int, int64_t);</text>
<text text-anchor="middle" x="6548" y="-9436.4167" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_bind_double(sqlite3_stmt*, int, double);</text>
<text text-anchor="middle" x="6548" y="-9421.0166" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_bind_null(sqlite3_stmt*, int);</text>
<text text-anchor="middle" x="6548" y="-9405.6166" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_bind_text(sqlite3_stmt*, int, const char*, int n, void(*)(void*));</text>
<text text-anchor="middle" x="6548" y="-9390.2166" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_bind_blob(sqlite3_stmt*, int, const void*, int n, void(*)(void*));</text>
<text text-anchor="middle" x="6548" y="-9358.8165" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_bind_parameter_index(sqlite3_stmt *stmt, const char *name);</text>
<text text-anchor="middle" x="6548" y="-9327.4165" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Clear bindings.</text>
<text text-anchor="middle" x="6548" y="-9312.0165" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_clear_bindings(sqlite3_stmt*);</text>
<text text-anchor="middle" x="6548" y="-9280.6164" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Get value in callbacks.</text>
<text text-anchor="middle" x="6548" y="-9265.2164" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_value_type(sqlite3_value*);</text>
<text text-anchor="middle" x="6548" y="-9249.8164" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int64_t sqlite3_value_int64(sqlite3_value*);</text>
<text text-anchor="middle" x="6548" y="-9234.4164" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;double sqlite3_value_double(sqlite3_value*);</text>
<text text-anchor="middle" x="6548" y="-9219.0163" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_value_bytes(sqlite3_value*);</text>
<text text-anchor="middle" x="6548" y="-9203.6163" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;const unsigned char *sqlite3_value_text(sqlite3_value*); //Not used.</text>
<text text-anchor="middle" x="6548" y="-9188.2163" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;const void *sqlite3_value_blob(sqlite3_value*);</text>
<text text-anchor="middle" x="6548" y="-9156.8162" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Set value in callbacks.</text>
<text text-anchor="middle" x="6548" y="-9141.4162" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void sqlite3_result_error(sqlite3_context*, const char*, int);</text>
<text text-anchor="middle" x="6548" y="-9126.0162" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void sqlite3_result_int64(sqlite3_context*, int64_t);</text>
<text text-anchor="middle" x="6548" y="-9110.6161" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void sqlite3_result_double(sqlite3_context*, double);</text>
<text text-anchor="middle" x="6548" y="-9095.2161" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void sqlite3_result_null(sqlite3_context*);</text>
<text text-anchor="middle" x="6548" y="-9079.8161" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void sqlite3_result_text(sqlite3_context*, const char*, int, void(*)(void*));</text>
<text text-anchor="middle" x="6548" y="-9064.416" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void sqlite3_result_blob(sqlite3_context*, const void*, int, void(*)(void*));</text>
<text text-anchor="middle" x="6548" y="-9033.016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Persistency of data in callbacks (here just a pointer for tagging).</text>
<text text-anchor="middle" x="6548" y="-9017.616" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;void *sqlite3_aggregate_context(sqlite3_context*, int nBytes);</text>
<text text-anchor="middle" x="6548" y="-8986.2159" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Typedefs for callbacks.</text>
<text text-anchor="middle" x="6548" y="-8970.8159" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef void (*ljsqlite3_cbstep)(sqlite3_context*,int,sqlite3_value**);</text>
<text text-anchor="middle" x="6548" y="-8955.4159" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;typedef void (*ljsqlite3_cbfinal)(sqlite3_context*);</text>
<text text-anchor="middle" x="6548" y="-8924.0159" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;// Register callbacks.</text>
<text text-anchor="middle" x="6548" y="-8908.6158" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;int sqlite3_create_function(</text>
<text text-anchor="middle" x="6548" y="-8893.2158" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sqlite3 *conn,</text>
<text text-anchor="middle" x="6548" y="-8877.8158" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;const char *zFunctionName,</text>
<text text-anchor="middle" x="6548" y="-8862.4157" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;int nArg,</text>
<text text-anchor="middle" x="6548" y="-8847.0157" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;int eTextRep,</text>
<text text-anchor="middle" x="6548" y="-8831.6157" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;void *pApp,</text>
<text text-anchor="middle" x="6548" y="-8816.2156" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;void (*xFunc)(sqlite3_context*,int,sqlite3_value**),</text>
<text text-anchor="middle" x="6548" y="-8800.8156" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;void (*xStep)(sqlite3_context*,int,sqlite3_value**),</text>
<text text-anchor="middle" x="6548" y="-8785.4156" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;void (*xFinal)(sqlite3_context*)</text>
<text text-anchor="middle" x="6548" y="-8770.0155" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;);</text>
<text text-anchor="middle" x="6548" y="-8754.6155" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;]]</text>
<text text-anchor="middle" x="6548" y="-8723.2155" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-8707.8154" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local sql = ffi.load(&quot;sqlite3&quot;)</text>
<text text-anchor="middle" x="6548" y="-8676.4154" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local transient = ffi.cast(&quot;sqlite3_destructor_type&quot;, &#45;1)</text>
<text text-anchor="middle" x="6548" y="-8661.0154" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local int64_ct = ffi.typeof(&quot;int64_t&quot;)</text>
<text text-anchor="middle" x="6548" y="-8629.6154" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local blob_mt = {} &#45;&#45; For tagging only.</text>
<text text-anchor="middle" x="6548" y="-8598.2153" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function blob(str)</text>
<text text-anchor="middle" x="6548" y="-8582.8153" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return setmetatable({ str }, blob_mt)</text>
<text text-anchor="middle" x="6548" y="-8567.4153" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-8536.0152" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local connstmt = {} &#45;&#45; Statements for a conn.</text>
<text text-anchor="middle" x="6548" y="-8520.6152" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local conncb = {} &#45;&#45; Callbacks for a conn.</text>
<text text-anchor="middle" x="6548" y="-8505.2152" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local aggregatestate = {} &#45;&#45; Aggregate states.</text>
<text text-anchor="middle" x="6548" y="-8473.8151" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local stmt_step</text>
<text text-anchor="middle" x="6548" y="-8442.4151" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local stmt_mt, stmt_ct = {}</text>
<text text-anchor="middle" x="6548" y="-8427.0151" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;stmt_mt.__index = stmt_mt</text>
<text text-anchor="middle" x="6548" y="-8395.615" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local conn_mt, conn_ct = {}</text>
<text text-anchor="middle" x="6548" y="-8380.215" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn_mt.__index = conn_mt</text>
<text text-anchor="middle" x="6548" y="-8348.815" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Checks &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-8317.4149" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Helper function to get error msg and code from sqlite.</text>
<text text-anchor="middle" x="6548" y="-8302.0149" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function codemsg(pconn, code)</text>
<text text-anchor="middle" x="6548" y="-8286.6149" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return codes[code]:lower(), ffi.string(sql.sqlite3_errmsg(pconn))</text>
<text text-anchor="middle" x="6548" y="-8271.2149" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-8239.8148" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Throw error for a given connection.</text>
<text text-anchor="middle" x="6548" y="-8224.4148" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function E_conn(pconn, code)</text>
<text text-anchor="middle" x="6548" y="-8209.0148" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code, msg = codemsg(pconn, code)</text>
<text text-anchor="middle" x="6548" y="-8193.6147" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;err(code, msg)</text>
<text text-anchor="middle" x="6548" y="-8178.2147" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-8146.8147" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Test code is OK or throw error for a given connection.</text>
<text text-anchor="middle" x="6548" y="-8131.4146" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function T_okcode(pconn, code)</text>
<text text-anchor="middle" x="6548" y="-8116.0146" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if code ~= sql.SQLITE_OK then</text>
<text text-anchor="middle" x="6548" y="-8100.6146" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;E_conn(pconn, code)</text>
<text text-anchor="middle" x="6548" y="-8085.2145" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-8069.8145" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-8038.4145" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function T_open(x)</text>
<text text-anchor="middle" x="6548" y="-8023.0144" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if x._closed then</text>
<text text-anchor="middle" x="6548" y="-8007.6144" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(&quot;misuse&quot;, &quot;object is closed&quot;)</text>
<text text-anchor="middle" x="6548" y="-7992.2144" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7976.8144" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7945.4143" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Getters / Setters to minimize code duplication &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-7930.0143" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local sql_get_code = [=[</text>
<text text-anchor="middle" x="6548" y="-7914.6143" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return function(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7899.2142" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local t = sql.sqlite3_&lt;variant&gt;_type(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7883.8142" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if t == sql.SQLITE_INTEGER then</text>
<text text-anchor="middle" x="6548" y="-7868.4142" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_int64(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7853.0141" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == sql.SQLITE_FLOAT then</text>
<text text-anchor="middle" x="6548" y="-7837.6141" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_double(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7822.2141" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == sql.SQLITE_TEXT then</text>
<text text-anchor="middle" x="6548" y="-7806.814" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local nb = sql.sqlite3_&lt;variant&gt;_bytes(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7791.414" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return ffi.string(sql.sqlite3_&lt;variant&gt;_text(stmt_or_value &lt;opt_i&gt;), nb)</text>
<text text-anchor="middle" x="6548" y="-7776.014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == sql.SQLITE_BLOB then</text>
<text text-anchor="middle" x="6548" y="-7760.614" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local nb = sql.sqlite3_&lt;variant&gt;_bytes(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7745.2139" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return ffi.string(sql.sqlite3_&lt;variant&gt;_blob(stmt_or_value &lt;opt_i&gt;), nb)</text>
<text text-anchor="middle" x="6548" y="-7729.8139" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == sql.SQLITE_NULL then</text>
<text text-anchor="middle" x="6548" y="-7714.4139" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="6548" y="-7699.0138" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6548" y="-7683.6138" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(&quot;constraint&quot;, &quot;unexpected SQLite3 type&quot;)</text>
<text text-anchor="middle" x="6548" y="-7668.2138" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7652.8137" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7637.4137" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;]=]</text>
<text text-anchor="middle" x="6548" y="-7606.0137" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local sql_set_code = [=[</text>
<text text-anchor="middle" x="6548" y="-7590.6136" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;return function(stmt_or_value, v &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7575.2136" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local t = type(v)</text>
<text text-anchor="middle" x="6548" y="-7559.8136" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if ffi.istype(int64_ct, v) then</text>
<text text-anchor="middle" x="6548" y="-7544.4135" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_int64(stmt_or_value &lt;opt_i&gt;, v)</text>
<text text-anchor="middle" x="6548" y="-7529.0135" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == &quot;number&quot; then</text>
<text text-anchor="middle" x="6548" y="-7513.6135" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_double(stmt_or_value &lt;opt_i&gt;, v)</text>
<text text-anchor="middle" x="6548" y="-7498.2135" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == &quot;string&quot; then</text>
<text text-anchor="middle" x="6548" y="-7482.8134" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_text(stmt_or_value &lt;opt_i&gt;, v, #v,</text>
<text text-anchor="middle" x="6548" y="-7467.4134" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;transient)</text>
<text text-anchor="middle" x="6548" y="-7452.0134" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == &quot;table&quot; and getmetatable(v) == blob_mt then</text>
<text text-anchor="middle" x="6548" y="-7436.6133" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;v = v[1]</text>
<text text-anchor="middle" x="6548" y="-7421.2133" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_blob(stmt_or_value &lt;opt_i&gt;, v, #v,</text>
<text text-anchor="middle" x="6548" y="-7405.8133" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;transient)</text>
<text text-anchor="middle" x="6548" y="-7390.4132" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif t == &quot;nil&quot; then</text>
<text text-anchor="middle" x="6548" y="-7375.0132" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return sql.sqlite3_&lt;variant&gt;_null(stmt_or_value &lt;opt_i&gt;)</text>
<text text-anchor="middle" x="6548" y="-7359.6132" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6548" y="-7344.2131" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(&quot;constraint&quot;, &quot;unexpected Lua type&quot;)</text>
<text text-anchor="middle" x="6548" y="-7328.8131" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7313.4131" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7298.013" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;]=]</text>
<text text-anchor="middle" x="6548" y="-7266.613" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Environment for setters/getters.</text>
<text text-anchor="middle" x="6548" y="-7251.213" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local sql_env = {</text>
<text text-anchor="middle" x="6548" y="-7235.813" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sql &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= sql,</text>
<text text-anchor="middle" x="6548" y="-7220.4129" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;transient &#160;&#160;&#160;= transient,</text>
<text text-anchor="middle" x="6548" y="-7205.0129" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;ffi &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= ffi,</text>
<text text-anchor="middle" x="6548" y="-7189.6129" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;int64_ct &#160;&#160;&#160;&#160;= int64_ct,</text>
<text text-anchor="middle" x="6548" y="-7174.2128" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;blob_mt &#160;&#160;&#160;&#160;&#160;= blob_mt,</text>
<text text-anchor="middle" x="6548" y="-7158.8128" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;getmetatable = getmetatable,</text>
<text text-anchor="middle" x="6548" y="-7143.4128" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;err &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= err,</text>
<text text-anchor="middle" x="6548" y="-7128.0127" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;type &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;= type</text>
<text text-anchor="middle" x="6548" y="-7112.6127" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;}</text>
<text text-anchor="middle" x="6548" y="-7081.2127" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function sql_format(s, variant, index)</text>
<text text-anchor="middle" x="6548" y="-7065.8126" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return s:gsub(&quot;&lt;variant&gt;&quot;, variant):gsub(&quot;&lt;opt_i&gt;&quot;, index)</text>
<text text-anchor="middle" x="6548" y="-7050.4126" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-7019.0126" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function loadcode(s, env)</text>
<text text-anchor="middle" x="6548" y="-7003.6125" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local ret = assert(loadstring(s))</text>
<text text-anchor="middle" x="6548" y="-6988.2125" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if env then setfenv(ret, env) end</text>
<text text-anchor="middle" x="6548" y="-6972.8125" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return ret()</text>
<text text-anchor="middle" x="6548" y="-6957.4125" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-6926.0124" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Must always be called from *:_* function due to error level 4.</text>
<text text-anchor="middle" x="6548" y="-6910.6124" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local get_column = loadcode(sql_format(sql_get_code, &quot;column&quot;, &quot;,i&quot;), &#160;&#160;sql_env)</text>
<text text-anchor="middle" x="6548" y="-6895.2124" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local get_value &#160;= loadcode(sql_format(sql_get_code, &quot;value&quot; , &quot; &#160;&quot;), &#160;&#160;sql_env)</text>
<text text-anchor="middle" x="6548" y="-6879.8123" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local set_column = loadcode(sql_format(sql_set_code, &quot;bind&quot; &#160;, &quot;,i&quot;), &#160;&#160;sql_env)</text>
<text text-anchor="middle" x="6548" y="-6864.4123" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local set_value &#160;= loadcode(sql_format(sql_set_code, &quot;result&quot;, &quot; &#160;&quot;), &#160;&#160;sql_env)</text>
<text text-anchor="middle" x="6548" y="-6833.0123" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Connection &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-6817.6122" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local open_modes = {</text>
<text text-anchor="middle" x="6548" y="-6802.2122" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;ro = sql.SQLITE_OPEN_READONLY,</text>
<text text-anchor="middle" x="6548" y="-6786.8122" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;rw = sql.SQLITE_OPEN_READWRITE,</text>
<text text-anchor="middle" x="6548" y="-6771.4121" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;rwc = bit.bor(sql.SQLITE_OPEN_READWRITE, sql.SQLITE_OPEN_CREATE)</text>
<text text-anchor="middle" x="6548" y="-6756.0121" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;}</text>
<text text-anchor="middle" x="6548" y="-6724.6121" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function open(str, mode)</text>
<text text-anchor="middle" x="6548" y="-6709.212" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;mode = mode or &quot;rwc&quot;</text>
<text text-anchor="middle" x="6548" y="-6693.812" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;mode = open_modes[mode]</text>
<text text-anchor="middle" x="6548" y="-6678.412" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if not mode then</text>
<text text-anchor="middle" x="6548" y="-6663.012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(&quot;constraint&quot;, &quot;argument #2 to open must be ro, rw, or rwc&quot;)</text>
<text text-anchor="middle" x="6548" y="-6647.6119" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-6632.2119" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local aptr = ffi.new(&quot;sqlite3*[1]&quot;)</text>
<text text-anchor="middle" x="6548" y="-6616.8119" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Usually aptr is set even if error code, so conn always needs to be closed.</text>
<text text-anchor="middle" x="6548" y="-6601.4118" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = sql.sqlite3_open_v2(str, aptr, mode, nil)</text>
<text text-anchor="middle" x="6548" y="-6586.0118" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local conn = conn_ct(aptr[0], false)</text>
<text text-anchor="middle" x="6548" y="-6570.6118" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Must create this anyway due to conn:close() function.</text>
<text text-anchor="middle" x="6548" y="-6555.2117" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;connstmt[conn] = setmetatable({}, { __mode = &quot;k&quot; })</text>
<text text-anchor="middle" x="6548" y="-6539.8117" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;conncb[conn] = { scalar = {}, step = {}, final = {} }</text>
<text text-anchor="middle" x="6548" y="-6524.4117" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if code ~= sql.SQLITE_OK then</text>
<text text-anchor="middle" x="6548" y="-6509.0116" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local code, msg = codemsg(conn._ptr, code) &#45;&#45; Before closing!</text>
<text text-anchor="middle" x="6548" y="-6493.6116" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;conn:close() &#45;&#45; Free resources, should not fail here in this case!</text>
<text text-anchor="middle" x="6548" y="-6478.2116" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(code, msg)</text>
<text text-anchor="middle" x="6548" y="-6462.8115" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-6447.4115" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return conn</text>
<text text-anchor="middle" x="6548" y="-6432.0115" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-6400.6115" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:close() T_open(self)</text>
<text text-anchor="middle" x="6548" y="-6385.2114" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Close all stmt linked to conn.</text>
<text text-anchor="middle" x="6548" y="-6369.8114" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for k,_ in pairs(connstmt[self]) do if not k._closed then k:close() end end</text>
<text text-anchor="middle" x="6548" y="-6354.4114" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; Close all callbacks linked to conn.</text>
<text text-anchor="middle" x="6548" y="-6339.0113" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for _,v in pairs(conncb[self].scalar) do v:free() end</text>
<text text-anchor="middle" x="6548" y="-6323.6113" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for _,v in pairs(conncb[self].step) &#160;&#160;do v:free() end</text>
<text text-anchor="middle" x="6548" y="-6308.2113" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for _,v in pairs(conncb[self].final) &#160;do v:free() end</text>
<text text-anchor="middle" x="6548" y="-6292.8112" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = sql.sqlite3_close(self._ptr)</text>
<text text-anchor="middle" x="6548" y="-6277.4112" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;T_okcode(self._ptr, code)</text>
<text text-anchor="middle" x="6548" y="-6262.0112" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;connstmt[self] = nil &#45;&#45; Table connstmt is not weak, need to clear manually.</text>
<text text-anchor="middle" x="6548" y="-6246.6111" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;conncb[self] = nil</text>
<text text-anchor="middle" x="6548" y="-6231.2111" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;self._closed = true &#45;&#45; Set only if close succeded.</text>
<text text-anchor="middle" x="6548" y="-6215.8111" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-6184.411" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:__gc()</text>
<text text-anchor="middle" x="6548" y="-6169.011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if not self._closed then self:close() end</text>
<text text-anchor="middle" x="6548" y="-6153.611" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-6122.211" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:prepare(stmtstr) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-6106.8109" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local aptr = ffi.new(&quot;sqlite3_stmt*[1]&quot;)</text>
<text text-anchor="middle" x="6548" y="-6091.4109" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; If error code aptr NULL, so no need to close anything.</text>
<text text-anchor="middle" x="6548" y="-6076.0109" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = sql.sqlite3_prepare_v2(self._ptr, stmtstr, #stmtstr, aptr, nil)</text>
<text text-anchor="middle" x="6548" y="-6060.6108" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;T_okcode(self._ptr, code)</text>
<text text-anchor="middle" x="6548" y="-6045.2108" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local stmt = stmt_ct(aptr[0], false, self._ptr, code)</text>
<text text-anchor="middle" x="6548" y="-6029.8108" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;connstmt[self][stmt] = true</text>
<text text-anchor="middle" x="6548" y="-6014.4107" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return stmt</text>
<text text-anchor="middle" x="6548" y="-5999.0107" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5967.6107" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Connection exec, __call, rowexec &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-5952.2106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:exec(commands, get) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-5936.8106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local cmd1 = split(commands, &quot;;&quot;)</text>
<text text-anchor="middle" x="6548" y="-5921.4106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local res, n</text>
<text text-anchor="middle" x="6548" y="-5906.0105" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=1,#cmd1 do</text>
<text text-anchor="middle" x="6548" y="-5890.6105" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local cmd = trim(cmd1[i])</text>
<text text-anchor="middle" x="6548" y="-5875.2105" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if #cmd &gt; 0 then</text>
<text text-anchor="middle" x="6548" y="-5859.8105" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local stmt = self:prepare(cmd)</text>
<text text-anchor="middle" x="6548" y="-5844.4104" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;res, n = stmt:resultset(get)</text>
<text text-anchor="middle" x="6548" y="-5829.0104" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stmt:close()</text>
<text text-anchor="middle" x="6548" y="-5813.6104" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5798.2103" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5782.8103" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return res, n &#45;&#45; Only last record is returned.</text>
<text text-anchor="middle" x="6548" y="-5767.4103" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5736.0102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:rowexec(command) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-5720.6102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local stmt = self:prepare(command)</text>
<text text-anchor="middle" x="6548" y="-5705.2102" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local res = stmt:_step()</text>
<text text-anchor="middle" x="6548" y="-5689.8101" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if stmt:_step() then</text>
<text text-anchor="middle" x="6548" y="-5674.4101" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(&quot;misuse&quot;, &quot;multiple records returned, 1 expected&quot;)</text>
<text text-anchor="middle" x="6548" y="-5659.0101" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5643.61" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;stmt:close()</text>
<text text-anchor="middle" x="6548" y="-5628.21" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if res then</text>
<text text-anchor="middle" x="6548" y="-5612.81" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return unpack(res)</text>
<text text-anchor="middle" x="6548" y="-5597.41" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6548" y="-5582.0099" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="6548" y="-5566.6099" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5551.2099" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5519.8098" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:__call(commands, out) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-5504.4098" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;out = out or print</text>
<text text-anchor="middle" x="6548" y="-5489.0098" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local cmd1 = split(commands, &quot;;&quot;)</text>
<text text-anchor="middle" x="6548" y="-5473.6097" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for c=1,#cmd1 do</text>
<text text-anchor="middle" x="6548" y="-5458.2097" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local cmd = trim(cmd1[c])</text>
<text text-anchor="middle" x="6548" y="-5442.8097" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if #cmd &gt; 0 then</text>
<text text-anchor="middle" x="6548" y="-5427.4096" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local stmt = self:prepare(cmd)</text>
<text text-anchor="middle" x="6548" y="-5412.0096" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local ret, n = stmt:resultset()</text>
<text text-anchor="middle" x="6548" y="-5396.6096" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if ret then &#45;&#45; All the results get handled, not only last one.</text>
<text text-anchor="middle" x="6548" y="-5381.2095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out(unpack(ret[0])) &#45;&#45; Headers are printed.</text>
<text text-anchor="middle" x="6548" y="-5365.8095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for i=1,n do</text>
<text text-anchor="middle" x="6548" y="-5350.4095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local o = {}</text>
<text text-anchor="middle" x="6548" y="-5335.0095" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;for j=1,#ret[0] do</text>
<text text-anchor="middle" x="6548" y="-5319.6094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local v = ret[j][i]</text>
<text text-anchor="middle" x="6548" y="-5304.2094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &quot;nil&quot; then v = &quot;&quot; end &#45;&#45; Empty strings for NULLs.</text>
<text text-anchor="middle" x="6548" y="-5288.8094" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;o[#o+1] = tostring(v)</text>
<text text-anchor="middle" x="6548" y="-5273.4093" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5258.0093" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;out(unpack(o))</text>
<text text-anchor="middle" x="6548" y="-5242.6093" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5227.2092" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5211.8092" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;stmt:close()</text>
<text text-anchor="middle" x="6548" y="-5196.4092" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5181.0091" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5165.6091" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5134.2091" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Callbacks &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-5118.8091" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Update (one of) callbacks registry for sqlite functions.</text>
<text text-anchor="middle" x="6548" y="-5103.409" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function updatecb(self, where, name, f)</text>
<text text-anchor="middle" x="6548" y="-5088.009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local cbs = conncb[self][where]</text>
<text text-anchor="middle" x="6548" y="-5072.609" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if cbs[name] then &#45;&#45; Callback already present, free old one.</text>
<text text-anchor="middle" x="6548" y="-5057.2089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;cbs[name]:free()</text>
<text text-anchor="middle" x="6548" y="-5041.8089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-5026.4089" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;cbs[name] = f &#45;&#45; Could be nil and that&#39;s fine.</text>
<text text-anchor="middle" x="6548" y="-5011.0088" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4979.6088" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Return manually casted callback that sqlite expects, scalar.</text>
<text text-anchor="middle" x="6548" y="-4964.2088" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function scalarcb(name, f)</text>
<text text-anchor="middle" x="6548" y="-4948.8087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local values = {} &#45;&#45; Conversion buffer.</text>
<text text-anchor="middle" x="6548" y="-4933.4087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local function sqlf(context, nvalues, pvalues)</text>
<text text-anchor="middle" x="6548" y="-4918.0087" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Indexing 0,N&#45;1.</text>
<text text-anchor="middle" x="6548" y="-4902.6086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;for i=1,nvalues do values[i] = get_value(pvalues[i &#45; 1]) end</text>
<text text-anchor="middle" x="6548" y="-4887.2086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Throw error via sqlite function if necessary.</text>
<text text-anchor="middle" x="6548" y="-4871.8086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local ok, result = pcall(f, unpack(values, 1, nvalues))</text>
<text text-anchor="middle" x="6548" y="-4856.4086" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if not ok then</text>
<text text-anchor="middle" x="6548" y="-4841.0085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local msg = &quot;Lua registered scalar function &quot;..name..&quot; error: &quot;..result</text>
<text text-anchor="middle" x="6548" y="-4825.6085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sql.sqlite3_result_error(context, msg, #msg)</text>
<text text-anchor="middle" x="6548" y="-4810.2085" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6548" y="-4794.8084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set_value(context, result)</text>
<text text-anchor="middle" x="6548" y="-4779.4084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4764.0084" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4748.6083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return ffi.cast(&quot;ljsqlite3_cbstep&quot;, sqlf)</text>
<text text-anchor="middle" x="6548" y="-4733.2083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4701.8083" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Return the state for aggregate case (created via initstate()). We use the ptr</text>
<text text-anchor="middle" x="6548" y="-4686.4082" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; returned from aggregate_context() for tagging only, all the state data is</text>
<text text-anchor="middle" x="6548" y="-4671.0082" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; handled from Lua side.</text>
<text text-anchor="middle" x="6548" y="-4655.6082" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function getstate(context, initstate, size)</text>
<text text-anchor="middle" x="6548" y="-4640.2081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Only pointer address relevant for indexing, size irrelevant.</text>
<text text-anchor="middle" x="6548" y="-4624.8081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local ptr = sql.sqlite3_aggregate_context(context, size)</text>
<text text-anchor="middle" x="6548" y="-4609.4081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local pid = tonumber(ffi.cast(&quot;intptr_t&quot;,ptr))</text>
<text text-anchor="middle" x="6548" y="-4594.0081" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local state = aggregatestate[pid]</text>
<text text-anchor="middle" x="6548" y="-4578.608" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if type(state) == &quot;nil&quot; then</text>
<text text-anchor="middle" x="6548" y="-4563.208" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;state = initstate()</text>
<text text-anchor="middle" x="6548" y="-4547.808" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;aggregatestate[pid] = state</text>
<text text-anchor="middle" x="6548" y="-4532.4079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4517.0079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return state, pid</text>
<text text-anchor="middle" x="6548" y="-4501.6079" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4470.2078" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Return manually casted callback that sqlite expects, stepper for aggregate.</text>
<text text-anchor="middle" x="6548" y="-4454.8078" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function stepcb(name, f, initstate)</text>
<text text-anchor="middle" x="6548" y="-4439.4078" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local values = {} &#45;&#45; Conversion buffer.</text>
<text text-anchor="middle" x="6548" y="-4424.0077" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local function sqlf(context, nvalues, pvalues)</text>
<text text-anchor="middle" x="6548" y="-4408.6077" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Indexing 0,N&#45;1.</text>
<text text-anchor="middle" x="6548" y="-4393.2077" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;for i=1,nvalues do values[i] = get_value(pvalues[i &#45; 1]) end</text>
<text text-anchor="middle" x="6548" y="-4377.8076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local state = getstate(context, initstate, 1)</text>
<text text-anchor="middle" x="6548" y="-4362.4076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Throw error via sqlite function if necessary.</text>
<text text-anchor="middle" x="6548" y="-4347.0076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local ok, result = pcall(f, state, unpack(values, 1, nvalues))</text>
<text text-anchor="middle" x="6548" y="-4331.6076" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if not ok then</text>
<text text-anchor="middle" x="6548" y="-4316.2075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local msg = &quot;Lua registered step function &quot;..name..&quot; error: &quot;..result</text>
<text text-anchor="middle" x="6548" y="-4300.8075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sql.sqlite3_result_error(context, msg, #msg)</text>
<text text-anchor="middle" x="6548" y="-4285.4075" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4270.0074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4254.6074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return ffi.cast(&quot;ljsqlite3_cbstep&quot;, sqlf)</text>
<text text-anchor="middle" x="6548" y="-4239.2074" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4207.8073" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Return manually casted callback that sqlite expects, finalizer for aggregate.</text>
<text text-anchor="middle" x="6548" y="-4192.4073" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function finalcb(name, f, initstate)</text>
<text text-anchor="middle" x="6548" y="-4177.0073" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local function sqlf(context)</text>
<text text-anchor="middle" x="6548" y="-4161.6072" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local state, pid = getstate(context, initstate, 0)</text>
<text text-anchor="middle" x="6548" y="-4146.2072" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;aggregatestate[pid] = nil &#45;&#45; Clear the state.</text>
<text text-anchor="middle" x="6548" y="-4130.8072" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local ok, result = pcall(f, state)</text>
<text text-anchor="middle" x="6548" y="-4115.4071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; Throw error via sqlite function if necessary.</text>
<text text-anchor="middle" x="6548" y="-4100.0071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if not ok then</text>
<text text-anchor="middle" x="6548" y="-4084.6071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local msg = &quot;Lua registered final function &quot;..name..&quot; error: &quot;..result</text>
<text text-anchor="middle" x="6548" y="-4069.2071" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;sql.sqlite3_result_error(context, msg, #msg)</text>
<text text-anchor="middle" x="6548" y="-4053.807" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6548" y="-4038.407" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;set_value(context, result)</text>
<text text-anchor="middle" x="6548" y="-4023.007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-4007.6069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3992.2069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return ffi.cast(&quot;ljsqlite3_cbfinal&quot;, sqlf)</text>
<text text-anchor="middle" x="6548" y="-3976.8069" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3945.4068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:setscalar(name, f) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-3930.0068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;jit.off(stmt_step) &#45;&#45; Necessary to avoid bad calloc in some use cases.</text>
<text text-anchor="middle" x="6548" y="-3914.6068" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local cbf = f and scalarcb(name, f) or nil</text>
<text text-anchor="middle" x="6548" y="-3899.2067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = sql.sqlite3_create_function(self._ptr, name, &#45;1, 5, nil,</text>
<text text-anchor="middle" x="6548" y="-3883.8067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;cbf, nil, nil) &#45;&#45; If cbf nil this clears the function is sqlite.</text>
<text text-anchor="middle" x="6548" y="-3868.4067" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;T_okcode(self._ptr, code)</text>
<text text-anchor="middle" x="6548" y="-3853.0066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;updatecb(self, &quot;scalar&quot;, name, cbf) &#45;&#45; Update and clear old.</text>
<text text-anchor="middle" x="6548" y="-3837.6066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3806.2066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function conn_mt:setaggregate(name, initstate, step, final) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-3790.8066" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;jit.off(stmt_step) &#45;&#45; Necessary to avoid bad calloc in some use cases.</text>
<text text-anchor="middle" x="6548" y="-3775.4065" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local cbs = step &#160;and stepcb (name, step, &#160;initstate) or nil</text>
<text text-anchor="middle" x="6548" y="-3760.0065" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local cbf = final and finalcb(name, final, initstate) or nil</text>
<text text-anchor="middle" x="6548" y="-3744.6065" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = sql.sqlite3_create_function(self._ptr, name, &#45;1, 5, nil,</text>
<text text-anchor="middle" x="6548" y="-3729.2064" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;nil, cbs, cbf) &#45;&#45; If cbs, cbf nil this clears the function is sqlite.</text>
<text text-anchor="middle" x="6548" y="-3713.8064" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;T_okcode(self._ptr, code)</text>
<text text-anchor="middle" x="6548" y="-3698.4064" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;updatecb(self, &quot;step&quot;, name, cbs) &#45;&#45; Update and clear old.</text>
<text text-anchor="middle" x="6548" y="-3683.0063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;updatecb(self, &quot;final&quot;, name, cbf) &#45;&#45; Update and clear old.</text>
<text text-anchor="middle" x="6548" y="-3667.6063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3636.2063" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn_ct = ffi.metatype(&quot;struct { sqlite3* _ptr; bool _closed; }&quot;, conn_mt)</text>
<text text-anchor="middle" x="6548" y="-3604.8062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Statement &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-3589.4062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:reset() T_open(self)</text>
<text text-anchor="middle" x="6548" y="-3574.0062" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Ignore possible error code, it would be repetition of error raised during</text>
<text text-anchor="middle" x="6548" y="-3558.6061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; most recent evaluation of statement which would have been raised already.</text>
<text text-anchor="middle" x="6548" y="-3543.2061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sql.sqlite3_reset(self._ptr)</text>
<text text-anchor="middle" x="6548" y="-3527.8061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;self._code = sql.SQLITE_OK &#45;&#45; Always succeds.</text>
<text text-anchor="middle" x="6548" y="-3512.4061" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self</text>
<text text-anchor="middle" x="6548" y="-3497.006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3465.606" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:close() T_open(self)</text>
<text text-anchor="middle" x="6548" y="-3450.206" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Ignore possible error code, it would be repetition of error raised during</text>
<text text-anchor="middle" x="6548" y="-3434.8059" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; most recent evaluation of statement which would have been raised already.</text>
<text text-anchor="middle" x="6548" y="-3419.4059" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sql.sqlite3_finalize(self._ptr)</text>
<text text-anchor="middle" x="6548" y="-3404.0059" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;self._code = sql.SQLITE_OK &#45;&#45; Always succeds.</text>
<text text-anchor="middle" x="6548" y="-3388.6058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;self._closed = true &#45;&#45; Must be called exaclty once.</text>
<text text-anchor="middle" x="6548" y="-3373.2058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3341.8058" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:__gc()</text>
<text text-anchor="middle" x="6548" y="-3326.4057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if not self._closed then self:close() end</text>
<text text-anchor="middle" x="6548" y="-3311.0057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3279.6057" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Statement step, resultset &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-3264.2056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:_ncol()</text>
<text text-anchor="middle" x="6548" y="-3248.8056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return sql.sqlite3_column_count(self._ptr)</text>
<text text-anchor="middle" x="6548" y="-3233.4056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3202.0056" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:_header(h)</text>
<text text-anchor="middle" x="6548" y="-3186.6055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=1,self:_ncol() do &#45;&#45; Here indexing 0,N&#45;1.</text>
<text text-anchor="middle" x="6548" y="-3171.2055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;h[i] = ffi.string(sql.sqlite3_column_name(self._ptr, i &#45; 1))</text>
<text text-anchor="middle" x="6548" y="-3155.8055" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3140.4054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-3109.0054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;stmt_step = function(self, row, header)</text>
<text text-anchor="middle" x="6548" y="-3093.6054" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Must check code ~= SQL_DONE or sqlite3_step &#45;&#45;&gt; undefined result.</text>
<text text-anchor="middle" x="6548" y="-3078.2053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if self._code == sql.SQLITE_DONE then return nil end &#45;&#45; Already finished.</text>
<text text-anchor="middle" x="6548" y="-3062.8053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;self._code = sql.sqlite3_step(self._ptr)</text>
<text text-anchor="middle" x="6548" y="-3047.4053" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if self._code == sql.SQLITE_ROW then</text>
<text text-anchor="middle" x="6548" y="-3032.0052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; All the sql.* functions called never errors here.</text>
<text text-anchor="middle" x="6548" y="-3016.6052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;row = row or {}</text>
<text text-anchor="middle" x="6548" y="-3001.2052" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;for i=1,self:_ncol() do</text>
<text text-anchor="middle" x="6548" y="-2985.8051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;row[i] = get_column(self._ptr, i &#45; 1)</text>
<text text-anchor="middle" x="6548" y="-2970.4051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2955.0051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if header then self:_header(header) end</text>
<text text-anchor="middle" x="6548" y="-2939.6051" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return row, header</text>
<text text-anchor="middle" x="6548" y="-2924.205" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;elseif self._code == sql.SQLITE_DONE then &#45;&#45; Have finished now.</text>
<text text-anchor="middle" x="6548" y="-2908.805" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="6548" y="-2893.405" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;else &#45;&#45; If code not DONE or ROW then it&#39;s error.</text>
<text text-anchor="middle" x="6548" y="-2878.0049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;E_conn(self._conn, self._code)</text>
<text text-anchor="middle" x="6548" y="-2862.6049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2847.2049" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2831.8048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;stmt_mt._step = stmt_step</text>
<text text-anchor="middle" x="6548" y="-2800.4048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:step(row, header) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-2785.0048" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self:_step(row, header)</text>
<text text-anchor="middle" x="6548" y="-2769.6047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2722.2047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; iterator for rows</text>
<text text-anchor="middle" x="6548" y="-2706.8047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:rows() T_open(self)</text>
<text text-anchor="middle" x="6548" y="-2691.4047" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return function()</text>
<text text-anchor="middle" x="6548" y="-2676.0046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;local row = self:step()</text>
<text text-anchor="middle" x="6548" y="-2660.6046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if row then</text>
<text text-anchor="middle" x="6548" y="-2645.2046" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return row</text>
<text text-anchor="middle" x="6548" y="-2629.8045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="6548" y="-2614.4045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self:clearbind():reset()</text>
<text text-anchor="middle" x="6548" y="-2599.0045" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="6548" y="-2583.6044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2568.2044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2552.8044" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2521.4043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:resultset(get, maxrecords) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-2506.0043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;get = get or &quot;hik&quot;</text>
<text text-anchor="middle" x="6548" y="-2490.6043" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;maxrecords = maxrecords or math.huge</text>
<text text-anchor="middle" x="6548" y="-2475.2042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if maxrecords &lt; 1 then</text>
<text text-anchor="middle" x="6548" y="-2459.8042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;err(&quot;constraint&quot;, &quot;agument #1 to resultset must be &gt;= 1&quot;)</text>
<text text-anchor="middle" x="6548" y="-2444.4042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2429.0042" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local hash, hasi, hask = get:find(&quot;h&quot;), get:find(&quot;i&quot;), get:find(&quot;k&quot;)</text>
<text text-anchor="middle" x="6548" y="-2413.6041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local r, h = self:_step({}, {})</text>
<text text-anchor="middle" x="6548" y="-2398.2041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if not r then return nil, 0 end &#45;&#45; No records case.</text>
<text text-anchor="middle" x="6548" y="-2382.8041" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; First record, o is a temporary table used to get records.</text>
<text text-anchor="middle" x="6548" y="-2367.404" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local o = hash and { [0] = h } or {}</text>
<text text-anchor="middle" x="6548" y="-2352.004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=1,#h do o[i] = { r[i] } end</text>
<text text-anchor="middle" x="6548" y="-2336.604" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#45;&#45; Other records.</text>
<text text-anchor="middle" x="6548" y="-2321.2039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local n = 1</text>
<text text-anchor="middle" x="6548" y="-2305.8039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;while n &lt; maxrecords and self:_step(r) do</text>
<text text-anchor="middle" x="6548" y="-2290.4039" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;n = n + 1</text>
<text text-anchor="middle" x="6548" y="-2275.0038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;for i=1,#h do o[i][n] = r[i] end</text>
<text text-anchor="middle" x="6548" y="-2259.6038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2228.2038" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local out = { [0] = o[0] } &#45;&#45; Eventually copy colnames.</text>
<text text-anchor="middle" x="6548" y="-2212.8037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if hasi then &#45;&#45; Use numeric indexes.</text>
<text text-anchor="middle" x="6548" y="-2197.4037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;for i=1,#h do out[i] = o[i] end</text>
<text text-anchor="middle" x="6548" y="-2182.0037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2166.6037" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;if hask then &#45;&#45; Use colnames indexes.</text>
<text text-anchor="middle" x="6548" y="-2151.2036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;for i=1,#h do out[h[i]] = o[i] end</text>
<text text-anchor="middle" x="6548" y="-2135.8036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2120.4036" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return out, n</text>
<text text-anchor="middle" x="6548" y="-2105.0035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-2073.6035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Statement bind &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-2058.2035" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:_bind1(i, v)</text>
<text text-anchor="middle" x="6548" y="-2042.8034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = set_column(self._ptr, v, i) &#45;&#45; Here indexing 1,N.</text>
<text text-anchor="middle" x="6548" y="-2027.4034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;T_okcode(self._conn, code)</text>
<text text-anchor="middle" x="6548" y="-2012.0034" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self</text>
<text text-anchor="middle" x="6548" y="-1996.6033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1965.2033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:bind1(i, v) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-1949.8033" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self:_bind1(i, v)</text>
<text text-anchor="middle" x="6548" y="-1934.4032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1903.0032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:bind(...) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-1887.6032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for i=1,select(&quot;#&quot;, ...) do self:_bind1(i, select(i, ...)) end</text>
<text text-anchor="middle" x="6548" y="-1872.2032" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self</text>
<text text-anchor="middle" x="6548" y="-1856.8031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1825.4031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; note: after some thought, I&#39;ve decided to let this method only handle string</text>
<text text-anchor="middle" x="6548" y="-1810.0031" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; values. &#160;It would be possible to bind against numeric indices as well, but this</text>
<text text-anchor="middle" x="6548" y="-1794.603" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; would do the wrong thing if given a table with the correct named keys as well as</text>
<text text-anchor="middle" x="6548" y="-1779.203" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; indexed values.</text>
<text text-anchor="middle" x="6548" y="-1763.803" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-1748.4029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Worse, it would *unpredictably* do the wrong thing, since stmts silently accept</text>
<text text-anchor="middle" x="6548" y="-1733.0029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; rebinding, and `pair` offers no ordering guarantees.</text>
<text text-anchor="middle" x="6548" y="-1717.6029" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45;</text>
<text text-anchor="middle" x="6548" y="-1686.2028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:bindkv(t, pre) T_open(self)</text>
<text text-anchor="middle" x="6548" y="-1670.8028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;pre = pre or &quot;:&quot;</text>
<text text-anchor="middle" x="6548" y="-1655.4028" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;for k,v in pairs(t) do</text>
<text text-anchor="middle" x="6548" y="-1640.0027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;if type(k) == &quot;string&quot; then</text>
<text text-anchor="middle" x="6548" y="-1624.6027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local param = sql.sqlite3_bind_parameter_index(self._ptr, pre..k)</text>
<text text-anchor="middle" x="6548" y="-1609.2027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if param ~= 0 then</text>
<text text-anchor="middle" x="6548" y="-1593.8027" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;self:_bind1(param, v)</text>
<text text-anchor="middle" x="6548" y="-1578.4026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1563.0026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1547.6026" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1532.2025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self</text>
<text text-anchor="middle" x="6548" y="-1516.8025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1485.4025" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function stmt_mt:clearbind() T_open(self)</text>
<text text-anchor="middle" x="6548" y="-1470.0024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;local code = sql.sqlite3_clear_bindings(self._ptr)</text>
<text text-anchor="middle" x="6548" y="-1454.6024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;T_okcode(self._conn, code)</text>
<text text-anchor="middle" x="6548" y="-1439.2024" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;return self</text>
<text text-anchor="middle" x="6548" y="-1423.8023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="6548" y="-1392.4023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;stmt_ct = ffi.metatype([[struct {</text>
<text text-anchor="middle" x="6548" y="-1377.0023" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sqlite3_stmt* _ptr;</text>
<text text-anchor="middle" x="6548" y="-1361.6022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;bool &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;_closed;</text>
<text text-anchor="middle" x="6548" y="-1346.2022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;sqlite3* &#160;&#160;&#160;&#160;&#160;_conn;</text>
<text text-anchor="middle" x="6548" y="-1330.8022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;int32_t &#160;&#160;&#160;&#160;&#160;&#160;_code;</text>
<text text-anchor="middle" x="6548" y="-1315.4022" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;}]], stmt_mt)</text>
</g>
<!-- codeblock_91&#45;&gt;leaf_104 -->
<g id="edge104" class="edge">
<title>codeblock_91&#45;&gt;leaf_104</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6421.4854,-10865.0138C6421.6605,-10858.3749 6421.8818,-10849.9857 6422.1473,-10839.9209"/>
<polygon fill="#000000" stroke="#000000" points="6425.6503,-10839.8489 6422.4153,-10829.7601 6418.6527,-10839.6643 6425.6503,-10839.8489"/>
</g>
<!-- leaf_105 -->
<g id="node106" class="node">
<title>leaf_105</title>
<polygon fill="none" stroke="#c0c0c0" points="7045,-6087.6112 6875,-6087.6112 6875,-6049.01 7045,-6049.01 7045,-6087.6112"/>
<text text-anchor="middle" x="6960" y="-6072.5106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;sqlayer.open = open</text>
<text text-anchor="middle" x="6960" y="-6057.1106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;sqlayer.blob = blob</text>
</g>
<!-- codeblock_92&#45;&gt;leaf_105 -->
<g id="edge105" class="edge">
<title>codeblock_92&#45;&gt;leaf_105</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6855.5742,-10865.2789C6859.4907,-10854.9626 6863.8843,-10841.6895 6866,-10829.4191 7203.5408,-8871.8041 6990.2631,-6394.6493 6962.7983,-6097.8171"/>
<polygon fill="#000000" stroke="#000000" points="6966.2792,-6097.4486 6961.8666,-6087.8164 6959.3094,-6098.098 6966.2792,-6097.4486"/>
</g>
<!-- leaf_98 -->
<g id="node99" class="node">
<title>leaf_98</title>
<polygon fill="none" stroke="#c0c0c0" points="5917,-1054.902 5355,-1054.902 5355,-984.3013 5917,-984.3013 5917,-1054.902"/>
<text text-anchor="middle" x="5636" y="-1007.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">Some of this should eventually be replaced with a statically linked struct, as</text>
<text text-anchor="middle" x="5636" y="-992.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">we were doing with</text>
</g>
<!-- raw_94&#45;&gt;leaf_98 -->
<g id="edge98" class="edge">
<title>raw_94&#45;&gt;leaf_98</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5859.1579,-6050.1352C5861.8201,-5739.6066 5896.3294,-1551.1154 5823,-1307.2021 5793.9687,-1210.6362 5721.5441,-1116.004 5675.8218,-1062.9857"/>
<polygon fill="#000000" stroke="#000000" points="5678.2083,-1060.3967 5669.001,-1055.155 5672.9299,-1064.9944 5678.2083,-1060.3967"/>
</g>
<!-- leaf_99 -->
<g id="node100" class="node">
<title>leaf_99</title>
<polygon fill="none" stroke="#c0c0c0" points="5989,-1037.6017 5935,-1037.6017 5935,-1001.6017 5989,-1001.6017 5989,-1037.6017"/>
<text text-anchor="middle" x="5962" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_95&#45;&gt;leaf_99 -->
<g id="edge99" class="edge">
<title>prespace_95&#45;&gt;leaf_99</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M5950.0435,-6050.0293C5950.7929,-5734.6966 5960.9986,-1440.8976 5961.9318,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="5965.4322,-1048.074 5961.9561,-1038.0657 5958.4323,-1048.0573 5965.4322,-1048.074"/>
</g>
<!-- leaf_100 -->
<g id="node101" class="node">
<title>leaf_100</title>
<polygon fill="none" stroke="#c0c0c0" points="6061,-1037.6017 6007,-1037.6017 6007,-1001.6017 6061,-1001.6017 6061,-1037.6017"/>
<text text-anchor="middle" x="6034" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">femto</text>
</g>
<!-- literal_96&#45;&gt;leaf_100 -->
<g id="edge100" class="edge">
<title>literal_96&#45;&gt;leaf_100</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6045.9565,-6050.0293C6045.2071,-5734.6966 6035.0014,-1440.8976 6034.0682,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="6037.5677,-1048.0573 6034.0439,-1038.0657 6030.5678,-1048.074 6037.5677,-1048.0573"/>
</g>
<!-- leaf_101 -->
<g id="node102" class="node">
<title>leaf_101</title>
<polygon fill="none" stroke="#c0c0c0" points="6599,-1046.8021 6079,-1046.8021 6079,-992.4012 6599,-992.4012 6599,-1046.8021"/>
<text text-anchor="middle" x="6339" y="-1031.5017" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;This will cause our SQLite binary to be</text>
<text text-anchor="middle" x="6339" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">statically linked to the binary, which I&#39;m pretty sure doesn&#39;t currently</text>
<text text-anchor="middle" x="6339" y="-1000.7017" font-family="Inconsolata" font-size="14.00" fill="#000000">happen.</text>
</g>
<!-- raw_97&#45;&gt;leaf_101 -->
<g id="edge101" class="edge">
<title>raw_97&#45;&gt;leaf_101</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6121.8496,-6050.1375C6119.314,-5739.6464 6086.478,-1551.6515 6158,-1307.2021 6187.6425,-1205.8896 6264.2692,-1105.7028 6307.7215,-1054.5605"/>
<polygon fill="#000000" stroke="#000000" points="6310.5415,-1056.6489 6314.3982,-1046.7809 6305.2295,-1052.0899 6310.5415,-1056.6489"/>
</g>
<!-- leaf_103 -->
<g id="node104" class="node">
<title>leaf_103</title>
<polygon fill="none" stroke="#c0c0c0" points="7172.5,-1046.9021 6617.5,-1046.9021 6617.5,-992.3013 7172.5,-992.3013 7172.5,-1046.9021"/>
<text text-anchor="middle" x="6895" y="-1015.8017" font-family="Inconsolata" font-size="14.00" fill="#000000">Low priority, since we aren&#39;t really out there flogging brand&#45;new features of</text>
<text text-anchor="middle" x="6895" y="-1000.4017" font-family="Inconsolata" font-size="14.00" fill="#000000">SQLite, so the system library is likely to be just fine.</text>
</g>
<!-- raw_102&#45;&gt;leaf_103 -->
<g id="edge103" class="edge">
<title>raw_102&#45;&gt;leaf_103</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M6193.795,-6050.0008C6190.2842,-5732.8624 6143.9266,-1401.1465 6230,-1307.2021 6287.0025,-1244.9871 6530.5247,-1304.6324 6608,-1271.2021 6721.0766,-1222.4101 6821.2393,-1111.848 6867.6373,-1054.9257"/>
<polygon fill="#000000" stroke="#000000" points="6870.5328,-1056.9108 6874.0879,-1046.9302 6865.0848,-1052.5154 6870.5328,-1056.9108"/>
</g>
<!-- leaf_114 -->
<g id="node115" class="node">
<title>leaf_114</title>
<polygon fill="none" stroke="#c0c0c0" points="7434.5,-6086.3106 7257.5,-6086.3106 7257.5,-6050.3106 7434.5,-6050.3106 7434.5,-6086.3106"/>
<text text-anchor="middle" x="7346" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000">** Additional SQL layer</text>
</g>
<!-- header_106&#45;&gt;leaf_114 -->
<g id="edge114" class="edge">
<title>header_106&#45;&gt;leaf_114</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7348.9885,-10865.0138C7348.7965,-10556.7751 7346.2537,-6475.4736 7346.0175,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="7349.5176,-6096.3488 7346.0112,-6086.3511 7342.5176,-6096.3533 7349.5176,-6096.3488"/>
</g>
<!-- raw_115 -->
<g id="node116" class="node">
<title>raw_115</title>
<ellipse fill="none" stroke="#000000" cx="7480" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="7480" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_107&#45;&gt;raw_115 -->
<g id="edge115" class="edge">
<title>prose_107&#45;&gt;raw_115</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7512.8739,-10865.0138C7510.7614,-10556.7751 7482.7905,-6475.4736 7480.193,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="7483.6922,-6096.3268 7480.1236,-6086.3511 7476.6924,-6096.3748 7483.6922,-6096.3268"/>
</g>
<!-- raw_117 -->
<g id="node118" class="node">
<title>raw_117</title>
<ellipse fill="none" stroke="#000000" cx="7552" cy="-6068.3106" rx="27" ry="18"/>
<text text-anchor="middle" x="7552" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_108&#45;&gt;raw_117 -->
<g id="edge117" class="edge">
<title>prose_108&#45;&gt;raw_117</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7595.6257,-10865.6075C7592.7509,-10855.1703 7589.5009,-10841.6703 7588,-10829.4191 7465.9415,-9833.11 7543.0726,-6442.1705 7551.3104,-6096.7671"/>
<polygon fill="#000000" stroke="#000000" points="7554.8134,-6096.6803 7551.554,-6086.5993 7547.8154,-6096.5126 7554.8134,-6096.6803"/>
</g>
<!-- leaf_119 -->
<g id="node120" class="node">
<title>leaf_119</title>
<polygon fill="none" stroke="#c0c0c0" points="7886.5,-6095.5111 7597.5,-6095.5111 7597.5,-6041.1101 7886.5,-6041.1101 7886.5,-6095.5111"/>
<text text-anchor="middle" x="7742" y="-6080.2106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pcall = assert (pcall)</text>
<text text-anchor="middle" x="7742" y="-6064.8106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local gsub = assert(string.gsub)</text>
<text text-anchor="middle" x="7742" y="-6049.4106" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local format = assert(string.format)</text>
</g>
<!-- codeblock_109&#45;&gt;leaf_119 -->
<g id="edge119" class="edge">
<title>codeblock_109&#45;&gt;leaf_119</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7742,-10865.0138C7742,-10559.0586 7742,-6535.7358 7742,-6105.506"/>
<polygon fill="#000000" stroke="#000000" points="7745.5001,-6105.4621 7742,-6095.4621 7738.5001,-6105.4621 7745.5001,-6105.4621"/>
</g>
<!-- header_120 -->
<g id="node121" class="node">
<title>header_120</title>
<ellipse fill="none" stroke="#000000" cx="7971" cy="-6068.3106" rx="66.2599" ry="18"/>
<text text-anchor="middle" x="7971" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : sql.san(str)</text>
</g>
<!-- section_110&#45;&gt;header_120 -->
<g id="edge120" class="edge">
<title>section_110&#45;&gt;header_120</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8028.7783,-10865.0138C8025.0654,-10556.7751 7975.9044,-6475.4736 7971.3393,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="7974.8376,-6096.3081 7971.2173,-6086.3511 7967.8381,-6096.3925 7974.8376,-6096.3081"/>
</g>
<!-- prose_121 -->
<g id="node122" class="node">
<title>prose_121</title>
<ellipse fill="none" stroke="#000000" cx="8087" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8087" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_110&#45;&gt;prose_121 -->
<g id="edge121" class="edge">
<title>section_110&#45;&gt;prose_121</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8036.2031,-10865.2493C8039.9177,-10854.9237 8044.0661,-10841.6512 8046,-10829.4191 8124.6717,-10331.8105 8090.6883,-6464.3324 8087.2662,-6096.396"/>
<polygon fill="#000000" stroke="#000000" points="8090.7654,-6096.2826 8087.1719,-6086.3158 8083.7657,-6096.3481 8090.7654,-6096.2826"/>
</g>
<!-- codeblock_122 -->
<g id="node123" class="node">
<title>codeblock_122</title>
<ellipse fill="none" stroke="#000000" cx="8225" cy="-6068.3106" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="8225" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 728&#45;734</text>
</g>
<!-- section_110&#45;&gt;codeblock_122 -->
<g id="edge122" class="edge">
<title>section_110&#45;&gt;codeblock_122</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8076.4092,-10869.3939C8095.8786,-10861.0639 8116.5137,-10848.3268 8128,-10829.4191 8649.9,-9970.313 8267.8329,-6447.4637 8228.2261,-6096.5138"/>
<polygon fill="#000000" stroke="#000000" points="8231.6863,-6095.9641 8227.0826,-6086.4218 8224.7308,-6096.7523 8231.6863,-6095.9641"/>
</g>
<!-- header_127 -->
<g id="node128" class="node">
<title>header_127</title>
<ellipse fill="none" stroke="#000000" cx="8505" cy="-6068.3106" rx="76.8675" ry="18"/>
<text text-anchor="middle" x="8505" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : sql.format(str)</text>
</g>
<!-- section_111&#45;&gt;header_127 -->
<g id="edge127" class="edge">
<title>section_111&#45;&gt;header_127</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9321.209,-10880.6438C9137.5983,-10873.4747 8677.8431,-10853.2244 8655,-10829.4191 8305.7666,-10465.4739 8485.9423,-6471.0942 8503.6488,-6096.4574"/>
<polygon fill="#000000" stroke="#000000" points="8507.1462,-6096.5913 8504.1246,-6086.4366 8500.1541,-6096.2593 8507.1462,-6096.5913"/>
</g>
<!-- prose_128 -->
<g id="node129" class="node">
<title>prose_128</title>
<ellipse fill="none" stroke="#000000" cx="8696" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8696" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_111&#45;&gt;prose_128 -->
<g id="edge128" class="edge">
<title>section_111&#45;&gt;prose_128</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9320.9042,-10881.1476C9181.8465,-10876.1756 8895.5565,-10862.0576 8865,-10829.4191 8520.226,-10461.1543 8679.1054,-6470.6882 8694.8003,-6096.4288"/>
<polygon fill="#000000" stroke="#000000" points="8698.2979,-6096.5566 8695.2222,-6086.4181 8691.3041,-6096.2618 8698.2979,-6096.5566"/>
</g>
<!-- prose_129 -->
<g id="node130" class="node">
<title>prose_129</title>
<ellipse fill="none" stroke="#000000" cx="8906" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="8906" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_111&#45;&gt;prose_129 -->
<g id="edge129" class="edge">
<title>section_111&#45;&gt;prose_129</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9394.127,-10865.0138C9362.7597,-10556.7751 8947.4341,-6475.4736 8908.8663,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="8912.3304,-6095.9453 8907.8359,-6086.3511 8905.3663,-6096.654 8912.3304,-6095.9453"/>
</g>
<!-- prose_130 -->
<g id="node131" class="node">
<title>prose_130</title>
<ellipse fill="none" stroke="#000000" cx="9917" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="9917" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_111&#45;&gt;prose_130 -->
<g id="edge130" class="edge">
<title>section_111&#45;&gt;prose_130</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9397.9915,-10865.0138C9431.3432,-10556.7751 9872.9445,-6475.4736 9913.9524,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="9917.4519,-6096.6696 9915.048,-6086.3511 9910.4925,-6095.9165 9917.4519,-6096.6696"/>
</g>
<!-- prose_131 -->
<g id="node132" class="node">
<title>prose_131</title>
<ellipse fill="none" stroke="#000000" cx="11246" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="11246" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_111&#45;&gt;prose_131 -->
<g id="edge131" class="edge">
<title>section_111&#45;&gt;prose_131</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9470.8574,-10880.9119C9615.306,-10875.4027 9921.5362,-10860.2065 9958,-10829.4191 11542.9613,-9491.1885 11281.62,-6422.3036 11248.9699,-6096.4646"/>
<polygon fill="#000000" stroke="#000000" points="11252.4433,-6096.0244 11247.9489,-6086.4301 11245.4792,-6096.733 11252.4433,-6096.0244"/>
</g>
<!-- prose_132 -->
<g id="node133" class="node">
<title>prose_132</title>
<ellipse fill="none" stroke="#000000" cx="12298" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="12298" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_111&#45;&gt;prose_132 -->
<g id="edge132" class="edge">
<title>section_111&#45;&gt;prose_132</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9471.49,-10882.5294C9819.2495,-10878.2749 11251.5481,-10858.9813 11287,-10829.4191 12859.1569,-9518.448 12361.2042,-6425.2322 12303.171,-6096.7006"/>
<polygon fill="#000000" stroke="#000000" points="12306.5681,-6095.8134 12301.3675,-6086.5828 12299.6768,-6097.0418 12306.5681,-6095.8134"/>
</g>
<!-- codeblock_133 -->
<g id="node134" class="node">
<title>codeblock_133</title>
<ellipse fill="none" stroke="#000000" cx="12588" cy="-6068.3106" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="12588" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 758&#45;779</text>
</g>
<!-- section_111&#45;&gt;codeblock_133 -->
<g id="edge133" class="edge">
<title>section_111&#45;&gt;codeblock_133</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9471.7166,-10882.7291C9929.8408,-10878.4705 12312.4337,-10855.0996 12339,-10829.4191 13063.1204,-10129.4427 12635.5487,-6457.925 12591.5383,-6096.8936"/>
<polygon fill="#000000" stroke="#000000" points="12594.9852,-6096.2459 12590.2957,-6086.7455 12588.0371,-6097.0968 12594.9852,-6096.2459"/>
</g>
<!-- header_204 -->
<g id="node205" class="node">
<title>header_204</title>
<ellipse fill="none" stroke="#000000" cx="13079" cy="-6068.3106" rx="106.3786" ry="18"/>
<text text-anchor="middle" x="13079" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : sql.pexec(conn, stmt)</text>
</g>
<!-- section_112&#45;&gt;header_204 -->
<g id="edge204" class="edge">
<title>section_112&#45;&gt;header_204</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13217.9614,-10865.6624C13209.2809,-10855.8719 13199.7468,-10842.9725 13195,-10829.4191 12536.6194,-8949.5686 13014.6039,-6391.6848 13073.2898,-6096.4367"/>
<polygon fill="#000000" stroke="#000000" points="13076.7413,-6097.0252 13075.2705,-6086.5329 13069.8773,-6095.6524 13076.7413,-6097.0252"/>
</g>
<!-- prose_205 -->
<g id="node206" class="node">
<title>prose_205</title>
<ellipse fill="none" stroke="#000000" cx="13236" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13236" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_112&#45;&gt;prose_205 -->
<g id="edge205" class="edge">
<title>section_112&#45;&gt;prose_205</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13236,-10865.0138C13236,-10556.7751 13236,-6475.4736 13236,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="13239.5001,-6096.351 13236,-6086.3511 13232.5001,-6096.3511 13239.5001,-6096.351"/>
</g>
<!-- prose_206 -->
<g id="node207" class="node">
<title>prose_206</title>
<ellipse fill="none" stroke="#000000" cx="13383" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="13383" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_112&#45;&gt;prose_206 -->
<g id="edge206" class="edge">
<title>section_112&#45;&gt;prose_206</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13254.0503,-10865.6665C13262.734,-10855.8771 13272.2674,-10842.9775 13277,-10829.4191 13608.0327,-9881.0437 13406.1526,-6443.6417 13384.7724,-6096.6174"/>
<polygon fill="#000000" stroke="#000000" points="13388.2519,-6096.1775 13384.1406,-6086.4129 13381.2653,-6096.61 13388.2519,-6096.1775"/>
</g>
<!-- codeblock_207 -->
<g id="node208" class="node">
<title>codeblock_207</title>
<ellipse fill="none" stroke="#000000" cx="13693" cy="-6068.3106" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="13693" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 787&#45;798</text>
</g>
<!-- section_112&#45;&gt;codeblock_207 -->
<g id="edge207" class="edge">
<title>section_112&#45;&gt;codeblock_207</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13298.8019,-10873.3657C13347.1178,-10864.2392 13408.215,-10849.1898 13424,-10829.4191 14673.4295,-9264.5064 13801.9895,-6406.4583 13702.0412,-6095.8919"/>
<polygon fill="#000000" stroke="#000000" points="13705.3467,-6094.7382 13698.9384,-6086.3011 13698.6865,-6096.893 13705.3467,-6094.7382"/>
</g>
<!-- header_220 -->
<g id="node221" class="node">
<title>header_220</title>
<ellipse fill="none" stroke="#000000" cx="14313" cy="-6068.3106" rx="81.7388" ry="18"/>
<text text-anchor="middle" x="14313" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">3 : sql.lastid(conn)</text>
</g>
<!-- section_113&#45;&gt;header_220 -->
<g id="edge220" class="edge">
<title>section_113&#45;&gt;header_220</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14621.948,-10873.76C14572.2223,-10864.8252 14509.1076,-10849.8391 14493,-10829.4191 13253.8867,-9258.5667 14195.6001,-6405.803 14303.2703,-6095.8376"/>
<polygon fill="#000000" stroke="#000000" points="14306.6204,-6096.8604 14306.6119,-6086.2656 14300.0115,-6094.5532 14306.6204,-6096.8604"/>
</g>
<!-- prose_221 -->
<g id="node222" class="node">
<title>prose_221</title>
<ellipse fill="none" stroke="#000000" cx="14534" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="14534" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_113&#45;&gt;prose_221 -->
<g id="edge221" class="edge">
<title>section_113&#45;&gt;prose_221</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14667.9555,-10865.6645C14659.2735,-10855.8745 14649.7397,-10842.975 14645,-10829.4191 14313.4617,-9881.1949 14511.2914,-6443.657 14532.2611,-6096.6185"/>
<polygon fill="#000000" stroke="#000000" points="14535.7682,-6096.6074 14532.8808,-6086.4136 14528.7811,-6096.1831 14535.7682,-6096.6074"/>
</g>
<!-- prose_222 -->
<g id="node223" class="node">
<title>prose_222</title>
<ellipse fill="none" stroke="#000000" cx="14686" cy="-6068.3106" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="14686" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_113&#45;&gt;prose_222 -->
<g id="edge222" class="edge">
<title>section_113&#45;&gt;prose_222</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14686,-10865.0138C14686,-10556.7751 14686,-6475.4736 14686,-6096.4766"/>
<polygon fill="#000000" stroke="#000000" points="14689.5001,-6096.351 14686,-6086.3511 14682.5001,-6096.3511 14689.5001,-6096.351"/>
</g>
<!-- codeblock_223 -->
<g id="node224" class="node">
<title>codeblock_223</title>
<ellipse fill="none" stroke="#000000" cx="14914" cy="-6068.3106" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="14914" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 807&#45;812</text>
</g>
<!-- section_113&#45;&gt;codeblock_223 -->
<g id="edge223" class="edge">
<title>section_113&#45;&gt;codeblock_223</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14703.9558,-10865.6331C14712.6135,-10855.8345 14722.1523,-10842.9368 14727,-10829.4191 15399.6832,-8953.6358 14971.9538,-6392.1646 14919.1474,-6096.4791"/>
<polygon fill="#000000" stroke="#000000" points="14922.5786,-6095.7835 14917.3643,-6086.5606 14915.689,-6097.0222 14922.5786,-6095.7835"/>
</g>
<!-- section_224 -->
<g id="node225" class="node">
<title>section_224</title>
<ellipse fill="none" stroke="#000000" cx="16523" cy="-6068.3106" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="16523" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 815&#45;891</text>
</g>
<!-- section_113&#45;&gt;section_224 -->
<g id="edge224" class="edge">
<title>section_113&#45;&gt;section_224</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14760.2096,-10879.8831C14844.0492,-10874.4038 14973.5868,-10860.9795 15010,-10829.4191 16596.8851,-9454.0174 16535.4536,-6421.3314 16524.1329,-6096.6319"/>
<polygon fill="#000000" stroke="#000000" points="16527.6301,-6096.4887 16523.7691,-6086.6225 16520.6347,-6096.743 16527.6301,-6096.4887"/>
</g>
<!-- section_225 -->
<g id="node226" class="node">
<title>section_225</title>
<ellipse fill="none" stroke="#000000" cx="19325" cy="-6068.3106" rx="75.4916" ry="18"/>
<text text-anchor="middle" x="19325" y="-6064.1106" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">section: 892&#45;898</text>
</g>
<!-- section_113&#45;&gt;section_225 -->
<g id="edge225" class="edge">
<title>section_113&#45;&gt;section_225</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14761.6219,-10882.3011C15112.5201,-10876.9887 16566.749,-10853.5514 16607,-10829.4191 18586.532,-9642.5999 19254.6534,-6432.1571 19319.6332,-6096.7511"/>
<polygon fill="#000000" stroke="#000000" points="19323.1641,-6096.9233 19321.6149,-6086.4423 19316.29,-6095.6017 19323.1641,-6096.9233"/>
</g>
<!-- leaf_116 -->
<g id="node117" class="node">
<title>leaf_116</title>
<polygon fill="none" stroke="#c0c0c0" points="7613,-1047.5032 7191,-1047.5032 7191,-991.7002 7613,-991.7002 7613,-1047.5032"/>
<text text-anchor="middle" x="7402" y="-1000.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">This is all code I wrote to make the library more useable.</text>
</g>
<!-- raw_115&#45;&gt;leaf_116 -->
<g id="edge116" class="edge">
<title>raw_115&#45;&gt;leaf_116</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7480.2005,-6050.0456C7483.2379,-5768.7622 7518.7124,-2319.0326 7443,-1307.2021 7436.2648,-1217.1915 7418.909,-1112.475 7409.0737,-1057.6039"/>
<polygon fill="#000000" stroke="#000000" points="7412.4943,-1056.8506 7407.2706,-1047.6331 7405.606,-1058.0963 7412.4943,-1056.8506"/>
</g>
<!-- leaf_118 -->
<g id="node119" class="node">
<title>leaf_118</title>
<polygon fill="none" stroke="#c0c0c0" points="7864.5,-1039.5038 7631.5,-1039.5038 7631.5,-999.6996 7864.5,-999.6996 7864.5,-1039.5038"/>
<text text-anchor="middle" x="7748" y="-1008.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">© 2019 Sam Putman, MIT license.</text>
</g>
<!-- raw_117&#45;&gt;leaf_118 -->
<g id="edge118" class="edge">
<title>raw_117&#45;&gt;leaf_118</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7551.7526,-6050.1039C7547.5721,-5739.043 7493.0078,-1543.5226 7588,-1307.2021 7596.2081,-1286.7822 7609.3823,-1289.2338 7622,-1271.2021 7674.1437,-1196.6846 7717.0842,-1097.4851 7736.6296,-1048.9139"/>
<polygon fill="#000000" stroke="#000000" points="7739.8823,-1050.206 7740.3315,-1039.6207 7733.3793,-1047.6155 7739.8823,-1050.206"/>
</g>
<!-- leaf_123 -->
<g id="node124" class="node">
<title>leaf_123</title>
<polygon fill="none" stroke="#c0c0c0" points="8011,-1037.6017 7883,-1037.6017 7883,-1001.6017 8011,-1001.6017 8011,-1037.6017"/>
<text text-anchor="middle" x="7947" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">*** sql.san(str)</text>
</g>
<!-- header_120&#45;&gt;leaf_123 -->
<g id="edge123" class="edge">
<title>header_120&#45;&gt;leaf_123</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M7970.9131,-6050.0293C7969.4141,-5734.6966 7949.0027,-1440.8976 7947.1364,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="7950.6354,-1048.0489 7947.0878,-1038.0657 7943.6354,-1048.0822 7950.6354,-1048.0489"/>
</g>
<!-- raw_124 -->
<g id="node125" class="node">
<title>raw_124</title>
<ellipse fill="none" stroke="#000000" cx="8056" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="8056" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_121&#45;&gt;raw_124 -->
<g id="edge124" class="edge">
<title>prose_121&#45;&gt;raw_124</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8086.8877,-6050.0293C8084.9515,-5734.6966 8058.5868,-1440.8976 8056.1762,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="8059.6748,-1048.044 8056.1134,-1038.0657 8052.6749,-1048.087 8059.6748,-1048.044"/>
</g>
<!-- leaf_126 -->
<g id="node127" class="node">
<title>leaf_126</title>
<polygon fill="none" stroke="#c0c0c0" points="8348.5,-1062.2027 8101.5,-1062.2027 8101.5,-977.0006 8348.5,-977.0006 8348.5,-1062.2027"/>
<text text-anchor="middle" x="8225" y="-1047.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function san(str)</text>
<text text-anchor="middle" x="8225" y="-1031.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return gsub(str, &quot;&#39;&quot;, &quot;&#39;&#39;&quot;)</text>
<text text-anchor="middle" x="8225" y="-1016.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="8225" y="-985.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;sqlayer.san = san</text>
</g>
<!-- codeblock_122&#45;&gt;leaf_126 -->
<g id="edge126" class="edge">
<title>codeblock_122&#45;&gt;leaf_126</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8225,-6050.0293C8225,-5740.2519 8225,-1590.9531 8225,-1072.6382"/>
<polygon fill="#000000" stroke="#000000" points="8228.5001,-1072.454 8225,-1062.4541 8221.5001,-1072.4541 8228.5001,-1072.454"/>
</g>
<!-- leaf_125 -->
<g id="node126" class="node">
<title>leaf_125</title>
<polygon fill="none" stroke="#c0c0c0" points="8048,-439.6021 7752,-439.6021 7752,-383.7992 8048,-383.7992 8048,-439.6021"/>
<text text-anchor="middle" x="7900" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">Sanitizes a string for SQL(ite) quoting.</text>
</g>
<!-- raw_124&#45;&gt;leaf_125 -->
<g id="edge125" class="edge">
<title>raw_124&#45;&gt;leaf_125</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8054.5439,-1001.389C8050.9584,-959.6546 8040.4701,-854.0722 8020,-768.0012 7991.7013,-649.0132 7940.5382,-513.3216 7915.1435,-449.128"/>
<polygon fill="#000000" stroke="#000000" points="7918.3895,-447.8188 7911.4429,-439.8191 7911.8847,-450.4048 7918.3895,-447.8188"/>
</g>
<!-- leaf_134 -->
<g id="node135" class="node">
<title>leaf_134</title>
<polygon fill="none" stroke="#c0c0c0" points="8515.5,-1037.6017 8366.5,-1037.6017 8366.5,-1001.6017 8515.5,-1001.6017 8515.5,-1037.6017"/>
<text text-anchor="middle" x="8441" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">*** sql.format(str)</text>
</g>
<!-- header_127&#45;&gt;leaf_134 -->
<g id="edge134" class="edge">
<title>header_127&#45;&gt;leaf_134</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8504.7683,-6050.0293C8500.7709,-5734.6966 8446.3406,-1440.8976 8441.3638,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="8444.8606,-1048.0205 8441.2341,-1038.0657 8437.8612,-1048.1093 8444.8606,-1048.0205"/>
</g>
<!-- raw_135 -->
<g id="node136" class="node">
<title>raw_135</title>
<ellipse fill="none" stroke="#000000" cx="8561" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="8561" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_128&#45;&gt;raw_135 -->
<g id="edge135" class="edge">
<title>prose_128&#45;&gt;raw_135</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8696.1765,-6050.1021C8698.3529,-5813.4843 8717.7993,-3317.4555 8591,-1307.2021 8584.9812,-1211.7814 8571.3137,-1099.1596 8564.7093,-1047.7432"/>
<polygon fill="#000000" stroke="#000000" points="8568.1678,-1047.1964 8563.4125,-1037.7287 8561.2258,-1048.0954 8568.1678,-1047.1964"/>
</g>
<!-- prespace_137 -->
<g id="node138" class="node">
<title>prespace_137</title>
<ellipse fill="none" stroke="#000000" cx="8652" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="8652" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_129&#45;&gt;prespace_137 -->
<g id="edge137" class="edge">
<title>prose_129&#45;&gt;prespace_137</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8909.6707,-6050.3333C8958.0816,-5809.1465 9457.5763,-3192.305 8737,-1307.2021 8729.5636,-1287.7476 8716.1524,-1289.9107 8707,-1271.2021 8670.1785,-1195.9346 8657.7931,-1096.0364 8653.7994,-1047.9034"/>
<polygon fill="#000000" stroke="#000000" points="8657.2663,-1047.3367 8653.0113,-1037.6338 8650.2868,-1047.8724 8657.2663,-1047.3367"/>
</g>
<!-- bold_138 -->
<g id="node139" class="node">
<title>bold_138</title>
<ellipse fill="none" stroke="#000000" cx="8743" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="8743" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">bold</text>
</g>
<!-- prose_129&#45;&gt;bold_138 -->
<g id="edge138" class="edge">
<title>prose_129&#45;&gt;bold_138</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8905.4098,-6050.0293C8895.2291,-5734.6966 8756.6017,-1440.8976 8743.9265,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="8747.4171,-1047.9475 8743.5961,-1038.0657 8740.4207,-1048.1734 8747.4171,-1047.9475"/>
</g>
<!-- raw_139 -->
<g id="node140" class="node">
<title>raw_139</title>
<ellipse fill="none" stroke="#000000" cx="8815" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="8815" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_129&#45;&gt;raw_139 -->
<g id="edge139" class="edge">
<title>prose_129&#45;&gt;raw_139</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8905.6705,-6050.0293C8899.9868,-5734.6966 8822.5936,-1440.8976 8815.5173,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="8819.0125,-1048.0009 8815.3328,-1038.0657 8812.0137,-1048.1272 8819.0125,-1048.0009"/>
</g>
<!-- prespace_140 -->
<g id="node141" class="node">
<title>prespace_140</title>
<ellipse fill="none" stroke="#000000" cx="8906" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="8906" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_129&#45;&gt;prespace_140 -->
<g id="edge140" class="edge">
<title>prose_129&#45;&gt;prespace_140</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8906,-6050.0293C8906,-5734.6966 8906,-1440.8976 8906,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="8909.5001,-1048.0656 8906,-1038.0657 8902.5001,-1048.0657 8909.5001,-1048.0656"/>
</g>
<!-- literal_141 -->
<g id="node142" class="node">
<title>literal_141</title>
<ellipse fill="none" stroke="#000000" cx="9002" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="9002" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_129&#45;&gt;literal_141 -->
<g id="edge141" class="edge">
<title>prose_129&#45;&gt;literal_141</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8906.3476,-6050.0293C8912.3436,-5734.6966 8993.9892,-1440.8976 9001.4543,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9004.9581,-1048.1304 9001.6489,-1038.0657 8997.9593,-1047.9973 9004.9581,-1048.1304"/>
</g>
<!-- raw_142 -->
<g id="node143" class="node">
<title>raw_142</title>
<ellipse fill="none" stroke="#000000" cx="9079" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="9079" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_129&#45;&gt;raw_142 -->
<g id="edge142" class="edge">
<title>prose_129&#45;&gt;raw_142</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8906.6264,-6050.0293C8917.4317,-5734.6966 9064.5638,-1440.8976 9078.0166,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9081.5227,-1048.1797 9078.3673,-1038.0657 9074.5268,-1047.9399 9081.5227,-1048.1797"/>
</g>
<!-- raw_149 -->
<g id="node150" class="node">
<title>raw_149</title>
<ellipse fill="none" stroke="#000000" cx="9308" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="9308" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_149 -->
<g id="edge149" class="edge">
<title>prose_130&#45;&gt;raw_149</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9914.7948,-6050.0293C9876.7386,-5734.5368 9358.2936,-1436.544 9311.39,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="9314.8414,-1047.0912 9310.1689,-1037.5824 9307.8918,-1047.9296 9314.8414,-1047.0912"/>
</g>
<!-- prespace_150 -->
<g id="node151" class="node">
<title>prespace_150</title>
<ellipse fill="none" stroke="#000000" cx="9408" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="9408" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_150 -->
<g id="edge150" class="edge">
<title>prose_130&#45;&gt;prespace_150</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9915.1569,-6050.0293C9883.3658,-5734.6966 9450.4741,-1440.8976 9410.8932,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9414.347,-1047.6641 9409.8615,-1038.0657 9407.3823,-1048.3664 9414.347,-1047.6641"/>
</g>
<!-- literal_151 -->
<g id="node152" class="node">
<title>literal_151</title>
<ellipse fill="none" stroke="#000000" cx="9568" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="9568" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_151 -->
<g id="edge151" class="edge">
<title>prose_130&#45;&gt;literal_151</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9915.7363,-6050.0293C9893.9384,-5734.6966 9597.1227,-1440.8976 9569.9838,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9573.4577,-1047.8005 9569.2764,-1038.0657 9566.4744,-1048.2833 9573.4577,-1047.8005"/>
</g>
<!-- raw_152 -->
<g id="node153" class="node">
<title>raw_152</title>
<ellipse fill="none" stroke="#000000" cx="9676" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="9676" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_152 -->
<g id="edge152" class="edge">
<title>prose_130&#45;&gt;raw_152</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9916.1273,-6050.0293C9901.0749,-5734.6966 9696.1105,-1440.8976 9677.3699,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9680.8543,-1047.8874 9676.8814,-1038.0657 9673.8623,-1048.2212 9680.8543,-1047.8874"/>
</g>
<!-- prespace_153 -->
<g id="node154" class="node">
<title>prespace_153</title>
<ellipse fill="none" stroke="#000000" cx="9783" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="9783" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_153 -->
<g id="edge153" class="edge">
<title>prose_130&#45;&gt;prespace_153</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9916.5148,-6050.0293C9908.1454,-5734.6966 9794.1818,-1440.8976 9783.7617,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9787.2542,-1047.9693 9783.4901,-1038.0657 9780.2567,-1048.1551 9787.2542,-1047.9693"/>
</g>
<!-- literal_154 -->
<g id="node155" class="node">
<title>literal_154</title>
<ellipse fill="none" stroke="#000000" cx="9879" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="9879" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_154 -->
<g id="edge154" class="edge">
<title>prose_130&#45;&gt;literal_154</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9916.8624,-6050.0293C9914.489,-5734.6966 9882.171,-1440.8976 9879.216,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9882.7142,-1048.039 9879.139,-1038.0657 9875.7144,-1048.0918 9882.7142,-1048.039"/>
</g>
<!-- raw_155 -->
<g id="node156" class="node">
<title>raw_155</title>
<ellipse fill="none" stroke="#000000" cx="9955" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="9955" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_155 -->
<g id="edge155" class="edge">
<title>prose_130&#45;&gt;raw_155</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9917.1376,-6050.0293C9919.511,-5734.6966 9951.829,-1440.8976 9954.784,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="9958.2856,-1048.0918 9954.861,-1038.0657 9951.2858,-1048.039 9958.2856,-1048.0918"/>
</g>
<!-- prespace_156 -->
<g id="node157" class="node">
<title>prespace_156</title>
<ellipse fill="none" stroke="#000000" cx="10046" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10046" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_156 -->
<g id="edge156" class="edge">
<title>prose_130&#45;&gt;prespace_156</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9917.4671,-6050.0293C9925.5242,-5734.6966 10035.2354,-1440.8976 10045.2667,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="10048.7716,-1048.1518 10045.5282,-1038.0657 10041.7738,-1047.973 10048.7716,-1048.1518"/>
</g>
<!-- literal_157 -->
<g id="node158" class="node">
<title>literal_157</title>
<ellipse fill="none" stroke="#000000" cx="10142" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10142" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_157 -->
<g id="edge157" class="edge">
<title>prose_130&#45;&gt;literal_157</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9917.8147,-6050.0293C9931.8678,-5734.6966 10123.2246,-1440.8976 10140.7211,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="10144.2284,-1048.2116 10141.1771,-1038.0657 10137.2353,-1047.8999 10144.2284,-1048.2116"/>
</g>
<!-- raw_158 -->
<g id="node159" class="node">
<title>raw_158</title>
<ellipse fill="none" stroke="#000000" cx="10223" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="10223" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_158 -->
<g id="edge158" class="edge">
<title>prose_130&#45;&gt;raw_158</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9918.108,-6050.0293C9937.2202,-5734.6966 10197.4654,-1440.8976 10221.2606,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="10224.7694,-1048.2591 10221.8809,-1038.0657 10217.7822,-1047.8356 10224.7694,-1048.2591"/>
</g>
<!-- prespace_159 -->
<g id="node160" class="node">
<title>prespace_159</title>
<ellipse fill="none" stroke="#000000" cx="10318" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10318" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_130&#45;&gt;prespace_159 -->
<g id="edge159" class="edge">
<title>prose_130&#45;&gt;prespace_159</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9918.452,-6050.0293C9943.4977,-5734.6966 10284.5381,-1440.8976 10315.7207,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="10319.2306,-1048.3114 10316.5335,-1038.0657 10312.2526,-1047.7571 10319.2306,-1048.3114"/>
</g>
<!-- literal_160 -->
<g id="node161" class="node">
<title>literal_160</title>
<ellipse fill="none" stroke="#000000" cx="10417" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="10417" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_130&#45;&gt;literal_160 -->
<g id="edge160" class="edge">
<title>prose_130&#45;&gt;literal_160</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9918.8105,-6050.0293C9950.0554,-5734.5368 10375.708,-1436.544 10414.2167,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="10417.7166,-1047.8787 10415.2193,-1037.5824 10410.7507,-1047.1887 10417.7166,-1047.8787"/>
</g>
<!-- raw_161 -->
<g id="node162" class="node">
<title>raw_161</title>
<ellipse fill="none" stroke="#000000" cx="10544" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="10544" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_130&#45;&gt;raw_161 -->
<g id="edge161" class="edge">
<title>prose_130&#45;&gt;raw_161</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9919.2704,-6050.0293C9958.4514,-5734.5368 10492.2199,-1436.544 10540.5098,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="10544.0078,-1047.9375 10541.767,-1037.5824 10537.0611,-1047.0748 10544.0078,-1047.9375"/>
</g>
<!-- raw_175 -->
<g id="node176" class="node">
<title>raw_175</title>
<ellipse fill="none" stroke="#000000" cx="10783" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="10783" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_175 -->
<g id="edge175" class="edge">
<title>prose_131&#45;&gt;raw_175</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11244.3235,-6050.0293C11215.3907,-5734.5368 10821.2364,-1436.544 10785.5773,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="10789.0476,-1047.2209 10784.6489,-1037.5824 10782.0769,-1047.8602 10789.0476,-1047.2209"/>
</g>
<!-- prespace_176 -->
<g id="node177" class="node">
<title>prespace_176</title>
<ellipse fill="none" stroke="#000000" cx="10936" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="10936" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_131&#45;&gt;prespace_176 -->
<g id="edge176" class="edge">
<title>prose_131&#45;&gt;prespace_176</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11244.8775,-6050.0293C11225.5155,-5734.6966 10961.8683,-1440.8976 10937.7621,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="10941.2401,-1047.8323 10937.1337,-1038.0657 10934.2533,-1048.2614 10941.2401,-1047.8323"/>
</g>
<!-- literal_177 -->
<g id="node178" class="node">
<title>literal_177</title>
<ellipse fill="none" stroke="#000000" cx="11063" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="11063" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_131&#45;&gt;literal_177 -->
<g id="edge177" class="edge">
<title>prose_131&#45;&gt;literal_177</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11245.3374,-6050.0293C11233.9075,-5734.6966 11078.2707,-1440.8976 11064.0402,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="11067.5293,-1047.9323 11063.6693,-1038.0657 11060.5339,-1048.1859 11067.5293,-1047.9323"/>
</g>
<!-- raw_178 -->
<g id="node179" class="node">
<title>raw_178</title>
<ellipse fill="none" stroke="#000000" cx="11155" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="11155" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_178 -->
<g id="edge178" class="edge">
<title>prose_131&#45;&gt;raw_178</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11245.6705,-6050.0293C11239.9868,-5734.6966 11162.5936,-1440.8976 11155.5173,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="11159.0125,-1048.0009 11155.3328,-1038.0657 11152.0137,-1048.1272 11159.0125,-1048.0009"/>
</g>
<!-- prespace_179 -->
<g id="node180" class="node">
<title>prespace_179</title>
<ellipse fill="none" stroke="#000000" cx="11246" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="11246" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_131&#45;&gt;prespace_179 -->
<g id="edge179" class="edge">
<title>prose_131&#45;&gt;prespace_179</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11246,-6050.0293C11246,-5734.6966 11246,-1440.8976 11246,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="11249.5001,-1048.0656 11246,-1038.0657 11242.5001,-1048.0657 11249.5001,-1048.0656"/>
</g>
<!-- literal_180 -->
<g id="node181" class="node">
<title>literal_180</title>
<ellipse fill="none" stroke="#000000" cx="11367" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="11367" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_131&#45;&gt;literal_180 -->
<g id="edge180" class="edge">
<title>prose_131&#45;&gt;literal_180</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11246.4381,-6050.0293C11253.9956,-5734.6966 11356.903,-1440.8976 11366.3122,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="11369.8168,-1048.1467 11366.5575,-1038.0657 11362.8188,-1047.9789 11369.8168,-1048.1467"/>
</g>
<!-- raw_181 -->
<g id="node182" class="node">
<title>raw_181</title>
<ellipse fill="none" stroke="#000000" cx="11481" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="11481" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_181 -->
<g id="edge181" class="edge">
<title>prose_131&#45;&gt;raw_181</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11246.8509,-6050.0293C11261.5286,-5734.6966 11461.3901,-1440.8976 11479.6642,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="11483.1717,-1048.2176 11480.1406,-1038.0657 11476.1793,-1047.8921 11483.1717,-1048.2176"/>
</g>
<!-- prespace_182 -->
<g id="node183" class="node">
<title>prespace_182</title>
<ellipse fill="none" stroke="#000000" cx="11623" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="11623" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_131&#45;&gt;prespace_182 -->
<g id="edge182" class="edge">
<title>prose_131&#45;&gt;prespace_182</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11247.3651,-6050.0293C11270.9118,-5734.6966 11591.5408,-1440.8976 11620.8571,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="11624.3668,-1048.2986 11621.6212,-1038.0657 11617.3862,-1047.7773 11624.3668,-1048.2986"/>
</g>
<!-- literal_183 -->
<g id="node184" class="node">
<title>literal_183</title>
<ellipse fill="none" stroke="#000000" cx="11740" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="11740" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_131&#45;&gt;literal_183 -->
<g id="edge183" class="edge">
<title>prose_131&#45;&gt;literal_183</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11247.7888,-6050.0293C11278.6587,-5734.5368 11699.2035,-1436.544 11737.2501,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="11740.7501,-1047.8757 11738.2406,-1037.5824 11733.7834,-1047.194 11740.7501,-1047.8757"/>
</g>
<!-- raw_184 -->
<g id="node185" class="node">
<title>raw_184</title>
<ellipse fill="none" stroke="#000000" cx="11912" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="11912" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_131&#45;&gt;raw_184 -->
<g id="edge184" class="edge">
<title>prose_131&#45;&gt;raw_184</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11248.4116,-6050.0293C11290.0297,-5734.5368 11856.9991,-1436.544 11908.2927,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="11911.7901,-1047.9542 11909.6281,-1037.5824 11904.8502,-1047.0387 11911.7901,-1047.9542"/>
</g>
<!-- raw_195 -->
<g id="node196" class="node">
<title>raw_195</title>
<ellipse fill="none" stroke="#000000" cx="12207" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="12207" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_132&#45;&gt;raw_195 -->
<g id="edge195" class="edge">
<title>prose_132&#45;&gt;raw_195</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12297.6705,-6050.0293C12291.9868,-5734.6966 12214.5936,-1440.8976 12207.5173,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="12211.0125,-1048.0009 12207.3328,-1038.0657 12204.0137,-1048.1272 12211.0125,-1048.0009"/>
</g>
<!-- prespace_196 -->
<g id="node197" class="node">
<title>prespace_196</title>
<ellipse fill="none" stroke="#000000" cx="12298" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="12298" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_132&#45;&gt;prespace_196 -->
<g id="edge196" class="edge">
<title>prose_132&#45;&gt;prespace_196</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12298,-6050.0293C12298,-5734.6966 12298,-1440.8976 12298,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="12301.5001,-1048.0656 12298,-1038.0657 12294.5001,-1048.0657 12301.5001,-1048.0656"/>
</g>
<!-- literal_197 -->
<g id="node198" class="node">
<title>literal_197</title>
<ellipse fill="none" stroke="#000000" cx="12394" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="12394" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_132&#45;&gt;literal_197 -->
<g id="edge197" class="edge">
<title>prose_132&#45;&gt;literal_197</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12298.3476,-6050.0293C12304.3436,-5734.6966 12385.9892,-1440.8976 12393.4543,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="12396.9581,-1048.1304 12393.6489,-1038.0657 12389.9593,-1047.9973 12396.9581,-1048.1304"/>
</g>
<!-- raw_198 -->
<g id="node199" class="node">
<title>raw_198</title>
<ellipse fill="none" stroke="#000000" cx="12470" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="12470" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_132&#45;&gt;raw_198 -->
<g id="edge198" class="edge">
<title>prose_132&#45;&gt;raw_198</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12298.6228,-6050.0293C12309.3656,-5734.6966 12455.6472,-1440.8976 12469.0223,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="12472.5284,-1048.1791 12469.371,-1038.0657 12465.5324,-1047.9407 12472.5284,-1048.1791"/>
</g>
<!-- leaf_203 -->
<g id="node204" class="node">
<title>leaf_203</title>
<polygon fill="none" stroke="#c0c0c0" points="12965,-1177.6023 12515,-1177.6023 12515,-861.6011 12965,-861.6011 12965,-1177.6023"/>
<text text-anchor="middle" x="12740" y="-1162.402" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function sqlayer.format(str, ...)</text>
<text text-anchor="middle" x="12740" y="-1147.002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local argv = {...}</text>
<text text-anchor="middle" x="12740" y="-1131.6019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;str = gsub(str, &quot;%%s&quot;, &quot;&#39;%%s&#39;&quot;):gsub(&quot;&#39;&#39;%%s&#39;&#39;&quot;, &quot;&#39;%%s&#39;&quot;)</text>
<text text-anchor="middle" x="12740" y="-1116.2019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;for i, v in ipairs(argv) do</text>
<text text-anchor="middle" x="12740" y="-1100.8019" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if type(v) == &quot;string&quot; then</text>
<text text-anchor="middle" x="12740" y="-1085.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;argv[i] = san(v)</text>
<text text-anchor="middle" x="12740" y="-1070.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif type(v) == &quot;cdata&quot; then</text>
<text text-anchor="middle" x="12740" y="-1054.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; assume this is a number of some kind</text>
<text text-anchor="middle" x="12740" y="-1039.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;argv[i] = tonumber(v)</text>
<text text-anchor="middle" x="12740" y="-1023.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="12740" y="-1008.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;argv[i] = v</text>
<text text-anchor="middle" x="12740" y="-993.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="12740" y="-977.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="12740" y="-962.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local success, ret = pcall(format, str, unpack(argv))</text>
<text text-anchor="middle" x="12740" y="-946.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="12740" y="-931.4015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return ret</text>
<text text-anchor="middle" x="12740" y="-916.0015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="12740" y="-900.6015" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return success, ret</text>
<text text-anchor="middle" x="12740" y="-885.2014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="12740" y="-869.8014" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
</g>
<!-- codeblock_133&#45;&gt;leaf_203 -->
<g id="edge203" class="edge">
<title>codeblock_133&#45;&gt;leaf_203</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12588.5504,-6050.0293C12597.3709,-5757.0543 12709.587,-2029.7755 12734.9351,-1187.8339"/>
<polygon fill="#000000" stroke="#000000" points="12738.4358,-1187.8608 12735.2384,-1177.76 12731.4389,-1187.6501 12738.4358,-1187.8608"/>
</g>
<!-- leaf_136 -->
<g id="node137" class="node">
<title>leaf_136</title>
<polygon fill="none" stroke="#c0c0c0" points="8600,-454.901 8066,-454.901 8066,-368.5003 8600,-368.5003 8600,-454.901"/>
<text text-anchor="middle" x="8333" y="-407.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">The SQLite bindings I&#39;m using support only an impoverished subset of the</text>
<text text-anchor="middle" x="8333" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">SQLite binds. &#160;In the meantime we&#39;re going to use format strings, which at</text>
<text text-anchor="middle" x="8333" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">least typecheck parameters.</text>
</g>
<!-- raw_135&#45;&gt;leaf_136 -->
<g id="edge136" class="edge">
<title>raw_135&#45;&gt;leaf_136</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8560.4647,-1001.4201C8558.7698,-959.3126 8551.835,-852.2652 8524,-768.0012 8485.9715,-652.879 8412.2968,-530.887 8368.3982,-463.7151"/>
<polygon fill="#000000" stroke="#000000" points="8371.0895,-461.4376 8362.6713,-455.0046 8365.2405,-465.2832 8371.0895,-461.4376"/>
</g>
<!-- leaf_143 -->
<g id="node144" class="node">
<title>leaf_143</title>
<polygon fill="none" stroke="#c0c0c0" points="8672,-429.7006 8618,-429.7006 8618,-393.7006 8672,-393.7006 8672,-429.7006"/>
</g>
<!-- prespace_137&#45;&gt;leaf_143 -->
<g id="edge143" class="edge">
<title>prespace_137&#45;&gt;leaf_143</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8651.7905,-1001.4084C8650.7952,-914.9756 8646.5424,-545.6488 8645.3261,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="8648.8237,-439.782 8645.2087,-429.823 8641.8242,-439.8626 8648.8237,-439.782"/>
</g>
<!-- leaf_144 -->
<g id="node145" class="node">
<title>leaf_144</title>
<polygon fill="none" stroke="#c0c0c0" points="8748,-429.7006 8690,-429.7006 8690,-393.7006 8748,-393.7006 8748,-429.7006"/>
<text text-anchor="middle" x="8719" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">Update</text>
</g>
<!-- bold_138&#45;&gt;leaf_144 -->
<g id="edge144" class="edge">
<title>bold_138&#45;&gt;leaf_144</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8742.2817,-1001.4084C8738.8693,-914.9756 8724.2883,-545.6488 8720.1181,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="8723.6073,-439.6771 8719.7155,-429.823 8716.6128,-439.9533 8723.6073,-439.6771"/>
</g>
<!-- leaf_145 -->
<g id="node146" class="node">
<title>leaf_145</title>
<polygon fill="none" stroke="#c0c0c0" points="8859.5,-429.7006 8766.5,-429.7006 8766.5,-393.7006 8859.5,-393.7006 8859.5,-429.7006"/>
<text text-anchor="middle" x="8813" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> I&#39;ve added</text>
</g>
<!-- raw_139&#45;&gt;leaf_145 -->
<g id="edge145" class="edge">
<title>raw_139&#45;&gt;leaf_145</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8814.9401,-1001.4084C8814.6558,-914.9756 8813.4407,-545.6488 8813.0932,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="8816.5926,-439.8114 8813.0596,-429.823 8809.5926,-439.8345 8816.5926,-439.8114"/>
</g>
<!-- leaf_146 -->
<g id="node147" class="node">
<title>leaf_146</title>
<polygon fill="none" stroke="#c0c0c0" points="8932,-429.7006 8878,-429.7006 8878,-393.7006 8932,-393.7006 8932,-429.7006"/>
<text text-anchor="middle" x="8905" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_140&#45;&gt;leaf_146 -->
<g id="edge146" class="edge">
<title>prespace_140&#45;&gt;leaf_146</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M8905.9701,-1001.4084C8905.8279,-914.9756 8905.2203,-545.6488 8905.0466,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="8908.5464,-439.8172 8905.0298,-429.823 8901.5464,-439.8287 8908.5464,-439.8172"/>
</g>
<!-- leaf_147 -->
<g id="node148" class="node">
<title>leaf_147</title>
<polygon fill="none" stroke="#c0c0c0" points="9008,-429.7006 8950,-429.7006 8950,-393.7006 9008,-393.7006 9008,-429.7006"/>
<text text-anchor="middle" x="8979" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">bindkv</text>
</g>
<!-- literal_141&#45;&gt;leaf_147 -->
<g id="edge147" class="edge">
<title>literal_141&#45;&gt;leaf_147</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9001.3117,-1001.4084C8998.0415,-914.9756 8984.0679,-545.6488 8980.0715,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="8983.5613,-439.6834 8979.6857,-429.823 8976.5663,-439.9482 8983.5613,-439.6834"/>
</g>
<!-- leaf_148 -->
<g id="node149" class="node">
<title>leaf_148</title>
<polygon fill="none" stroke="#c0c0c0" points="9133.5,-429.7006 9026.5,-429.7006 9026.5,-393.7006 9133.5,-393.7006 9133.5,-429.7006"/>
<text text-anchor="middle" x="9080" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> which helps.</text>
</g>
<!-- raw_142&#45;&gt;leaf_148 -->
<g id="edge148" class="edge">
<title>raw_142&#45;&gt;leaf_148</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9079.0299,-1001.4084C9079.1721,-914.9756 9079.7797,-545.6488 9079.9534,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="9083.4536,-439.8287 9079.9702,-429.823 9076.4536,-439.8172 9083.4536,-439.8287"/>
</g>
<!-- leaf_162 -->
<g id="node163" class="node">
<title>leaf_162</title>
<polygon fill="none" stroke="#c0c0c0" points="9206,-431.6027 9152,-431.6027 9152,-391.7986 9206,-391.7986 9206,-431.6027"/>
<text text-anchor="middle" x="9179" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">This</text>
</g>
<!-- raw_149&#45;&gt;leaf_162 -->
<g id="edge162" class="edge">
<title>raw_149&#45;&gt;leaf_162</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9300.969,-1002.1034C9283.4452,-957.734 9237.616,-836.905 9215,-732.0012 9192.2882,-626.6536 9183.3742,-498.5371 9180.3517,-441.5312"/>
<polygon fill="#000000" stroke="#000000" points="9183.841,-441.2302 9179.8386,-431.4205 9176.85,-441.5851 9183.841,-441.2302"/>
</g>
<!-- leaf_163 -->
<g id="node164" class="node">
<title>leaf_163</title>
<polygon fill="none" stroke="#c0c0c0" points="9278,-429.7006 9224,-429.7006 9224,-393.7006 9278,-393.7006 9278,-429.7006"/>
<text text-anchor="middle" x="9251" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_150&#45;&gt;leaf_163 -->
<g id="edge163" class="edge">
<title>prespace_150&#45;&gt;leaf_163</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9407.8309,-1001.5597C9406.553,-957.4236 9397.9096,-842.2068 9344,-768.0012 9326.3891,-743.7601 9302.9083,-757.3922 9287,-732.0012 9228.4047,-638.4784 9238.727,-498.9493 9246.5555,-439.8098"/>
<polygon fill="#000000" stroke="#000000" points="9250.046,-440.1215 9247.971,-429.7319 9243.114,-439.1478 9250.046,-440.1215"/>
</g>
<!-- leaf_164 -->
<g id="node165" class="node">
<title>leaf_164</title>
<polygon fill="none" stroke="#c0c0c0" points="9354,-429.7006 9296,-429.7006 9296,-393.7006 9354,-393.7006 9354,-429.7006"/>
<text text-anchor="middle" x="9325" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">format</text>
</g>
<!-- literal_151&#45;&gt;leaf_164 -->
<g id="edge164" class="edge">
<title>literal_151&#45;&gt;leaf_164</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9565.5286,-1001.5868C9558.3405,-955.9882 9533.2977,-834.8825 9463,-768.0012 9428.7773,-735.4418 9392.3949,-768.9776 9363,-732.0012 9293.8023,-644.9563 9309.0923,-500.2272 9319.4332,-439.679"/>
<polygon fill="#000000" stroke="#000000" points="9322.9,-440.1752 9321.223,-429.714 9316.0103,-438.9377 9322.9,-440.1752"/>
</g>
<!-- leaf_165 -->
<g id="node166" class="node">
<title>leaf_165</title>
<polygon fill="none" stroke="#c0c0c0" points="9773.5,-429.7006 9372.5,-429.7006 9372.5,-393.7006 9773.5,-393.7006 9773.5,-429.7006"/>
<text text-anchor="middle" x="9573" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> command sanitizes string inputs, and also replaces any</text>
</g>
<!-- raw_152&#45;&gt;leaf_165 -->
<g id="edge165" class="edge">
<title>raw_152&#45;&gt;leaf_165</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9672.9174,-1001.4084C9658.2578,-914.8882 9595.569,-544.9017 9577.7445,-439.7025"/>
<polygon fill="#000000" stroke="#000000" points="9581.192,-439.0977 9576.0706,-429.823 9574.2904,-440.2672 9581.192,-439.0977"/>
</g>
<!-- leaf_166 -->
<g id="node167" class="node">
<title>leaf_166</title>
<polygon fill="none" stroke="#c0c0c0" points="9846,-429.7006 9792,-429.7006 9792,-393.7006 9846,-393.7006 9846,-429.7006"/>
<text text-anchor="middle" x="9819" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_153&#45;&gt;leaf_166 -->
<g id="edge166" class="edge">
<title>prespace_153&#45;&gt;leaf_166</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9784.0774,-1001.4084C9789.196,-914.9756 9811.0676,-545.6488 9817.3228,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="9820.8294,-440.0124 9817.9268,-429.823 9813.8417,-439.5985 9820.8294,-440.0124"/>
</g>
<!-- leaf_167 -->
<g id="node168" class="node">
<title>leaf_167</title>
<polygon fill="none" stroke="#c0c0c0" points="9918,-429.7006 9864,-429.7006 9864,-393.7006 9918,-393.7006 9918,-429.7006"/>
<text text-anchor="middle" x="9891" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">%s</text>
</g>
<!-- literal_154&#45;&gt;leaf_167 -->
<g id="edge167" class="edge">
<title>literal_154&#45;&gt;leaf_167</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9879.3591,-1001.4084C9881.0653,-914.9756 9888.3559,-545.6488 9890.4409,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="9893.9441,-439.8901 9890.6423,-429.823 9886.9455,-439.7519 9893.9441,-439.8901"/>
</g>
<!-- leaf_168 -->
<g id="node169" class="node">
<title>leaf_168</title>
<polygon fill="none" stroke="#c0c0c0" points="9990,-431.6027 9936,-431.6027 9936,-391.7986 9990,-391.7986 9990,-431.6027"/>
<text text-anchor="middle" x="9963" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">with</text>
</g>
<!-- raw_155&#45;&gt;leaf_168 -->
<g id="edge168" class="edge">
<title>raw_155&#45;&gt;leaf_168</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M9955.2394,-1001.4084C9956.3705,-915.4612 9961.1827,-549.7897 9962.6035,-441.8273"/>
<polygon fill="#000000" stroke="#000000" points="9966.1056,-441.6827 9962.7376,-431.6375 9959.1062,-441.5905 9966.1056,-441.6827"/>
</g>
<!-- leaf_169 -->
<g id="node170" class="node">
<title>leaf_169</title>
<polygon fill="none" stroke="#c0c0c0" points="10062,-429.7006 10008,-429.7006 10008,-393.7006 10062,-393.7006 10062,-429.7006"/>
<text text-anchor="middle" x="10035" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_156&#45;&gt;leaf_169 -->
<g id="edge169" class="edge">
<title>prespace_156&#45;&gt;leaf_169</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10045.6708,-1001.4084C10044.1068,-914.9756 10037.4238,-545.6488 10035.5125,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="10039.0084,-439.758 10035.3279,-429.823 10032.0095,-439.8847 10039.0084,-439.758"/>
</g>
<!-- leaf_170 -->
<g id="node171" class="node">
<title>leaf_170</title>
<polygon fill="none" stroke="#c0c0c0" points="10134,-429.7006 10080,-429.7006 10080,-393.7006 10134,-393.7006 10134,-429.7006"/>
<text text-anchor="middle" x="10107" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">&#39;%s&#39;</text>
</g>
<!-- literal_157&#45;&gt;leaf_170 -->
<g id="edge170" class="edge">
<title>literal_157&#45;&gt;leaf_170</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10140.9525,-1001.4084C10135.9761,-914.9756 10114.7121,-545.6488 10108.6306,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="10112.1125,-439.6052 10108.0434,-429.823 10105.1241,-440.0076 10112.1125,-439.6052"/>
</g>
<!-- leaf_171 -->
<g id="node172" class="node">
<title>leaf_171</title>
<polygon fill="none" stroke="#c0c0c0" points="10301.5,-429.7006 10152.5,-429.7006 10152.5,-393.7006 10301.5,-393.7006 10301.5,-429.7006"/>
<text text-anchor="middle" x="10227" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> without making any</text>
</g>
<!-- raw_158&#45;&gt;leaf_171 -->
<g id="edge171" class="edge">
<title>raw_158&#45;&gt;leaf_171</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10223.1197,-1001.4084C10223.6884,-914.9756 10226.1186,-545.6488 10226.8136,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="10230.3148,-439.8458 10226.8808,-429.823 10223.3149,-439.7997 10230.3148,-439.8458"/>
</g>
<!-- leaf_172 -->
<g id="node173" class="node">
<title>leaf_172</title>
<polygon fill="none" stroke="#c0c0c0" points="10374,-429.7006 10320,-429.7006 10320,-393.7006 10374,-393.7006 10374,-429.7006"/>
<text text-anchor="middle" x="10347" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_159&#45;&gt;leaf_172 -->
<g id="edge172" class="edge">
<title>prespace_159&#45;&gt;leaf_172</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10318.8679,-1001.4084C10322.9912,-914.9756 10340.61,-545.6488 10345.6489,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="10349.1549,-439.9784 10346.1355,-429.823 10342.1628,-439.6448 10349.1549,-439.9784"/>
</g>
<!-- leaf_173 -->
<g id="node174" class="node">
<title>leaf_173</title>
<polygon fill="none" stroke="#c0c0c0" points="10450,-429.7006 10392,-429.7006 10392,-393.7006 10450,-393.7006 10450,-429.7006"/>
<text text-anchor="middle" x="10421" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">&#39;&#39;%s&#39;&#39;</text>
</g>
<!-- literal_160&#45;&gt;leaf_173 -->
<g id="edge173" class="edge">
<title>literal_160&#45;&gt;leaf_173</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10417.1197,-1001.4084C10417.6884,-914.9756 10420.1186,-545.6488 10420.8136,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="10424.3148,-439.8458 10420.8808,-429.823 10417.3149,-439.7997 10424.3148,-439.8458"/>
</g>
<!-- leaf_174 -->
<g id="node175" class="node">
<title>leaf_174</title>
<polygon fill="none" stroke="#c0c0c0" points="10722,-431.0012 10468,-431.0012 10468,-392.4001 10722,-392.4001 10722,-431.0012"/>
<text text-anchor="middle" x="10595" y="-415.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">, or more accurately trimming them</text>
<text text-anchor="middle" x="10595" y="-400.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">if it creates them.</text>
</g>
<!-- raw_161&#45;&gt;leaf_174 -->
<g id="edge174" class="edge">
<title>raw_161&#45;&gt;leaf_174</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10545.5263,-1001.4084C10552.7529,-915.2702 10583.5514,-548.1631 10592.5326,-441.1113"/>
<polygon fill="#000000" stroke="#000000" points="10596.0305,-441.2815 10593.3789,-431.0238 10589.055,-440.6962 10596.0305,-441.2815"/>
</g>
<!-- leaf_185 -->
<g id="node186" class="node">
<title>leaf_185</title>
<polygon fill="none" stroke="#c0c0c0" points="10794,-431.6027 10740,-431.6027 10740,-391.7986 10794,-391.7986 10794,-431.6027"/>
<text text-anchor="middle" x="10767" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">So</text>
</g>
<!-- raw_175&#45;&gt;leaf_185 -->
<g id="edge185" class="edge">
<title>raw_175&#45;&gt;leaf_185</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10782.5212,-1001.4084C10780.259,-915.4612 10770.6345,-549.7897 10767.7929,-441.8273"/>
<polygon fill="#000000" stroke="#000000" points="10771.2867,-441.5419 10767.5247,-431.6375 10764.2892,-441.7262 10771.2867,-441.5419"/>
</g>
<!-- leaf_186 -->
<g id="node187" class="node">
<title>leaf_186</title>
<polygon fill="none" stroke="#c0c0c0" points="10866,-429.7006 10812,-429.7006 10812,-393.7006 10866,-393.7006 10866,-429.7006"/>
<text text-anchor="middle" x="10839" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_176&#45;&gt;leaf_186 -->
<g id="edge186" class="edge">
<title>prespace_176&#45;&gt;leaf_186</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M10931.5312,-1001.5463C10920.4942,-956.3875 10891.6366,-834.788 10875,-732.0012 10857.6494,-624.8031 10845.9169,-496.0688 10841.2553,-440.051"/>
<polygon fill="#000000" stroke="#000000" points="10844.724,-439.5251 10840.4177,-429.8449 10837.7475,-440.0977 10844.724,-439.5251"/>
</g>
<!-- leaf_187 -->
<g id="node188" class="node">
<title>leaf_187</title>
<polygon fill="none" stroke="#c0c0c0" points="11110,-429.7006 10884,-429.7006 10884,-393.7006 11110,-393.7006 11110,-429.7006"/>
<text text-anchor="middle" x="10997" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">sql.format(&quot;it&#39;s %s!&quot;, &quot;it&#39;s&quot;)</text>
</g>
<!-- literal_177&#45;&gt;leaf_187 -->
<g id="edge187" class="edge">
<title>literal_177&#45;&gt;leaf_187</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11061.0248,-1001.4084C11051.6407,-914.9756 11011.5428,-545.6488 11000.0749,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="11003.5265,-439.3867 10998.9675,-429.823 10996.5674,-440.1423 11003.5265,-439.3867"/>
</g>
<!-- leaf_188 -->
<g id="node189" class="node">
<title>leaf_188</title>
<polygon fill="none" stroke="#c0c0c0" points="11182,-429.7006 11128,-429.7006 11128,-393.7006 11182,-393.7006 11182,-429.7006"/>
<text text-anchor="middle" x="11155" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> and</text>
</g>
<!-- raw_178&#45;&gt;leaf_188 -->
<g id="edge188" class="edge">
<title>raw_178&#45;&gt;leaf_188</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11155,-1001.4084C11155,-914.9756 11155,-545.6488 11155,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="11158.5001,-439.8229 11155,-429.823 11151.5001,-439.823 11158.5001,-439.8229"/>
</g>
<!-- leaf_189 -->
<g id="node190" class="node">
<title>leaf_189</title>
<polygon fill="none" stroke="#c0c0c0" points="11254,-429.7006 11200,-429.7006 11200,-393.7006 11254,-393.7006 11254,-429.7006"/>
<text text-anchor="middle" x="11227" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_179&#45;&gt;leaf_189 -->
<g id="edge189" class="edge">
<title>prespace_179&#45;&gt;leaf_189</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11245.4314,-1001.4084C11242.7299,-914.9756 11231.1866,-545.6488 11227.8852,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="11231.3772,-439.7087 11227.5664,-429.823 11224.3806,-439.9275 11231.3772,-439.7087"/>
</g>
<!-- leaf_190 -->
<g id="node191" class="node">
<title>leaf_190</title>
<polygon fill="none" stroke="#c0c0c0" points="11512,-429.7006 11272,-429.7006 11272,-393.7006 11512,-393.7006 11512,-429.7006"/>
<text text-anchor="middle" x="11392" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">sql.format(&quot;it&#39;s &#39;%s&#39;!&quot;, &quot;it&#39;s&quot;)</text>
</g>
<!-- literal_180&#45;&gt;leaf_190 -->
<g id="edge190" class="edge">
<title>literal_180&#45;&gt;leaf_190</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11367.7482,-1001.4084C11371.3028,-914.9756 11386.4914,-545.6488 11390.8353,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="11394.3408,-439.9584 11391.2547,-429.823 11387.3467,-439.6707 11394.3408,-439.9584"/>
</g>
<!-- leaf_191 -->
<g id="node192" class="node">
<title>leaf_191</title>
<polygon fill="none" stroke="#c0c0c0" points="11616,-431.6027 11530,-431.6027 11530,-391.7986 11616,-391.7986 11616,-431.6027"/>
<text text-anchor="middle" x="11573" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">both yield</text>
</g>
<!-- raw_181&#45;&gt;leaf_191 -->
<g id="edge191" class="edge">
<title>raw_181&#45;&gt;leaf_191</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11483.7534,-1001.4084C11496.7607,-915.4612 11552.1015,-549.7897 11568.4406,-441.8273"/>
<polygon fill="#000000" stroke="#000000" points="11571.9469,-442.0487 11569.9827,-431.6375 11565.0257,-441.0012 11571.9469,-442.0487"/>
</g>
<!-- leaf_192 -->
<g id="node193" class="node">
<title>leaf_192</title>
<polygon fill="none" stroke="#c0c0c0" points="11688,-429.7006 11634,-429.7006 11634,-393.7006 11688,-393.7006 11688,-429.7006"/>
<text text-anchor="middle" x="11661" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_182&#45;&gt;leaf_192 -->
<g id="edge192" class="edge">
<title>prespace_182&#45;&gt;leaf_192</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11624.1373,-1001.4084C11629.5402,-914.9756 11652.6269,-545.6488 11659.2296,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="11662.7364,-440.0219 11659.8672,-429.823 11655.75,-439.5851 11662.7364,-440.0219"/>
</g>
<!-- leaf_193 -->
<g id="node194" class="node">
<title>leaf_193</title>
<polygon fill="none" stroke="#c0c0c0" points="11813.5,-429.7006 11706.5,-429.7006 11706.5,-393.7006 11813.5,-393.7006 11813.5,-429.7006"/>
<text text-anchor="middle" x="11760" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">&quot;it&#39;s &#39;it&#39;&#39;s&quot;</text>
</g>
<!-- literal_183&#45;&gt;leaf_193 -->
<g id="edge193" class="edge">
<title>literal_183&#45;&gt;leaf_193</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11740.5986,-1001.4084C11743.4422,-914.9756 11755.5931,-545.6488 11759.0682,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="11762.573,-439.9327 11759.4038,-429.823 11755.5767,-439.7024 11762.573,-439.9327"/>
</g>
<!-- leaf_194 -->
<g id="node195" class="node">
<title>leaf_194</title>
<polygon fill="none" stroke="#c0c0c0" points="12184,-431.0012 11832,-431.0012 11832,-392.4001 12184,-392.4001 12184,-431.0012"/>
<text text-anchor="middle" x="12008" y="-415.9007" font-family="Inconsolata" font-size="14.00" fill="#000000">. &#160;I figure any apostrophes in the format string</text>
<text text-anchor="middle" x="12008" y="-400.5006" font-family="Inconsolata" font-size="14.00" fill="#000000">belong there.</text>
</g>
<!-- raw_184&#45;&gt;leaf_194 -->
<g id="edge194" class="edge">
<title>raw_184&#45;&gt;leaf_194</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M11914.8731,-1001.4084C11928.4761,-915.2702 11986.4498,-548.1631 12003.3555,-441.1113"/>
<polygon fill="#000000" stroke="#000000" points="12006.8457,-441.4474 12004.9485,-431.0238 11999.9314,-440.3555 12006.8457,-441.4474"/>
</g>
<!-- leaf_199 -->
<g id="node200" class="node">
<title>leaf_199</title>
<polygon fill="none" stroke="#c0c0c0" points="12393.5,-431.6027 12202.5,-431.6027 12202.5,-391.7986 12393.5,-391.7986 12393.5,-431.6027"/>
<text text-anchor="middle" x="12298" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">Failure to format returns</text>
</g>
<!-- raw_195&#45;&gt;leaf_199 -->
<g id="edge199" class="edge">
<title>raw_195&#45;&gt;leaf_199</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12209.5074,-1001.5918C12215.2744,-960.2782 12229.9857,-855.5104 12243,-768.0012 12260.9793,-647.1072 12283.5316,-503.3324 12293.2191,-441.9262"/>
<polygon fill="#000000" stroke="#000000" points="12296.7187,-442.2026 12294.8211,-431.7791 12289.8044,-441.1109 12296.7187,-442.2026"/>
</g>
<!-- leaf_200 -->
<g id="node201" class="node">
<title>leaf_200</title>
<polygon fill="none" stroke="#c0c0c0" points="12466,-429.7006 12412,-429.7006 12412,-393.7006 12466,-393.7006 12466,-429.7006"/>
<text text-anchor="middle" x="12439" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_196&#45;&gt;leaf_200 -->
<g id="edge200" class="edge">
<title>prespace_196&#45;&gt;leaf_200</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12297.8726,-1001.529C12298.3898,-957.8107 12304.7383,-844.326 12354,-768.0012 12368.4608,-745.596 12388.7232,-755.1278 12402,-732.0012 12456.8353,-636.4844 12449.237,-498.5888 12442.783,-439.8783"/>
<polygon fill="#000000" stroke="#000000" points="12446.2497,-439.3886 12441.6066,-429.8654 12439.2975,-440.2055 12446.2497,-439.3886"/>
</g>
<!-- leaf_201 -->
<g id="node202" class="node">
<title>leaf_201</title>
<polygon fill="none" stroke="#c0c0c0" points="12570,-429.7006 12484,-429.7006 12484,-393.7006 12570,-393.7006 12570,-429.7006"/>
<text text-anchor="middle" x="12527" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">false, err</text>
</g>
<!-- literal_197&#45;&gt;leaf_201 -->
<g id="edge201" class="edge">
<title>literal_197&#45;&gt;leaf_201</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12392.844,-1001.5051C12390.8948,-958.2102 12390.7503,-846.4309 12434,-768.0012 12445.71,-746.7662 12463.2552,-753.217 12475,-732.0012 12528.5727,-635.2274 12530.5566,-498.4826 12528.5721,-440.0077"/>
<polygon fill="#000000" stroke="#000000" points="12532.0568,-439.5576 12528.1518,-429.7087 12525.0626,-439.8432 12532.0568,-439.5576"/>
</g>
<!-- leaf_202 -->
<g id="node203" class="node">
<title>leaf_202</title>
<polygon fill="none" stroke="#c0c0c0" points="12642,-429.7006 12588,-429.7006 12588,-393.7006 12642,-393.7006 12642,-429.7006"/>
<text text-anchor="middle" x="12615" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_198&#45;&gt;leaf_202 -->
<g id="edge202" class="edge">
<title>raw_198&#45;&gt;leaf_202</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M12467.2704,-1001.3691C12461.6313,-956.8043 12453.2877,-840.6967 12506,-768.0012 12527.2358,-738.715 12558.2088,-761.6047 12579,-732.0012 12642.5612,-641.4999 12629.4388,-499.8364 12620.1513,-439.9442"/>
<polygon fill="#000000" stroke="#000000" points="12623.6045,-439.3737 12618.5372,-430.0692 12616.6962,-440.5029 12623.6045,-439.3737"/>
</g>
<!-- leaf_208 -->
<g id="node209" class="node">
<title>leaf_208</title>
<polygon fill="none" stroke="#c0c0c0" points="13174.5,-1037.6017 12983.5,-1037.6017 12983.5,-1001.6017 13174.5,-1001.6017 13174.5,-1037.6017"/>
<text text-anchor="middle" x="13079" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">*** sql.pexec(conn, stmt)</text>
</g>
<!-- header_204&#45;&gt;leaf_208 -->
<g id="edge208" class="edge">
<title>header_204&#45;&gt;leaf_208</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13079,-6050.0293C13079,-5734.6966 13079,-1440.8976 13079,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="13082.5001,-1048.0656 13079,-1038.0657 13075.5001,-1048.0657 13082.5001,-1048.0656"/>
</g>
<!-- raw_209 -->
<g id="node210" class="node">
<title>raw_209</title>
<ellipse fill="none" stroke="#000000" cx="13220" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="13220" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_205&#45;&gt;raw_209 -->
<g id="edge209" class="edge">
<title>prose_205&#45;&gt;raw_209</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13235.9421,-6050.0293C13234.9427,-5734.6966 13221.3351,-1440.8976 13220.0909,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="13223.5903,-1048.0545 13220.0585,-1038.0657 13216.5903,-1048.0768 13223.5903,-1048.0545"/>
</g>
<!-- raw_211 -->
<g id="node212" class="node">
<title>raw_211</title>
<ellipse fill="none" stroke="#000000" cx="13292" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="13292" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_206&#45;&gt;raw_211 -->
<g id="edge211" class="edge">
<title>prose_206&#45;&gt;raw_211</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13382.6705,-6050.0293C13376.9868,-5734.6966 13299.5936,-1440.8976 13292.5173,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="13296.0125,-1048.0009 13292.3328,-1038.0657 13289.0137,-1048.1272 13296.0125,-1048.0009"/>
</g>
<!-- prespace_212 -->
<g id="node213" class="node">
<title>prespace_212</title>
<ellipse fill="none" stroke="#000000" cx="13383" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="13383" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_206&#45;&gt;prespace_212 -->
<g id="edge212" class="edge">
<title>prose_206&#45;&gt;prespace_212</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13383,-6050.0293C13383,-5734.6966 13383,-1440.8976 13383,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="13386.5001,-1048.0656 13383,-1038.0657 13379.5001,-1048.0657 13386.5001,-1048.0656"/>
</g>
<!-- literal_213 -->
<g id="node214" class="node">
<title>literal_213</title>
<ellipse fill="none" stroke="#000000" cx="13479" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="13479" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_206&#45;&gt;literal_213 -->
<g id="edge213" class="edge">
<title>prose_206&#45;&gt;literal_213</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13383.3476,-6050.0293C13389.3436,-5734.6966 13470.9892,-1440.8976 13478.4543,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="13481.9581,-1048.1304 13478.6489,-1038.0657 13474.9593,-1047.9973 13481.9581,-1048.1304"/>
</g>
<!-- raw_214 -->
<g id="node215" class="node">
<title>raw_214</title>
<ellipse fill="none" stroke="#000000" cx="13555" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="13555" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_206&#45;&gt;raw_214 -->
<g id="edge214" class="edge">
<title>prose_206&#45;&gt;raw_214</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13383.6228,-6050.0293C13394.3656,-5734.6966 13540.6472,-1440.8976 13554.0223,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="13557.5284,-1048.1791 13554.371,-1038.0657 13550.5324,-1047.9407 13557.5284,-1048.1791"/>
</g>
<!-- leaf_219 -->
<g id="node220" class="node">
<title>leaf_219</title>
<polygon fill="none" stroke="#c0c0c0" points="14127.5,-1100.602 13600.5,-1100.602 13600.5,-938.6014 14127.5,-938.6014 14127.5,-1100.602"/>
<text text-anchor="middle" x="13864" y="-1085.4018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function sqlayer.pexec(conn, stmt, col_str)</text>
<text text-anchor="middle" x="13864" y="-1070.0018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#45;&#45; conn:exec(stmt)</text>
<text text-anchor="middle" x="13864" y="-1054.6018" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;col_str = col_str or &quot;hik&quot;</text>
<text text-anchor="middle" x="13864" y="-1039.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local success, result, nrow = pcall(conn.exec, conn, stmt, col_str)</text>
<text text-anchor="middle" x="13864" y="-1023.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if success then</text>
<text text-anchor="middle" x="13864" y="-1008.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return result, nrow</text>
<text text-anchor="middle" x="13864" y="-993.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="13864" y="-977.6016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false, result</text>
<text text-anchor="middle" x="13864" y="-962.2016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="13864" y="-946.8016" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
</g>
<!-- codeblock_207&#45;&gt;leaf_219 -->
<g id="edge219" class="edge">
<title>codeblock_207&#45;&gt;leaf_219</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13693.6192,-6050.0293C13703.8849,-5746.937 13838.6432,-1768.2507 13860.8978,-1111.1921"/>
<polygon fill="#000000" stroke="#000000" points="13864.4079,-1110.9521 13861.2485,-1100.8393 13857.4119,-1110.715 13864.4079,-1110.9521"/>
</g>
<!-- leaf_210 -->
<g id="node211" class="node">
<title>leaf_210</title>
<polygon fill="none" stroke="#c0c0c0" points="13110.5,-439.6021 12751.5,-439.6021 12751.5,-383.7992 13110.5,-383.7992 13110.5,-439.6021"/>
<text text-anchor="middle" x="12931" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">Executes the statement on conn in protected mode.</text>
</g>
<!-- raw_209&#45;&gt;leaf_210 -->
<g id="edge210" class="edge">
<title>raw_209&#45;&gt;leaf_210</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13222.3914,-1001.5389C13227.2551,-957.3561 13233.8946,-842.0422 13183,-768.0012 13164.5131,-741.1067 13142.288,-754.8651 13119,-732.0012 13032.3476,-646.9269 12971.4426,-513.6752 12945.2991,-449.175"/>
<polygon fill="#000000" stroke="#000000" points="12948.513,-447.7856 12941.549,-439.8011 12942.0138,-450.3857 12948.513,-447.7856"/>
</g>
<!-- leaf_215 -->
<g id="node216" class="node">
<title>leaf_215</title>
<polygon fill="none" stroke="#c0c0c0" points="13361.5,-431.6027 13128.5,-431.6027 13128.5,-391.7986 13361.5,-391.7986 13361.5,-431.6027"/>
<text text-anchor="middle" x="13245" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">Unwraps and returns success, or</text>
</g>
<!-- raw_211&#45;&gt;leaf_215 -->
<g id="edge215" class="edge">
<title>raw_211&#45;&gt;leaf_215</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13290.5934,-1001.4084C13283.9484,-915.4612 13255.6764,-549.7897 13247.3292,-441.8273"/>
<polygon fill="#000000" stroke="#000000" points="13250.802,-441.3379 13246.5414,-431.6375 13243.8228,-441.8776 13250.802,-441.3379"/>
</g>
<!-- leaf_216 -->
<g id="node217" class="node">
<title>leaf_216</title>
<polygon fill="none" stroke="#c0c0c0" points="13434,-429.7006 13380,-429.7006 13380,-393.7006 13434,-393.7006 13434,-429.7006"/>
<text text-anchor="middle" x="13407" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_212&#45;&gt;leaf_216 -->
<g id="edge216" class="edge">
<title>prespace_212&#45;&gt;leaf_216</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13383.7183,-1001.4084C13387.1307,-914.9756 13401.7117,-545.6488 13405.8819,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="13409.3872,-439.9533 13406.2845,-429.823 13402.3927,-439.6771 13409.3872,-439.9533"/>
</g>
<!-- leaf_217 -->
<g id="node218" class="node">
<title>leaf_217</title>
<polygon fill="none" stroke="#c0c0c0" points="13506,-429.7006 13452,-429.7006 13452,-393.7006 13506,-393.7006 13506,-429.7006"/>
<text text-anchor="middle" x="13479" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">false</text>
</g>
<!-- literal_213&#45;&gt;leaf_217 -->
<g id="edge217" class="edge">
<title>literal_213&#45;&gt;leaf_217</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13479,-1001.4084C13479,-914.9756 13479,-545.6488 13479,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="13482.5001,-439.8229 13479,-429.823 13475.5001,-439.823 13482.5001,-439.8229"/>
</g>
<!-- leaf_218 -->
<g id="node219" class="node">
<title>leaf_218</title>
<polygon fill="none" stroke="#c0c0c0" points="13617.5,-429.7006 13524.5,-429.7006 13524.5,-393.7006 13617.5,-393.7006 13617.5,-429.7006"/>
<text text-anchor="middle" x="13571" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> and error.</text>
</g>
<!-- raw_214&#45;&gt;leaf_218 -->
<g id="edge218" class="edge">
<title>raw_214&#45;&gt;leaf_218</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M13555.4788,-1001.4084C13557.7538,-914.9756 13567.4745,-545.6488 13570.2546,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="13573.7586,-439.9116 13570.523,-429.823 13566.761,-439.7274 13573.7586,-439.9116"/>
</g>
<!-- leaf_226 -->
<g id="node227" class="node">
<title>leaf_226</title>
<polygon fill="none" stroke="#c0c0c0" points="14302,-1037.6017 14146,-1037.6017 14146,-1001.6017 14302,-1001.6017 14302,-1037.6017"/>
<text text-anchor="middle" x="14224" y="-1016.1017" font-family="Inconsolata" font-size="14.00" fill="#000000">*** sql.lastid(conn)</text>
</g>
<!-- header_220&#45;&gt;leaf_226 -->
<g id="edge226" class="edge">
<title>header_220&#45;&gt;leaf_226</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14312.6777,-6050.0293C14307.119,-5734.6966 14231.4267,-1440.8976 14224.5059,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="14228.0013,-1048.0024 14224.3255,-1038.0657 14221.0024,-1048.1258 14228.0013,-1048.0024"/>
</g>
<!-- raw_227 -->
<g id="node228" class="node">
<title>raw_227</title>
<ellipse fill="none" stroke="#000000" cx="14347" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="14347" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_221&#45;&gt;raw_227 -->
<g id="edge227" class="edge">
<title>prose_221&#45;&gt;raw_227</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14534.7485,-6050.2968C14546.241,-5769.3801 14682.3866,-2283.8233 14404,-1307.2021 14398.9222,-1289.3884 14389.0916,-1288.6951 14383,-1271.2021 14355.9404,-1193.496 14349.2009,-1095.4979 14347.536,-1048"/>
<polygon fill="#000000" stroke="#000000" points="14351.03,-1047.7439 14347.2321,-1037.8532 14344.0331,-1047.9535 14351.03,-1047.7439"/>
</g>
<!-- prespace_228 -->
<g id="node229" class="node">
<title>prespace_228</title>
<ellipse fill="none" stroke="#000000" cx="14438" cy="-1019.6017" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="14438" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_221&#45;&gt;prespace_228 -->
<g id="edge228" class="edge">
<title>prose_221&#45;&gt;prespace_228</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14533.6524,-6050.0293C14527.6564,-5734.6966 14446.0108,-1440.8976 14438.5457,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="14442.0407,-1047.9973 14438.3511,-1038.0657 14435.0419,-1048.1304 14442.0407,-1047.9973"/>
</g>
<!-- literal_229 -->
<g id="node230" class="node">
<title>literal_229</title>
<ellipse fill="none" stroke="#000000" cx="14534" cy="-1019.6017" rx="31.481" ry="18"/>
<text text-anchor="middle" x="14534" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_221&#45;&gt;literal_229 -->
<g id="edge229" class="edge">
<title>prose_221&#45;&gt;literal_229</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14534,-6050.0293C14534,-5734.6966 14534,-1440.8976 14534,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="14537.5001,-1048.0656 14534,-1038.0657 14530.5001,-1048.0657 14537.5001,-1048.0656"/>
</g>
<!-- raw_230 -->
<g id="node231" class="node">
<title>raw_230</title>
<ellipse fill="none" stroke="#000000" cx="14610" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="14610" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_221&#45;&gt;raw_230 -->
<g id="edge230" class="edge">
<title>prose_221&#45;&gt;raw_230</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14534.2752,-6050.0293C14539.022,-5734.6966 14603.6581,-1440.8976 14609.568,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="14613.071,-1048.1173 14609.7221,-1038.0657 14606.0718,-1048.0118 14613.071,-1048.1173"/>
</g>
<!-- raw_235 -->
<g id="node236" class="node">
<title>raw_235</title>
<ellipse fill="none" stroke="#000000" cx="14686" cy="-1019.6017" rx="27" ry="18"/>
<text text-anchor="middle" x="14686" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_222&#45;&gt;raw_235 -->
<g id="edge235" class="edge">
<title>prose_222&#45;&gt;raw_235</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14686,-6050.0293C14686,-5734.6966 14686,-1440.8976 14686,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="14689.5001,-1048.0656 14686,-1038.0657 14682.5001,-1048.0657 14689.5001,-1048.0656"/>
</g>
<!-- leaf_237 -->
<g id="node238" class="node">
<title>leaf_237</title>
<polygon fill="none" stroke="#c0c0c0" points="15279,-1054.203 14731,-1054.203 14731,-985.0004 15279,-985.0004 15279,-1054.203"/>
<text text-anchor="middle" x="15005" y="-1039.2017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;function sqlayer.lastRowId(conn)</text>
<text text-anchor="middle" x="15005" y="-1023.8017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local result = conn:rowexec &quot;SELECT CAST(last_insert_rowid() AS REAL)&quot;</text>
<text text-anchor="middle" x="15005" y="-1008.4017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return result</text>
<text text-anchor="middle" x="15005" y="-993.0017" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
</g>
<!-- codeblock_223&#45;&gt;leaf_237 -->
<g id="edge237" class="edge">
<title>codeblock_223&#45;&gt;leaf_237</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14914.3295,-6050.0293C14919.9435,-5738.5621 14995.5197,-1545.5722 15004.1911,-1064.4817"/>
<polygon fill="#000000" stroke="#000000" points="15007.6911,-1064.5037 15004.372,-1054.4422 15000.6923,-1064.3774 15007.6911,-1064.5037"/>
</g>
<!-- header_238 -->
<g id="node239" class="node">
<title>header_238</title>
<ellipse fill="none" stroke="#000000" cx="15422" cy="-1019.6017" rx="110.7567" ry="18"/>
<text text-anchor="middle" x="15422" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : conn.pragma.etc(bool)</text>
</g>
<!-- section_224&#45;&gt;header_238 -->
<g id="edge238" class="edge">
<title>section_224&#45;&gt;header_238</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16519.0133,-6050.0293C16450.23,-5734.6189 15513.4127,-1438.7806 15428.1951,-1048.0097"/>
<polygon fill="#000000" stroke="#000000" points="15431.5769,-1047.0903 15426.0265,-1038.0657 15424.7377,-1048.5818 15431.5769,-1047.0903"/>
</g>
<!-- prose_239 -->
<g id="node240" class="node">
<title>prose_239</title>
<ellipse fill="none" stroke="#000000" cx="15590" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="15590" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_224&#45;&gt;prose_239 -->
<g id="edge239" class="edge">
<title>section_224&#45;&gt;prose_239</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16519.5327,-6050.0023C16474.4896,-5812.0802 15999.7487,-3302.0625 15634,-1271.2021 15619.3802,-1190.0243 15602.7761,-1093.9814 15594.7898,-1047.5336"/>
<polygon fill="#000000" stroke="#000000" points="15598.2281,-1046.8757 15593.0854,-1037.6127 15591.3292,-1048.0609 15598.2281,-1046.8757"/>
</g>
<!-- prose_240 -->
<g id="node241" class="node">
<title>prose_240</title>
<ellipse fill="none" stroke="#000000" cx="15675" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="15675" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_224&#45;&gt;prose_240 -->
<g id="edge240" class="edge">
<title>section_224&#45;&gt;prose_240</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16519.9294,-6050.0293C16466.9381,-5734.5368 15745.0312,-1436.544 15679.7204,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="15683.1283,-1046.8644 15678.0201,-1037.5824 15676.225,-1048.024 15683.1283,-1046.8644"/>
</g>
<!-- prose_241 -->
<g id="node242" class="node">
<title>prose_241</title>
<ellipse fill="none" stroke="#000000" cx="16356" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="16356" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_224&#45;&gt;prose_241 -->
<g id="edge241" class="edge">
<title>section_224&#45;&gt;prose_241</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16522.3953,-6050.0293C16511.9648,-5734.6966 16369.9355,-1440.8976 16356.9493,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="16360.4395,-1047.9445 16356.6107,-1038.0657 16353.4434,-1048.176 16360.4395,-1047.9445"/>
</g>
<!-- prose_242 -->
<g id="node243" class="node">
<title>prose_242</title>
<ellipse fill="none" stroke="#000000" cx="16689" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="16689" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_224&#45;&gt;prose_242 -->
<g id="edge242" class="edge">
<title>section_224&#45;&gt;prose_242</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16523.6011,-6050.0293C16533.9691,-5734.6966 16675.1479,-1440.8976 16688.0564,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="16691.5623,-1048.1753 16688.3929,-1038.0657 16684.5661,-1047.9452 16691.5623,-1048.1753"/>
</g>
<!-- prose_243 -->
<g id="node244" class="node">
<title>prose_243</title>
<ellipse fill="none" stroke="#000000" cx="17421" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="17421" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_224&#45;&gt;prose_243 -->
<g id="edge243" class="edge">
<title>section_224&#45;&gt;prose_243</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16526.2516,-6050.0293C16582.3674,-5734.5368 17346.8396,-1436.544 17416.0013,-1047.7054"/>
<polygon fill="#000000" stroke="#000000" points="17419.4965,-1048.0408 17417.8018,-1037.5824 17412.6046,-1046.8149 17419.4965,-1048.0408"/>
</g>
<!-- codeblock_244 -->
<g id="node245" class="node">
<title>codeblock_244</title>
<ellipse fill="none" stroke="#000000" cx="17781" cy="-1019.6017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="17781" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 829&#45;871</text>
</g>
<!-- section_224&#45;&gt;codeblock_244 -->
<g id="edge244" class="edge">
<title>section_224&#45;&gt;codeblock_244</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16527.5552,-6050.0293C16606.1867,-5734.459 17677.6374,-1434.4249 17774.0688,-1047.4185"/>
<polygon fill="#000000" stroke="#000000" points="17777.498,-1048.1319 17776.5197,-1037.5824 17770.7057,-1046.4394 17777.498,-1048.1319"/>
</g>
<!-- prose_245 -->
<g id="node246" class="node">
<title>prose_245</title>
<ellipse fill="none" stroke="#000000" cx="18451" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="18451" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_224&#45;&gt;prose_245 -->
<g id="edge245" class="edge">
<title>section_224&#45;&gt;prose_245</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16529.9813,-6050.0293C16650.5209,-5734.3812 18293.3968,-1432.3054 18440.4863,-1047.1331"/>
<polygon fill="#000000" stroke="#000000" points="18443.8357,-1048.173 18444.1335,-1037.5824 18437.2963,-1045.6757 18443.8357,-1048.173"/>
</g>
<!-- codeblock_246 -->
<g id="node247" class="node">
<title>codeblock_246</title>
<ellipse fill="none" stroke="#000000" cx="18733" cy="-1019.6017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="18733" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 876&#45;889</text>
</g>
<!-- section_224&#45;&gt;codeblock_246 -->
<g id="edge246" class="edge">
<title>section_224&#45;&gt;codeblock_246</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16531.0024,-6050.0293C16669.2068,-5734.3035 18553.2729,-1430.1854 18721.0728,-1046.8492"/>
<polygon fill="#000000" stroke="#000000" points="18724.3254,-1048.1467 18725.1292,-1037.5824 18717.9129,-1045.3396 18724.3254,-1048.1467"/>
</g>
<!-- header_304 -->
<g id="node305" class="node">
<title>header_304</title>
<ellipse fill="none" stroke="#000000" cx="19223" cy="-1019.6017" rx="154.3174" ry="18"/>
<text text-anchor="middle" x="19223" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">4 : End Closure and Add =sql= to _G</text>
</g>
<!-- section_225&#45;&gt;header_304 -->
<g id="edge304" class="edge">
<title>section_225&#45;&gt;header_304</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19324.6307,-6050.0293C19318.2599,-5734.6966 19231.5115,-1440.8976 19223.5798,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="19227.0744,-1047.9929 19223.373,-1038.0657 19220.0758,-1048.1344 19227.0744,-1047.9929"/>
</g>
<!-- prose_305 -->
<g id="node306" class="node">
<title>prose_305</title>
<ellipse fill="none" stroke="#000000" cx="19427" cy="-1019.6017" rx="32.4585" ry="18"/>
<text text-anchor="middle" x="19427" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prose</text>
</g>
<!-- section_225&#45;&gt;prose_305 -->
<g id="edge305" class="edge">
<title>section_225&#45;&gt;prose_305</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19325.3693,-6050.0293C19331.7401,-5734.6966 19418.4885,-1440.8976 19426.4202,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="19429.9242,-1048.1344 19426.627,-1038.0657 19422.9256,-1047.9929 19429.9242,-1048.1344"/>
</g>
<!-- codeblock_306 -->
<g id="node307" class="node">
<title>codeblock_306</title>
<ellipse fill="none" stroke="#000000" cx="19565" cy="-1019.6017" rx="87.0948" ry="18"/>
<text text-anchor="middle" x="19565" y="-1015.4017" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">code block 894&#45;898</text>
</g>
<!-- section_225&#45;&gt;codeblock_306 -->
<g id="edge306" class="edge">
<title>section_225&#45;&gt;codeblock_306</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19325.869,-6050.0293C19340.859,-5734.6966 19544.9729,-1440.8976 19563.6358,-1048.2993"/>
<polygon fill="#000000" stroke="#000000" points="19567.1434,-1048.2206 19564.1223,-1038.0657 19560.1513,-1047.8882 19567.1434,-1048.2206"/>
</g>
<!-- leaf_231 -->
<g id="node232" class="node">
<title>leaf_231</title>
<polygon fill="none" stroke="#c0c0c0" points="14393,-439.6021 14013,-439.6021 14013,-383.7992 14393,-383.7992 14393,-439.6021"/>
<text text-anchor="middle" x="14203" y="-392.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">This could be improved by natively handling uint64_t</text>
</g>
<!-- raw_227&#45;&gt;leaf_231 -->
<g id="edge231" class="edge">
<title>raw_227&#45;&gt;leaf_231</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14345.3582,-1001.4317C14341.3873,-959.7858 14330.153,-854.3748 14311,-768.0012 14284.767,-649.6994 14239.0376,-513.5894 14216.4346,-449.1955"/>
<polygon fill="#000000" stroke="#000000" points="14219.6387,-447.7569 14213.0121,-439.4902 14213.0371,-450.085 14219.6387,-447.7569"/>
</g>
<!-- leaf_232 -->
<g id="node233" class="node">
<title>leaf_232</title>
<polygon fill="none" stroke="#c0c0c0" points="14465,-429.7006 14411,-429.7006 14411,-393.7006 14465,-393.7006 14465,-429.7006"/>
<text text-anchor="middle" x="14438" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_228&#45;&gt;leaf_232 -->
<g id="edge232" class="edge">
<title>prespace_228&#45;&gt;leaf_232</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14438,-1001.4084C14438,-914.9756 14438,-545.6488 14438,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="14441.5001,-439.8229 14438,-429.823 14434.5001,-439.823 14441.5001,-439.8229"/>
</g>
<!-- leaf_233 -->
<g id="node234" class="node">
<title>leaf_233</title>
<polygon fill="none" stroke="#c0c0c0" points="14537,-429.7006 14483,-429.7006 14483,-393.7006 14537,-393.7006 14537,-429.7006"/>
<text text-anchor="middle" x="14510" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">cdata</text>
</g>
<!-- literal_229&#45;&gt;leaf_233 -->
<g id="edge233" class="edge">
<title>literal_229&#45;&gt;leaf_233</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14533.2817,-1001.4084C14529.8693,-914.9756 14515.2883,-545.6488 14511.1181,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="14514.6073,-439.6771 14510.7155,-429.823 14507.6128,-439.9533 14514.6073,-439.6771"/>
</g>
<!-- leaf_234 -->
<g id="node235" class="node">
<title>leaf_234</title>
<polygon fill="none" stroke="#c0c0c0" points="14609,-429.7006 14555,-429.7006 14555,-393.7006 14609,-393.7006 14609,-429.7006"/>
<text text-anchor="middle" x="14582" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_230&#45;&gt;leaf_234 -->
<g id="edge234" class="edge">
<title>raw_230&#45;&gt;leaf_234</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14609.162,-1001.4084C14605.1809,-914.9756 14588.1697,-545.6488 14583.3045,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="14586.7912,-439.6513 14582.8347,-429.823 14579.7986,-439.9734 14586.7912,-439.6513"/>
</g>
<!-- leaf_236 -->
<g id="node237" class="node">
<title>leaf_236</title>
<polygon fill="none" stroke="#c0c0c0" points="15154.5,-431.6027 14627.5,-431.6027 14627.5,-391.7986 15154.5,-391.7986 15154.5,-431.6027"/>
<text text-anchor="middle" x="14891" y="-400.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">Y&#39;know, if we ever keep more than 53 bits width of rows in uhhhhh SQLite.</text>
</g>
<!-- raw_235&#45;&gt;leaf_236 -->
<g id="edge236" class="edge">
<title>raw_235&#45;&gt;leaf_236</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M14686.7296,-1001.5117C14688.818,-959.5967 14696.4254,-852.9262 14722,-768.0012 14760.6025,-639.815 14838.8332,-499.5766 14873.6324,-440.485"/>
<polygon fill="#000000" stroke="#000000" points="14876.7442,-442.0993 14878.8318,-431.7122 14870.7223,-438.5303 14876.7442,-442.0993"/>
</g>
<!-- leaf_247 -->
<g id="node248" class="node">
<title>leaf_247</title>
<polygon fill="none" stroke="#c0c0c0" points="15371,-429.7006 15173,-429.7006 15173,-393.7006 15371,-393.7006 15371,-429.7006"/>
<text text-anchor="middle" x="15272" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">**** conn.pragma.etc(bool)</text>
</g>
<!-- header_238&#45;&gt;leaf_247 -->
<g id="edge247" class="edge">
<title>header_238&#45;&gt;leaf_247</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15417.5108,-1001.4084C15396.1619,-914.8882 15304.8674,-544.9017 15278.9095,-439.7025"/>
<polygon fill="#000000" stroke="#000000" points="15282.2655,-438.6933 15276.4717,-429.823 15275.4693,-440.3703 15282.2655,-438.6933"/>
</g>
<!-- raw_248 -->
<g id="node249" class="node">
<title>raw_248</title>
<ellipse fill="none" stroke="#000000" cx="15416" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="15416" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_239&#45;&gt;raw_248 -->
<g id="edge248" class="edge">
<title>prose_239&#45;&gt;raw_248</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15592.0055,-1001.3404C15595.9219,-956.2069 15599.702,-837.9998 15542,-768.0012 15514.597,-734.7586 15478.1102,-766.2687 15452,-732.0012 15384.654,-643.6153 15400.1264,-499.6256 15410.456,-439.4766"/>
<polygon fill="#000000" stroke="#000000" points="15413.9104,-440.0419 15412.2419,-429.5792 15407.0217,-438.7988 15413.9104,-440.0419"/>
</g>
<!-- raw_250 -->
<g id="node251" class="node">
<title>raw_250</title>
<ellipse fill="none" stroke="#000000" cx="15488" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="15488" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_240&#45;&gt;raw_250 -->
<g id="edge250" class="edge">
<title>prose_240&#45;&gt;raw_250</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15677.5483,-1001.5032C15682.8514,-956.2308 15690.0884,-836.7899 15631,-768.0012 15598.3061,-729.9402 15555.514,-771.0448 15524,-732.0012 15454.2079,-645.5338 15471.029,-500.4863 15482.0868,-439.7662"/>
<polygon fill="#000000" stroke="#000000" points="15485.5573,-440.2512 15483.9962,-429.772 15478.6817,-438.9375 15485.5573,-440.2512"/>
</g>
<!-- prespace_251 -->
<g id="node252" class="node">
<title>prespace_251</title>
<ellipse fill="none" stroke="#000000" cx="15579" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="15579" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_240&#45;&gt;prespace_251 -->
<g id="edge251" class="edge">
<title>prose_240&#45;&gt;prespace_251</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15672.1269,-1001.4084C15658.4636,-914.8882 15600.0352,-544.9017 15583.4221,-439.7025"/>
<polygon fill="#000000" stroke="#000000" points="15586.879,-439.1546 15581.8619,-429.823 15579.9647,-440.2465 15586.879,-439.1546"/>
</g>
<!-- literal_252 -->
<g id="node253" class="node">
<title>literal_252</title>
<ellipse fill="none" stroke="#000000" cx="15675" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="15675" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_240&#45;&gt;literal_252 -->
<g id="edge252" class="edge">
<title>prose_240&#45;&gt;literal_252</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15675,-1001.4084C15675,-914.9756 15675,-545.6488 15675,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="15678.5001,-439.8229 15675,-429.823 15671.5001,-439.823 15678.5001,-439.8229"/>
</g>
<!-- raw_253 -->
<g id="node254" class="node">
<title>raw_253</title>
<ellipse fill="none" stroke="#000000" cx="15751" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="15751" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_240&#45;&gt;raw_253 -->
<g id="edge253" class="edge">
<title>prose_240&#45;&gt;raw_253</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15677.6929,-1001.4533C15684.3884,-956.0824 15702.1725,-834.037 15715,-732.0012 15728.5453,-624.2561 15742.2418,-495.8041 15748.0764,-439.9549"/>
<polygon fill="#000000" stroke="#000000" points="15751.5813,-440.0896 15749.1362,-429.7808 15744.6189,-439.3643 15751.5813,-440.0896"/>
</g>
<!-- raw_258 -->
<g id="node259" class="node">
<title>raw_258</title>
<ellipse fill="none" stroke="#000000" cx="16105" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="16105" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_241&#45;&gt;raw_258 -->
<g id="edge258" class="edge">
<title>prose_241&#45;&gt;raw_258</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16348.624,-1001.7376C16313.0458,-915.5702 16159.123,-542.7821 16116.1689,-438.7507"/>
<polygon fill="#000000" stroke="#000000" points="16119.307,-437.18 16112.2554,-429.2726 16112.8368,-439.8515 16119.307,-437.18"/>
</g>
<!-- raw_260 -->
<g id="node261" class="node">
<title>raw_260</title>
<ellipse fill="none" stroke="#000000" cx="16318" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="16318" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_242&#45;&gt;raw_260 -->
<g id="edge260" class="edge">
<title>prose_242&#45;&gt;raw_260</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16669.6551,-1004.9024C16606.6595,-956.6324 16409.2586,-802.0718 16371,-732.0012 16318.0923,-635.101 16315.1199,-498.9686 16316.6421,-440.3695"/>
<polygon fill="#000000" stroke="#000000" points="16320.1512,-440.1461 16316.9802,-430.0369 16313.1549,-439.9171 16320.1512,-440.1461"/>
</g>
<!-- prespace_261 -->
<g id="node262" class="node">
<title>prespace_261</title>
<ellipse fill="none" stroke="#000000" cx="16426" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="16426" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_242&#45;&gt;prespace_261 -->
<g id="edge261" class="edge">
<title>prose_242&#45;&gt;prespace_261</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16673.4532,-1003.7459C16634.2358,-962.7369 16530.9334,-848.2346 16482,-732.0012 16439.1989,-630.3342 16429.1108,-497.2547 16426.7332,-439.9522"/>
<polygon fill="#000000" stroke="#000000" points="16430.2268,-439.711 16426.3629,-429.8459 16423.2315,-439.9674 16430.2268,-439.711"/>
</g>
<!-- literal_262 -->
<g id="node263" class="node">
<title>literal_262</title>
<ellipse fill="none" stroke="#000000" cx="16522" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="16522" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_242&#45;&gt;literal_262 -->
<g id="edge262" class="edge">
<title>prose_242&#45;&gt;literal_262</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16679.264,-1002.4278C16655.0225,-958.809 16591.7766,-839.5767 16562,-732.0012 16532.9185,-626.9371 16524.9372,-496.5959 16522.781,-440.0602"/>
<polygon fill="#000000" stroke="#000000" points="16526.2686,-439.6387 16522.4229,-429.7665 16519.2728,-439.8822 16526.2686,-439.6387"/>
</g>
<!-- raw_263 -->
<g id="node264" class="node">
<title>raw_263</title>
<ellipse fill="none" stroke="#000000" cx="16598" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="16598" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_242&#45;&gt;raw_263 -->
<g id="edge263" class="edge">
<title>prose_242&#45;&gt;raw_263</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16685.0379,-1001.5149C16675.2397,-956.2844 16649.5425,-834.5343 16634,-732.0012 16617.7247,-624.6345 16605.4372,-495.9872 16600.4442,-440.0214"/>
<polygon fill="#000000" stroke="#000000" points="16603.9099,-439.4785 16599.5438,-429.8251 16596.9371,-440.0943 16603.9099,-439.4785"/>
</g>
<!-- prespace_264 -->
<g id="node265" class="node">
<title>prespace_264</title>
<ellipse fill="none" stroke="#000000" cx="16689" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="16689" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_242&#45;&gt;prespace_264 -->
<g id="edge264" class="edge">
<title>prose_242&#45;&gt;prespace_264</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16689,-1001.4084C16689,-914.9756 16689,-545.6488 16689,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="16692.5001,-439.8229 16689,-429.823 16685.5001,-439.823 16692.5001,-439.8229"/>
</g>
<!-- literal_265 -->
<g id="node266" class="node">
<title>literal_265</title>
<ellipse fill="none" stroke="#000000" cx="16785" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="16785" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_242&#45;&gt;literal_265 -->
<g id="edge265" class="edge">
<title>prose_242&#45;&gt;literal_265</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16692.8645,-1001.4997C16702.44,-956.2346 16727.6691,-834.4116 16744,-732.0012 16761.1325,-624.5644 16775.8508,-495.9533 16781.97,-440.0091"/>
<polygon fill="#000000" stroke="#000000" points="16785.4766,-440.1365 16783.0773,-429.8169 16778.5176,-439.3803 16785.4766,-440.1365"/>
</g>
<!-- raw_266 -->
<g id="node267" class="node">
<title>raw_266</title>
<ellipse fill="none" stroke="#000000" cx="16861" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="16861" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_242&#45;&gt;raw_266 -->
<g id="edge266" class="edge">
<title>prose_242&#45;&gt;raw_266</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16699.5495,-1002.5581C16725.795,-959.2409 16794.1312,-840.6502 16825,-732.0012 16854.75,-627.2899 16860.0742,-496.7653 16860.9157,-440.1212"/>
<polygon fill="#000000" stroke="#000000" points="16864.4189,-439.8453 16861.0302,-429.807 16857.4193,-439.7675 16864.4189,-439.8453"/>
</g>
<!-- prespace_267 -->
<g id="node268" class="node">
<title>prespace_267</title>
<ellipse fill="none" stroke="#000000" cx="16952" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="16952" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_242&#45;&gt;prespace_267 -->
<g id="edge267" class="edge">
<title>prose_242&#45;&gt;prespace_267</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16704.6455,-1003.7709C16744.108,-962.8206 16848.0291,-848.4447 16897,-732.0012 16939.7408,-630.3716 16949.278,-497.2724 16951.3982,-439.9585"/>
<polygon fill="#000000" stroke="#000000" points="16954.9,-439.9572 16951.7227,-429.8501 16947.9036,-439.7326 16954.9,-439.9572"/>
</g>
<!-- literal_268 -->
<g id="node269" class="node">
<title>literal_268</title>
<ellipse fill="none" stroke="#000000" cx="17048" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="17048" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_242&#45;&gt;literal_268 -->
<g id="edge268" class="edge">
<title>prose_242&#45;&gt;literal_268</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16712.0867,-1006.7831C16772.5615,-971.8214 16935.8225,-868.2435 17007,-732.0012 17057.8479,-634.6723 17054.8873,-498.7672 17050.6919,-440.2986"/>
<polygon fill="#000000" stroke="#000000" points="17054.1544,-439.6839 17049.8794,-429.9898 17047.176,-440.2339 17054.1544,-439.6839"/>
</g>
<!-- raw_269 -->
<g id="node270" class="node">
<title>raw_269</title>
<ellipse fill="none" stroke="#000000" cx="17124" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="17124" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_242&#45;&gt;raw_269 -->
<g id="edge269" class="edge">
<title>prose_242&#45;&gt;raw_269</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16715.8309,-1009.4459C16789.9818,-979.8118 16998.136,-885.6968 17088,-732.0012 17143.5719,-636.9559 17134.9872,-498.807 17128.0373,-439.9541"/>
<polygon fill="#000000" stroke="#000000" points="17131.4954,-439.4009 17126.7744,-429.916 17124.5501,-440.2747 17131.4954,-439.4009"/>
</g>
<!-- raw_280 -->
<g id="node281" class="node">
<title>raw_280</title>
<ellipse fill="none" stroke="#000000" cx="17196" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="17196" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_243&#45;&gt;raw_280 -->
<g id="edge280" class="edge">
<title>prose_243&#45;&gt;raw_280</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17406.171,-1003.3188C17369.3082,-961.7619 17273.5126,-846.916 17232,-732.0012 17194.8492,-629.1607 17193.4383,-496.6992 17194.8518,-439.755"/>
<polygon fill="#000000" stroke="#000000" points="17198.3515,-439.8141 17195.1515,-429.7141 17191.3546,-439.6052 17198.3515,-439.8141"/>
</g>
<!-- prespace_281 -->
<g id="node282" class="node">
<title>prespace_281</title>
<ellipse fill="none" stroke="#000000" cx="17287" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="17287" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_243&#45;&gt;prespace_281 -->
<g id="edge281" class="edge">
<title>prose_243&#45;&gt;prespace_281</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17415.4902,-1001.5749C17401.8439,-956.4815 17365.9247,-835.0195 17343,-732.0012 17319.2037,-625.0663 17299.3049,-496.1961 17291.0691,-440.0972"/>
<polygon fill="#000000" stroke="#000000" points="17294.4851,-439.2666 17289.5797,-429.8757 17287.5582,-440.2759 17294.4851,-439.2666"/>
</g>
<!-- literal_282 -->
<g id="node283" class="node">
<title>literal_282</title>
<ellipse fill="none" stroke="#000000" cx="17383" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="17383" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_243&#45;&gt;literal_282 -->
<g id="edge282" class="edge">
<title>prose_243&#45;&gt;literal_282</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17419.8627,-1001.4084C17414.4598,-914.9756 17391.3731,-545.6488 17384.7704,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="17388.25,-439.5851 17384.1328,-429.823 17381.2636,-440.0219 17388.25,-439.5851"/>
</g>
<!-- raw_283 -->
<g id="node284" class="node">
<title>raw_283</title>
<ellipse fill="none" stroke="#000000" cx="17459" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="17459" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_243&#45;&gt;raw_283 -->
<g id="edge283" class="edge">
<title>prose_243&#45;&gt;raw_283</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17422.1373,-1001.4084C17427.5402,-914.9756 17450.6269,-545.6488 17457.2296,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="17460.7364,-440.0219 17457.8672,-429.823 17453.75,-439.5851 17460.7364,-440.0219"/>
</g>
<!-- prespace_284 -->
<g id="node285" class="node">
<title>prespace_284</title>
<ellipse fill="none" stroke="#000000" cx="17550" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="17550" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_243&#45;&gt;prespace_284 -->
<g id="edge284" class="edge">
<title>prose_243&#45;&gt;prespace_284</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17426.1934,-1001.5535C17439.0627,-956.411 17472.9776,-834.846 17495,-732.0012 17517.9263,-624.9352 17537.6995,-496.1327 17545.9254,-440.0742"/>
<polygon fill="#000000" stroke="#000000" points="17549.4352,-440.2607 17547.4142,-429.8604 17542.5083,-439.251 17549.4352,-440.2607"/>
</g>
<!-- literal_285 -->
<g id="node286" class="node">
<title>literal_285</title>
<ellipse fill="none" stroke="#000000" cx="17646" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="17646" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_243&#45;&gt;literal_285 -->
<g id="edge285" class="edge">
<title>prose_243&#45;&gt;literal_285</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17435.3214,-1003.2006C17470.9422,-961.3703 17563.6361,-845.9426 17605,-732.0012 17642.3818,-629.029 17646.5842,-496.6368 17646.4792,-439.7328"/>
<polygon fill="#000000" stroke="#000000" points="17649.979,-439.676 17646.413,-429.6993 17642.9792,-439.7223 17649.979,-439.676"/>
</g>
<!-- raw_286 -->
<g id="node287" class="node">
<title>raw_286</title>
<ellipse fill="none" stroke="#000000" cx="17722" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="17722" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_243&#45;&gt;raw_286 -->
<g id="edge286" class="edge">
<title>prose_243&#45;&gt;raw_286</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17441.1042,-1005.2597C17492.3803,-967.402 17628.0619,-858.9268 17686,-732.0012 17731.5153,-632.2903 17728.4553,-497.6483 17724.5073,-439.9044"/>
<polygon fill="#000000" stroke="#000000" points="17727.9823,-439.4388 17723.7457,-429.7279 17721.0019,-439.9613 17727.9823,-439.4388"/>
</g>
<!-- leaf_294 -->
<g id="node295" class="node">
<title>leaf_294</title>
<polygon fill="none" stroke="#c0c0c0" points="18315,-731.802 17767,-731.802 17767,-91.5993 18315,-91.5993 18315,-731.802"/>
<text text-anchor="middle" x="18041" y="-716.8012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local pragma_pre = &quot;PRAGMA &quot;</text>
<text text-anchor="middle" x="18041" y="-685.4012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Builds and returns a pragma string</text>
<text text-anchor="middle" x="18041" y="-670.0012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function __pragma(prag, value)</text>
<text text-anchor="middle" x="18041" y="-654.6012" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local val</text>
<text text-anchor="middle" x="18041" y="-639.2011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if value == nil then</text>
<text text-anchor="middle" x="18041" y="-623.8011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return pragma_pre .. prag .. &quot;;&quot;</text>
<text text-anchor="middle" x="18041" y="-608.4011" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18041" y="-593.001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if type(value) == &quot;boolean&quot; then</text>
<text text-anchor="middle" x="18041" y="-577.601" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;val = value and &quot; = 1&quot; or &quot; = 0&quot;</text>
<text text-anchor="middle" x="18041" y="-562.201" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(value) == &quot;string&quot; then</text>
<text text-anchor="middle" x="18041" y="-546.8009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;val = &quot;(&#39;&quot; .. san(value) .. &quot;&#39;)&quot;</text>
<text text-anchor="middle" x="18041" y="-531.4009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;elseif type(value) == &quot;number&quot; then</text>
<text text-anchor="middle" x="18041" y="-516.0009" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;val = &quot; = &quot; .. tostring(value)</text>
<text text-anchor="middle" x="18041" y="-500.6008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="18041" y="-485.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;error(false, &quot;value of type &quot;</text>
<text text-anchor="middle" x="18041" y="-469.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. type(value) .. &quot;, &quot;</text>
<text text-anchor="middle" x="18041" y="-454.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;.. tostring(value))</text>
<text text-anchor="middle" x="18041" y="-439.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18041" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return pragma_pre .. prag .. val .. &quot;;&quot;</text>
<text text-anchor="middle" x="18041" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="18041" y="-376.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#45;&#45; Sets a pragma and checks its new value</text>
<text text-anchor="middle" x="18041" y="-361.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function _prag_set(conn, prag)</text>
<text text-anchor="middle" x="18041" y="-346.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;return function(value)</text>
<text text-anchor="middle" x="18041" y="-330.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local prag_str = __pragma(prag, value)</text>
<text text-anchor="middle" x="18041" y="-315.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;conn:exec(prag_str)</text>
<text text-anchor="middle" x="18041" y="-299.8005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; check for a boolean</text>
<text text-anchor="middle" x="18041" y="-284.4004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#45;&#45; #todo make sure this gives sane results for a method&#45;call pragma</text>
<text text-anchor="middle" x="18041" y="-269.0004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;local answer = conn:exec(pragma_pre .. prag .. &quot;;&quot;)</text>
<text text-anchor="middle" x="18041" y="-253.6004" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if answer[1] and answer[1][1] then</text>
<text text-anchor="middle" x="18041" y="-238.2003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;if answer[1][1] == 1 then</text>
<text text-anchor="middle" x="18041" y="-222.8003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return true</text>
<text text-anchor="middle" x="18041" y="-207.4003" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;elseif answer[1][1] == 0 then</text>
<text text-anchor="middle" x="18041" y="-192.0002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return false</text>
<text text-anchor="middle" x="18041" y="-176.6002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="18041" y="-161.2002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return nil</text>
<text text-anchor="middle" x="18041" y="-145.8002" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18041" y="-130.4001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18041" y="-115.0001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18041" y="-99.6001" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
</g>
<!-- codeblock_244&#45;&gt;leaf_294 -->
<g id="edge294" class="edge">
<title>codeblock_244&#45;&gt;leaf_294</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17788.7813,-1001.4084C17806.5534,-959.8557 17852.29,-852.9198 17900.0153,-741.3343"/>
<polygon fill="#000000" stroke="#000000" points="17903.33,-742.4845 17904.0445,-731.9138 17896.8939,-739.7318 17903.33,-742.4845"/>
</g>
<!-- raw_295 -->
<g id="node296" class="node">
<title>raw_295</title>
<ellipse fill="none" stroke="#000000" cx="18360" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="18360" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_245&#45;&gt;raw_295 -->
<g id="edge295" class="edge">
<title>prose_245&#45;&gt;raw_295</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18447.0379,-1001.5149C18437.2397,-956.2844 18411.5425,-834.5343 18396,-732.0012 18379.7247,-624.6345 18367.4372,-495.9872 18362.4442,-440.0214"/>
<polygon fill="#000000" stroke="#000000" points="18365.9099,-439.4785 18361.5438,-429.8251 18358.9371,-440.0943 18365.9099,-439.4785"/>
</g>
<!-- prespace_296 -->
<g id="node297" class="node">
<title>prespace_296</title>
<ellipse fill="none" stroke="#000000" cx="18451" cy="-411.7006" rx="46.4736" ry="18"/>
<text text-anchor="middle" x="18451" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">prespace</text>
</g>
<!-- prose_245&#45;&gt;prespace_296 -->
<g id="edge296" class="edge">
<title>prose_245&#45;&gt;prespace_296</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18451,-1001.4084C18451,-914.9756 18451,-545.6488 18451,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="18454.5001,-439.8229 18451,-429.823 18447.5001,-439.823 18454.5001,-439.8229"/>
</g>
<!-- literal_297 -->
<g id="node298" class="node">
<title>literal_297</title>
<ellipse fill="none" stroke="#000000" cx="18547" cy="-411.7006" rx="31.481" ry="18"/>
<text text-anchor="middle" x="18547" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">literal</text>
</g>
<!-- prose_245&#45;&gt;literal_297 -->
<g id="edge297" class="edge">
<title>prose_245&#45;&gt;literal_297</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18454.8645,-1001.4997C18464.44,-956.2346 18489.6691,-834.4116 18506,-732.0012 18523.1325,-624.5644 18537.8508,-495.9533 18543.97,-440.0091"/>
<polygon fill="#000000" stroke="#000000" points="18547.4766,-440.1365 18545.0773,-429.8169 18540.5176,-439.3803 18547.4766,-440.1365"/>
</g>
<!-- raw_298 -->
<g id="node299" class="node">
<title>raw_298</title>
<ellipse fill="none" stroke="#000000" cx="18623" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="18623" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_245&#45;&gt;raw_298 -->
<g id="edge298" class="edge">
<title>prose_245&#45;&gt;raw_298</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18461.5495,-1002.5581C18487.795,-959.2409 18556.1312,-840.6502 18587,-732.0012 18616.75,-627.2899 18622.0742,-496.7653 18622.9157,-440.1212"/>
<polygon fill="#000000" stroke="#000000" points="18626.4189,-439.8453 18623.0302,-429.807 18619.4193,-439.7675 18626.4189,-439.8453"/>
</g>
<!-- leaf_303 -->
<g id="node304" class="node">
<title>leaf_303</title>
<polygon fill="none" stroke="#c0c0c0" points="19083.5,-508.6014 18668.5,-508.6014 18668.5,-314.7999 19083.5,-314.7999 19083.5,-508.6014"/>
<text text-anchor="middle" x="18876" y="-493.2008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;local function new_conn_index(conn, key)</text>
<text text-anchor="middle" x="18876" y="-477.8008" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;local function _prag_index(_, prag)</text>
<text text-anchor="middle" x="18876" y="-462.4007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return _prag_set(conn, prag)</text>
<text text-anchor="middle" x="18876" y="-447.0007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18876" y="-431.6007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;if key == &quot;pragma&quot; then</text>
<text text-anchor="middle" x="18876" y="-416.2007" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return setmetatable({}, {__index = _prag_index})</text>
<text text-anchor="middle" x="18876" y="-400.8006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;else</text>
<text text-anchor="middle" x="18876" y="-385.4006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;&#160;&#160;&#160;return conn_mt[key]</text>
<text text-anchor="middle" x="18876" y="-370.0006" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;&#160;&#160;&#160;end</text>
<text text-anchor="middle" x="18876" y="-354.6005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;end</text>
<text text-anchor="middle" x="18876" y="-323.2005" font-family="Inconsolata" font-size="14.00" fill="#000000"> &#160;&#160;conn_mt.__index = new_conn_index</text>
</g>
<!-- codeblock_246&#45;&gt;leaf_303 -->
<g id="edge303" class="edge">
<title>codeblock_246&#45;&gt;leaf_303</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18737.2797,-1001.4084C18753.9858,-930.39 18815.6192,-668.3827 18850.8546,-518.5951"/>
<polygon fill="#000000" stroke="#000000" points="18854.3578,-518.9873 18853.2407,-508.4515 18847.5438,-517.3843 18854.3578,-518.9873"/>
</g>
<!-- leaf_249 -->
<g id="node250" class="node">
<title>leaf_249</title>
<polygon fill="none" stroke="#c0c0c0" points="14685.5,-55.6015 14312.5,-55.6015 14312.5,.2015 14685.5,.2015 14685.5,-55.6015"/>
<text text-anchor="middle" x="14499" y="-8.2" font-family="Inconsolata" font-size="14.00" fill="#000000">A convenience wrapper over the SQL pragma commands.</text>
</g>
<!-- raw_248&#45;&gt;leaf_249 -->
<g id="edge249" class="edge">
<title>raw_248&#45;&gt;leaf_249</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15420.8271,-393.7769C15434.3687,-339.0242 15466.3424,-172.7525 15380,-91.4 15326.346,-40.8468 14807.2909,-61.2422 14695.7847,-55.2855"/>
<polygon fill="#000000" stroke="#000000" points="14695.7408,-51.7735 14685.5162,-54.5498 14695.2405,-58.7556 14695.7408,-51.7735"/>
</g>
<!-- leaf_254 -->
<g id="node255" class="node">
<title>leaf_254</title>
<polygon fill="none" stroke="#c0c0c0" points="15258.5,-55.0004 14703.5,-55.0004 14703.5,-.3996 15258.5,-.3996 15258.5,-55.0004"/>
<text text-anchor="middle" x="14981" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">We can use the same interface for setting Lua&#45;specific values, the one I need</text>
<text text-anchor="middle" x="14981" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">is</text>
</g>
<!-- raw_250&#45;&gt;leaf_254 -->
<g id="edge254" class="edge">
<title>raw_250&#45;&gt;leaf_254</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15492.6151,-393.7015C15505.3372,-339.4441 15534.7398,-176.0231 15452,-91.4 15443.6174,-82.8266 15345.7238,-68.9041 15241.342,-56.2585"/>
<polygon fill="#000000" stroke="#000000" points="15241.57,-52.7608 15231.223,-55.039 15240.7324,-59.7105 15241.57,-52.7608"/>
</g>
<!-- leaf_255 -->
<g id="node256" class="node">
<title>leaf_255</title>
<polygon fill="none" stroke="#c0c0c0" points="15331,-45.7 15277,-45.7 15277,-9.7 15331,-9.7 15331,-45.7"/>
<text text-anchor="middle" x="15304" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_251&#45;&gt;leaf_255 -->
<g id="edge255" class="edge">
<title>prespace_251&#45;&gt;leaf_255</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15582.2116,-393.3822C15590.6137,-338.9274 15607.2005,-176.5498 15524,-91.4 15465.7641,-31.7998 15415.9318,-89.7216 15340,-55.4 15337.6106,-54.32 15335.2347,-53.0533 15332.9089,-51.6665"/>
<polygon fill="#000000" stroke="#000000" points="15334.5188,-48.5318 15324.2653,-45.8643 15330.6174,-54.3438 15334.5188,-48.5318"/>
</g>
<!-- leaf_256 -->
<g id="node257" class="node">
<title>leaf_256</title>
<polygon fill="none" stroke="#c0c0c0" points="15589,-45.7 15349,-45.7 15349,-9.7 15589,-9.7 15589,-45.7"/>
<text text-anchor="middle" x="15469" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">conn.pragma.nulls_are_nil(false)</text>
</g>
<!-- literal_252&#45;&gt;leaf_256 -->
<g id="edge256" class="edge">
<title>literal_252&#45;&gt;leaf_256</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15678.4744,-393.7446C15687.6004,-340.9762 15706.8037,-184.2754 15634,-91.4 15618.9319,-72.1778 15597.2984,-58.751 15574.6341,-49.3739"/>
<polygon fill="#000000" stroke="#000000" points="15575.8109,-46.0764 15565.2219,-45.7241 15573.28,-52.6029 15575.8109,-46.0764"/>
</g>
<!-- leaf_257 -->
<g id="node258" class="node">
<title>leaf_257</title>
<polygon fill="none" stroke="#c0c0c0" points="15661,-45.7 15607,-45.7 15607,-9.7 15661,-9.7 15661,-45.7"/>
<text text-anchor="middle" x="15634" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_253&#45;&gt;leaf_257 -->
<g id="edge257" class="edge">
<title>raw_253&#45;&gt;leaf_257</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M15753.5595,-393.608C15759.8896,-342.4036 15771.9052,-193.5742 15715,-91.4 15714.2053,-89.9732 15687.9492,-69.438 15665.5446,-52.0637"/>
<polygon fill="#000000" stroke="#000000" points="15667.5679,-49.2037 15657.5189,-45.8469 15663.2812,-54.7377 15667.5679,-49.2037"/>
</g>
<!-- leaf_259 -->
<g id="node260" class="node">
<title>leaf_259</title>
<polygon fill="none" stroke="#c0c0c0" points="16143,-47.6021 15679,-47.6021 15679,-7.7979 16143,-7.7979 16143,-47.6021"/>
<text text-anchor="middle" x="15911" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000">This is a subtle bit of function composition with a nice result.</text>
</g>
<!-- raw_258&#45;&gt;leaf_259 -->
<g id="edge259" class="edge">
<title>raw_258&#45;&gt;leaf_259</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16096.2873,-394.4549C16065.8137,-334.1358 15963.792,-132.1957 15925.5987,-56.5964"/>
<polygon fill="#000000" stroke="#000000" points="15928.6923,-54.9579 15921.059,-47.6106 15922.4443,-58.1145 15928.6923,-54.9579"/>
</g>
<!-- leaf_270 -->
<g id="node271" class="node">
<title>leaf_270</title>
<polygon fill="none" stroke="#c0c0c0" points="16457,-47.6021 16161,-47.6021 16161,-7.7979 16457,-7.7979 16457,-47.6021"/>
<text text-anchor="middle" x="16309" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000">I might be able to use this technique in</text>
</g>
<!-- raw_260&#45;&gt;leaf_270 -->
<g id="edge270" class="edge">
<title>raw_260&#45;&gt;leaf_270</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16317.578,-393.6945C16316.1504,-332.7824 16311.4916,-134.0071 16309.7056,-57.8061"/>
<polygon fill="#000000" stroke="#000000" points="16313.1971,-57.399 16309.4637,-47.4838 16306.199,-57.5631 16313.1971,-57.399"/>
</g>
<!-- leaf_271 -->
<g id="node272" class="node">
<title>leaf_271</title>
<polygon fill="none" stroke="#c0c0c0" points="16529,-45.7 16475,-45.7 16475,-9.7 16529,-9.7 16529,-45.7"/>
<text text-anchor="middle" x="16502" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_261&#45;&gt;leaf_271 -->
<g id="edge271" class="edge">
<title>prespace_261&#45;&gt;leaf_271</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16428.3334,-393.4682C16434.8111,-344.2855 16454.3761,-204.9421 16482,-91.4 16484.8951,-79.5002 16488.8073,-66.5725 16492.4038,-55.4923"/>
<polygon fill="#000000" stroke="#000000" points="16495.753,-56.5119 16495.5797,-45.9185 16489.1091,-54.3078 16495.753,-56.5119"/>
</g>
<!-- leaf_272 -->
<g id="node273" class="node">
<title>leaf_272</title>
<polygon fill="none" stroke="#c0c0c0" points="16601,-45.7 16547,-45.7 16547,-9.7 16601,-9.7 16601,-45.7"/>
<text text-anchor="middle" x="16574" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">check</text>
</g>
<!-- literal_262&#45;&gt;leaf_272 -->
<g id="edge272" class="edge">
<title>literal_262&#45;&gt;leaf_272</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16523.8643,-393.5853C16528.9818,-344.6934 16544.0663,-206.0076 16562,-91.4 16563.8326,-79.6885 16566.1888,-66.83 16568.3274,-55.7513"/>
<polygon fill="#000000" stroke="#000000" points="16571.7948,-56.2572 16570.2869,-45.7702 16564.9259,-54.9086 16571.7948,-56.2572"/>
</g>
<!-- leaf_273 -->
<g id="node274" class="node">
<title>leaf_273</title>
<polygon fill="none" stroke="#c0c0c0" points="16698.5,-45.7 16619.5,-45.7 16619.5,-9.7 16698.5,-9.7 16698.5,-45.7"/>
<text text-anchor="middle" x="16659" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> to favor</text>
</g>
<!-- raw_263&#45;&gt;leaf_273 -->
<g id="edge273" class="edge">
<title>raw_263&#45;&gt;leaf_273</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16598.389,-393.346C16599.7947,-343.8601 16606.1334,-203.8309 16634,-91.4 16636.9979,-79.3048 16641.7361,-66.4272 16646.2852,-55.439"/>
<polygon fill="#000000" stroke="#000000" points="16649.6276,-56.5254 16650.3544,-45.9556 16643.1947,-53.7651 16649.6276,-56.5254"/>
</g>
<!-- leaf_274 -->
<g id="node275" class="node">
<title>leaf_274</title>
<polygon fill="none" stroke="#c0c0c0" points="16771,-45.7 16717,-45.7 16717,-9.7 16771,-9.7 16771,-45.7"/>
<text text-anchor="middle" x="16744" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_264&#45;&gt;leaf_274 -->
<g id="edge274" class="edge">
<title>prespace_264&#45;&gt;leaf_274</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16691.579,-393.6945C16700.3641,-332.3584 16729.1711,-131.2332 16739.9133,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="16743.4093,-56.5092 16741.3626,-46.114 16736.48,-55.5167 16743.4093,-56.5092"/>
</g>
<!-- leaf_275 -->
<g id="node276" class="node">
<title>leaf_275</title>
<polygon fill="none" stroke="#c0c0c0" points="16843,-45.7 16789,-45.7 16789,-9.7 16843,-9.7 16843,-45.7"/>
<text text-anchor="middle" x="16816" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- literal_265&#45;&gt;leaf_275 -->
<g id="edge275" class="edge">
<title>literal_265&#45;&gt;leaf_275</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16786.4536,-393.6945C16791.4052,-332.3584 16807.6419,-131.2332 16813.6966,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="16817.1973,-56.3632 16814.5135,-46.114 16810.22,-55.7999 16817.1973,-56.3632"/>
</g>
<!-- leaf_276 -->
<g id="node277" class="node">
<title>leaf_276</title>
<polygon fill="none" stroke="#c0c0c0" points="16915,-45.7 16861,-45.7 16861,-9.7 16915,-9.7 16915,-45.7"/>
<text text-anchor="middle" x="16888" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> over</text>
</g>
<!-- raw_266&#45;&gt;leaf_276 -->
<g id="edge276" class="edge">
<title>raw_266&#45;&gt;leaf_276</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16862.2661,-393.6945C16866.5787,-332.3584 16880.7203,-131.2332 16885.9938,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="16889.4952,-56.3349 16886.7053,-46.114 16882.5124,-55.8439 16889.4952,-56.3349"/>
</g>
<!-- leaf_277 -->
<g id="node278" class="node">
<title>leaf_277</title>
<polygon fill="none" stroke="#c0c0c0" points="16987,-45.7 16933,-45.7 16933,-9.7 16987,-9.7 16987,-45.7"/>
<text text-anchor="middle" x="16960" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_267&#45;&gt;leaf_277 -->
<g id="edge277" class="edge">
<title>prespace_267&#45;&gt;leaf_277</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M16952.3751,-393.6945C16953.653,-332.3584 16957.8431,-131.2332 16959.4056,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="16962.9072,-56.1848 16959.6164,-46.114 16955.9088,-56.0389 16962.9072,-56.1848"/>
</g>
<!-- leaf_278 -->
<g id="node279" class="node">
<title>leaf_278</title>
<polygon fill="none" stroke="#c0c0c0" points="17075,-45.7 17021,-45.7 17021,-9.7 17075,-9.7 17075,-45.7"/>
<text text-anchor="middle" x="17048" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">:</text>
</g>
<!-- literal_268&#45;&gt;leaf_278 -->
<g id="edge278" class="edge">
<title>literal_268&#45;&gt;leaf_278</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17048,-393.6945C17048,-332.3584 17048,-131.2332 17048,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17051.5001,-56.114 17048,-46.114 17044.5001,-56.114 17051.5001,-56.114"/>
</g>
<!-- leaf_279 -->
<g id="node280" class="node">
<title>leaf_279</title>
<polygon fill="none" stroke="#c0c0c0" points="17149,-45.7 17095,-45.7 17095,-9.7 17149,-9.7 17149,-45.7"/>
<text text-anchor="middle" x="17122" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">.</text>
</g>
<!-- raw_269&#45;&gt;leaf_279 -->
<g id="edge279" class="edge">
<title>raw_269&#45;&gt;leaf_279</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17123.9062,-393.6945C17123.5868,-332.3584 17122.5392,-131.2332 17122.1486,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17125.648,-56.0956 17122.0959,-46.114 17118.6481,-56.1321 17125.648,-56.0956"/>
</g>
<!-- leaf_287 -->
<g id="node288" class="node">
<title>leaf_287</title>
<polygon fill="none" stroke="#c0c0c0" points="17221,-47.6021 17167,-47.6021 17167,-7.7979 17221,-7.7979 17221,-47.6021"/>
<text text-anchor="middle" x="17194" y="-16.2" font-family="Inconsolata" font-size="14.00" fill="#000000">Note:</text>
</g>
<!-- raw_280&#45;&gt;leaf_287 -->
<g id="edge287" class="edge">
<title>raw_280&#45;&gt;leaf_287</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17195.9062,-393.6945C17195.589,-332.7824 17194.5537,-134.0071 17194.1568,-57.8061"/>
<polygon fill="#000000" stroke="#000000" points="17197.6552,-57.4654 17194.103,-47.4838 17190.6553,-57.5019 17197.6552,-57.4654"/>
</g>
<!-- leaf_288 -->
<g id="node289" class="node">
<title>leaf_288</title>
<polygon fill="none" stroke="#c0c0c0" points="17293,-45.7 17239,-45.7 17239,-9.7 17293,-9.7 17293,-45.7"/>
<text text-anchor="middle" x="17266" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_281&#45;&gt;leaf_288 -->
<g id="edge288" class="edge">
<title>prespace_281&#45;&gt;leaf_288</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17286.0153,-393.6945C17282.661,-332.3584 17271.662,-131.2332 17267.5604,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17271.0479,-55.9079 17267.007,-46.114 17264.0584,-56.2902 17271.0479,-55.9079"/>
</g>
<!-- leaf_289 -->
<g id="node290" class="node">
<title>leaf_289</title>
<polygon fill="none" stroke="#c0c0c0" points="17404.5,-45.7 17311.5,-45.7 17311.5,-9.7 17404.5,-9.7 17404.5,-45.7"/>
<text text-anchor="middle" x="17358" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">_prag_index</text>
</g>
<!-- literal_282&#45;&gt;leaf_289 -->
<g id="edge289" class="edge">
<title>literal_282&#45;&gt;leaf_289</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17381.8277,-393.6945C17377.8345,-332.3584 17364.7404,-131.2332 17359.8576,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17363.3412,-55.8655 17359.1988,-46.114 17356.356,-56.3203 17363.3412,-55.8655"/>
</g>
<!-- leaf_290 -->
<g id="node291" class="node">
<title>leaf_290</title>
<polygon fill="none" stroke="#c0c0c0" points="17523,-45.7 17423,-45.7 17423,-9.7 17523,-9.7 17523,-45.7"/>
<text text-anchor="middle" x="17473" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> closes over</text>
</g>
<!-- raw_283&#45;&gt;leaf_290 -->
<g id="edge290" class="edge">
<title>raw_283&#45;&gt;leaf_290</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17459.6565,-393.6945C17461.8927,-332.3584 17469.2254,-131.2332 17471.9597,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17475.4619,-56.2349 17472.3287,-46.114 17468.4665,-55.9798 17475.4619,-56.2349"/>
</g>
<!-- leaf_291 -->
<g id="node292" class="node">
<title>leaf_291</title>
<polygon fill="none" stroke="#c0c0c0" points="17595,-45.7 17541,-45.7 17541,-9.7 17595,-9.7 17595,-45.7"/>
<text text-anchor="middle" x="17568" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_284&#45;&gt;leaf_291 -->
<g id="edge291" class="edge">
<title>prespace_284&#45;&gt;leaf_291</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17550.844,-393.6945C17553.7192,-332.3584 17563.1469,-131.2332 17566.6625,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17570.1647,-56.2669 17567.1368,-46.114 17563.1724,-55.9391 17570.1647,-56.2669"/>
</g>
<!-- leaf_292 -->
<g id="node293" class="node">
<title>leaf_292</title>
<polygon fill="none" stroke="#c0c0c0" points="17667,-45.7 17613,-45.7 17613,-9.7 17667,-9.7 17667,-45.7"/>
<text text-anchor="middle" x="17640" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">conn</text>
</g>
<!-- literal_285&#45;&gt;leaf_292 -->
<g id="edge292" class="edge">
<title>literal_285&#45;&gt;leaf_292</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17645.7187,-393.6945C17644.7603,-332.3584 17641.6177,-131.2332 17640.4458,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="17643.9436,-56.0581 17640.2877,-46.114 17636.9445,-56.1675 17643.9436,-56.0581"/>
</g>
<!-- leaf_293 -->
<g id="node294" class="node">
<title>leaf_293</title>
<polygon fill="none" stroke="#c0c0c0" points="17946.5,-47.0006 17685.5,-47.0006 17685.5,-8.3994 17946.5,-8.3994 17946.5,-47.0006"/>
<text text-anchor="middle" x="17816" y="-31.9" font-family="Inconsolata" font-size="14.00" fill="#000000"> and thus does have to be generated</text>
<text text-anchor="middle" x="17816" y="-16.5" font-family="Inconsolata" font-size="14.00" fill="#000000">fresh each time.</text>
</g>
<!-- raw_286&#45;&gt;leaf_293 -->
<g id="edge293" class="edge">
<title>raw_286&#45;&gt;leaf_293</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M17720.2868,-393.6881C17716.2577,-343.3063 17709.866,-197.6804 17758,-91.4 17764.2562,-77.5863 17774.6547,-64.7225 17784.933,-54.2231"/>
<polygon fill="#000000" stroke="#000000" points="17787.6119,-56.4998 17792.335,-47.016 17782.7286,-51.4845 17787.6119,-56.4998"/>
</g>
<!-- leaf_299 -->
<g id="node300" class="node">
<title>leaf_299</title>
<polygon fill="none" stroke="#c0c0c0" points="18505.5,-55.0004 17964.5,-55.0004 17964.5,-.3996 18505.5,-.3996 18505.5,-55.0004"/>
<text text-anchor="middle" x="18235" y="-23.9" font-family="Inconsolata" font-size="14.00" fill="#000000">This is the fun part: we swap the old metatable for a function which closes</text>
<text text-anchor="middle" x="18235" y="-8.5" font-family="Inconsolata" font-size="14.00" fill="#000000">over our</text>
</g>
<!-- raw_295&#45;&gt;leaf_299 -->
<g id="edge299" class="edge">
<title>raw_295&#45;&gt;leaf_299</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18362.7915,-393.4753C18369.732,-341.9218 18383.1996,-192.2622 18324,-91.4 18317.1786,-79.778 18307.306,-69.7064 18296.5963,-61.2183"/>
<polygon fill="#000000" stroke="#000000" points="18298.3938,-58.1933 18288.2801,-55.0366 18294.2177,-63.8113 18298.3938,-58.1933"/>
</g>
<!-- leaf_300 -->
<g id="node301" class="node">
<title>leaf_300</title>
<polygon fill="none" stroke="#c0c0c0" points="18578,-45.7 18524,-45.7 18524,-9.7 18578,-9.7 18578,-45.7"/>
<text text-anchor="middle" x="18551" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000"> </text>
</g>
<!-- prespace_296&#45;&gt;leaf_300 -->
<g id="edge300" class="edge">
<title>prespace_296&#45;&gt;leaf_300</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18451.4736,-393.6014C18453.3403,-343.5944 18462.4909,-200.0557 18507,-91.4 18512.3871,-78.2491 18520.8301,-65.0949 18528.8857,-54.1836"/>
<polygon fill="#000000" stroke="#000000" points="18531.8873,-56.0212 18535.1973,-45.9567 18526.3334,-51.7603 18531.8873,-56.0212"/>
</g>
<!-- leaf_301 -->
<g id="node302" class="node">
<title>leaf_301</title>
<polygon fill="none" stroke="#c0c0c0" points="18650,-45.7 18596,-45.7 18596,-9.7 18650,-9.7 18650,-45.7"/>
<text text-anchor="middle" x="18623" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">conn</text>
</g>
<!-- literal_297&#45;&gt;leaf_301 -->
<g id="edge301" class="edge">
<title>literal_297&#45;&gt;leaf_301</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18546.8325,-393.4556C18546.8892,-343.666 18550.4966,-201.8042 18587,-91.4 18591.2369,-78.5854 18598.1582,-65.4352 18604.8057,-54.4352"/>
<polygon fill="#000000" stroke="#000000" points="18607.9027,-56.0849 18610.2602,-45.7557 18601.9759,-52.3602 18607.9027,-56.0849"/>
</g>
<!-- leaf_302 -->
<g id="node303" class="node">
<title>leaf_302</title>
<polygon fill="none" stroke="#c0c0c0" points="18915.5,-45.7 18668.5,-45.7 18668.5,-9.7 18915.5,-9.7 18915.5,-45.7"/>
<text text-anchor="middle" x="18792" y="-24.2" font-family="Inconsolata" font-size="14.00" fill="#000000">, passing it along to the pragma.</text>
</g>
<!-- raw_298&#45;&gt;leaf_302 -->
<g id="edge302" class="edge">
<title>raw_298&#45;&gt;leaf_302</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M18619.474,-393.669C18610.3054,-341.3533 18590.9104,-187.1746 18659,-91.4 18672.31,-72.6783 18692.6273,-59.2551 18713.4053,-49.7161"/>
<polygon fill="#000000" stroke="#000000" points="18714.8436,-52.9074 18722.6386,-45.7318 18712.0702,-46.4802 18714.8436,-52.9074"/>
</g>
<!-- leaf_307 -->
<g id="node308" class="node">
<title>leaf_307</title>
<polygon fill="none" stroke="#c0c0c0" points="19370,-429.7006 19102,-429.7006 19102,-393.7006 19370,-393.7006 19370,-429.7006"/>
<text text-anchor="middle" x="19236" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">**** End Closure and Add =sql= to _G</text>
</g>
<!-- header_304&#45;&gt;leaf_307 -->
<g id="edge307" class="edge">
<title>header_304&#45;&gt;leaf_307</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19223.3891,-1001.4084C19225.2374,-914.9756 19233.1355,-545.6488 19235.3943,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="19238.8978,-439.8955 19235.6125,-429.823 19231.8994,-439.7458 19238.8978,-439.8955"/>
</g>
<!-- raw_308 -->
<g id="node309" class="node">
<title>raw_308</title>
<ellipse fill="none" stroke="#000000" cx="19427" cy="-411.7006" rx="27" ry="18"/>
<text text-anchor="middle" x="19427" y="-407.5006" font-family="Helvetica,sans-Serif" font-size="14.00" fill="#000000">raw</text>
</g>
<!-- prose_305&#45;&gt;raw_308 -->
<g id="edge308" class="edge">
<title>prose_305&#45;&gt;raw_308</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19427,-1001.4084C19427,-914.9756 19427,-545.6488 19427,-440.0221"/>
<polygon fill="#000000" stroke="#000000" points="19430.5001,-439.8229 19427,-429.823 19423.5001,-439.823 19430.5001,-439.8229"/>
</g>
<!-- leaf_310 -->
<g id="node311" class="node">
<title>leaf_310</title>
<polygon fill="none" stroke="#c0c0c0" points="19618.5,-438.9011 19511.5,-438.9011 19511.5,-384.5002 19618.5,-384.5002 19618.5,-438.9011"/>
<text text-anchor="middle" x="19565" y="-423.6007" font-family="Inconsolata" font-size="14.00" fill="#000000">end</text>
<text text-anchor="middle" x="19565" y="-408.2007" font-family="Inconsolata" font-size="14.00" fill="#000000">sql = sqlayer</text>
<text text-anchor="middle" x="19565" y="-392.8006" font-family="Inconsolata" font-size="14.00" fill="#000000">sqlayer = nil</text>
</g>
<!-- codeblock_306&#45;&gt;leaf_310 -->
<g id="edge310" class="edge">
<title>codeblock_306&#45;&gt;leaf_310</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19565,-1001.4084C19565,-917.308 19565,-565.3758 19565,-449.1387"/>
<polygon fill="#000000" stroke="#000000" points="19568.5001,-448.9568 19565,-438.9569 19561.5001,-448.9569 19568.5001,-448.9568"/>
</g>
<!-- leaf_309 -->
<g id="node310" class="node">
<title>leaf_309</title>
<polygon fill="none" stroke="#c0c0c0" points="19454,-45.7 19400,-45.7 19400,-9.7 19454,-9.7 19454,-45.7"/>
</g>
<!-- raw_308&#45;&gt;leaf_309 -->
<g id="edge309" class="edge">
<title>raw_308&#45;&gt;leaf_309</title>
<path fill="none" stroke="#000000" stroke-dasharray="5,2" d="M19427,-393.6945C19427,-332.3584 19427,-131.2332 19427,-56.2328"/>
<polygon fill="#000000" stroke="#000000" points="19430.5001,-56.114 19427,-46.114 19423.5001,-56.114 19430.5001,-56.114"/>
</g>
</g>
</svg>
